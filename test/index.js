System.register("chunks:///_virtual/AnimaView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./GameEvent.ts","./Decorators.ts","./GameConfigModel.ts","./UrlModel.ts","./UrlUtils.ts"],(function(e){"use strict";var n,t,i,a,o,r,l,c,m,u,s,_,f,v,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,c=e.sp,m=e.tween},function(e){u=e.default},function(e){s=e.GameEvent},function(e){_=e.inject},function(e){f=e.EBTM},function(e){v=e.default},function(e){p=e.default}],execute:function(){var d,A,b,M,L,V,E,k,w,C,g,h,N,G,O;o._RF.push({},"7e2c1vt/JBK6q3E52vUQS96","AnimaView",void 0);var y=r.ccclass,F=r.property;e("AnimView",(d=y("AnimView"),A=F(l),b=_("women",c.Skeleton),M=_("men",c.Skeleton),L=_("frame",c.Skeleton),V=_("menLevel2",c.Skeleton),E=_("bbr",l),d((C=n((w=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"animView",C,a(n)),i(n,"womenAnimation",g,a(n)),i(n,"menAnimation",h,a(n)),i(n,"frameAnime",N,a(n)),i(n,"menLevel2Animation",G,a(n)),i(n,"blackMask",O,a(n)),n}t(n,e);var o=n.prototype;return o.update=function(e){},o.addEvents=function(){var e=this;this.on(s.SHOW_WOMEN_LOCK_ANIM,(function(n){var t="",i="",a="";switch(n.data){case 1:t="lv_01",i=f.WOMEN_FG_CHA_LV1,a=f.WOMAN_FG_VOICE_LV1;break;case 2:t="lv_02",i=f.WOMEN_FG_CHA_LV2,a=f.WOMAN_FG_VOICE_LV2;break;case 3:t="lv_03",i=f.WOMEN_FG_CHA_LV3,a=f.WOMAN_FG_VOICE_LV3;break;default:return void n.complete()}m(e).delay(0).call((function(){e.womenAnimation.node.active=!0,e.blackMask.active=!0,"portrait"==p.getViewModeParam()&&(t+="_v"),e.womenAnimation.setAnimation(0,t,!1),dispatch(s.PLAY_BTM,{data:{url:i}}),dispatch(s.PLAY_BTM,{data:{url:a}}),e.womenAnimation.setCompleteListener((function(){e.womenAnimation.node.active=!1,e.blackMask.active=!1,n.complete()}))})).start()})),this.on(s.SHOW_MEN_SPLIT_ANIM,(function(n){console.log("number::::::::",n.data),console.log("number::::::::",n.data.to.length);var t="",i="",a="",o=null;switch(e.frameAnime&&"portrait"!=v.getViewModeParam()&&(e.frameAnime.clearTracks(),e.frameAnime.setToSetupPose(),e.frameAnime.node.active=!0,e.frameAnime.setAnimation(0,"frame",!1)),n.data.to.length){case 1:case 2:t="lv_1",i=f.MEN_FG_CHB_LV1,a=f.MEN_FG_VOICE_LV1,o=e.menAnimation;break;case 3:case 4:t="lv_2",i=f.MEN_FG_CHB_LV2,a=f.MEN_FG_VOICE_LV2,o=e.menLevel2Animation;break;case 5:case 6:t="lv_3",i=f.MEN_FG_CHB_LV3,a=f.MEN_FG_VOICE_LV3,o=e.menAnimation;break;default:return n.data.to.length>6&&(t="lv_3",i=f.MEN_FG_CHB_LV3,a=f.MEN_FG_VOICE_LV3),void n.complete()}m(e).delay(0).call((function(){o.node.active=!0,e.blackMask.active=!0,"portrait"==p.getViewModeParam()&&(t+="_v"),o.setAnimation(0,t,!1),dispatch(s.PLAY_BTM,{data:{url:i}}),dispatch(s.PLAY_BTM,{data:{url:a}}),"lv_1"==t?o.setEventListener((function(){o.setEventListener(null),e.frameAnime&&(e.frameAnime.node.active=!1),o.node.active=!1,e.blackMask.active=!1,n.complete()})):o.setCompleteListener((function(){e.frameAnime&&(e.frameAnime.node.active=!1),o.setCompleteListener(null),o.node.active=!1,e.blackMask.active=!1,n.complete()}))})).start()}))},n}(u)).prototype,"animView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(w.prototype,"womenAnimation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=n(w.prototype,"menAnimation",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(w.prototype,"frameAnime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(w.prototype,"menLevel2Animation",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(w.prototype,"blackMask",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=w))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadUtils.ts","./EventComponent.ts","./Decorators.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts"],(function(t){"use strict";var e,n,i,o,a,r,u,c,g,s,l,p,f,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,c=t.sp,g=t.Sprite},function(t){s=t.LoadUtils},function(t){l=t.default},function(t){p=t.inject},function(t){f=t.default},function(t){b=t.default},function(t){d=t.GameEvent}],execute:function(){var h,m,v,y,S,D,_,w,L,k,A,B,C;r._RF.push({},"6795agvgLRK8LTboHzv4BmT","BackgroundView",void 0);var E=u.ccclass;u.property,t("BackgroundView",(h=E("BackgroundView"),m=p("bgContent/bgLeft",g),v=p("bgContent/bgRight",g),y=p("bgDown",g),S=p("bgSpine",c.Skeleton),D=p("bgTopSpine",c.Skeleton),h((L=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"bgLeft",L,o(e)),i(e,"bgRight",k,o(e)),i(e,"bgDown",A,o(e)),i(e,"bgSpine",B,o(e)),i(e,"bgTopSpine",C,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.start=function(){this.init()},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.init=function(){f.useProEffect||(this.bgSpine.node.active=!1,this.bgTopSpine.node.active=!1)},r.setBg=function(t){var e=f.getData().filePaths.common,n=t?"mg_board":"fg_board",i=t?"mg_bg":this.data.getData().gameState.isGoldenFg?"nfg_bg":"fg_bg";this.bgLeft.spriteFrame=this.bgRight.spriteFrame=s.getDirSp(App.dataCenter.get(b).module,e,i),this.bgDown&&(this.bgDown.spriteFrame=s.getDirSp(App.dataCenter.get(b).module,e,n))},r.setBgAnimation=function(t){var e=t?"background_M":"background_FG",n=t?"background_M_top":"background_FG_top";f.useProEffect&&(this.bgSpine.setAnimation(0,e,!0),this.bgTopSpine.setAnimation(0,n,!0))},r.reset=function(){},r.setData=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.addEvents=function(){var t=this;this.on(d.CHANGE_GAME_STYLE,(function(e){t.setBgAnimation(e.data),t.setBg(e.data)}))},a(e,[{key:"data",get:function(){return App.dataCenter.get(b)}}]),e}(l)).prototype,"bgLeft",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(w.prototype,"bgRight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(w.prototype,"bgDown",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(w.prototype,"bgSpine",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(w.prototype,"bgTopSpine",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=w))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/BigwinView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./AutoPlayModel.ts","./SlotFrameworkEvent.ts","./CmmSlotUtils.ts","./MathUtil.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./types.ts","./ReplayModel.ts","./UrlUtils.ts"],(function(t){"use strict";var e,i,n,a,o,s,l,c,h,u,r,d,p,f,_,w,m,g,B,O,A,S,N,T,C,y,W,E,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,l=t._decorator,c=t.sp,h=t.Tween,u=t.macro,r=t.NodeEventType,d=t.tween,p=t.Vec3,f=t.KeyCode,_=t.Node,w=t.Label},function(t){m=t.default},function(t){g=t.inject},function(t){B=t.default},function(t){O=t.SlotFrameworkEvent},function(t){A=t.CmmSlotUtils},function(t){S=t.default},function(t){N=t.EBTM,T=t.default},function(t){C=t.default},function(t){y=t.GameEvent},function(t){W=t.EGameType},function(t){E=t.default},function(t){L=t.default}],execute:function(){var b,P,I,M,R,v,U,D,F,G,k,V,z,H,K;s._RF.push({},"409bbCJvUxLQqyrF/gEVeMJ","BigwinView",void 0);var Y,Z=l.ccclass;l.property;!function(t){t[t.NONE=0]="NONE",t[t.SHOW_BIGWIN=1]="SHOW_BIGWIN",t[t.SHOW_BUGWIN_NUMBER=2]="SHOW_BUGWIN_NUMBER",t[t.SHOW_BUGWIN_NUMBER_END=3]="SHOW_BUGWIN_NUMBER_END",t[t.BIGWIN_COMPLETED=4]="BIGWIN_COMPLETED"}(Y||(Y={}));t("BigwinView",(b=Z("BigwinView"),P=g("alert",_),I=g("alert/effectBg",c.Skeleton),M=g("alert/effectFont",c.Skeleton),R=g("alert/totalWin",w),v=g("alert/fireworks",c.Skeleton),U=g("alert/coinSprays",_),b((G=e((F=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"alert",G,a(e)),n(e,"effectBg",k,a(e)),n(e,"effectFont",V,a(e)),n(e,"totalWin",z,a(e)),n(e,"fireworks",H,a(e)),n(e,"coinSprays",K,a(e)),e.bigwinFontFileNames=["w_big","w_super","w_mega","w_ultra","w_legend"],e.completedCB=null,e.tweenNumTween=null,e.bigwinVO=null,e.playBigFontLoop=null,e.showWinStatus=Y.NONE,e.playPrizeLoopBtmSchedule=null,e.playPrizeVoiceBtmSchedule=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.start=function(){this.init()},s.onDestroy=function(){this.stopAllMusicAndSchedule(),t.prototype.onDestroy.call(this)},e.getPrefabUrl=function(){return"prefabs/"+L.getViewModeParam()+"/BigwinView"},s.init=function(){this.enabledKeyDown=!0},s.show=function(e){t.prototype.show.call(this),this.closeNodes()},s.onClose=function(){this.unscheduleAllCallbacks(),h.stopAllByTarget(this),this.closeNodes(),this.stopAllMusicAndSchedule(),App.globalAudio.resumeMusic(),this.close()},s.stopAllMusicAndSchedule=function(){dispatch(y.STOP_BTM,{data:N.WIN_LOOP}),dispatch(y.STOP_BTM,{data:N.SMALL_PRIZE_IN}),dispatch(y.STOP_BTM,{data:N.ULTRA_IN}),dispatch(y.STOP_BTM,{data:N.LEGEND_IN}),dispatch(y.STOP_BTM,{data:N.S_PRIZE_LOOP}),dispatch(y.STOP_BTM,{data:N.L_PRIZE_LOOP}),dispatch(y.STOP_BTM,{data:N.FIREWORKS}),dispatch(y.STOP_BTM,{data:N.BIG_VOCAL}),dispatch(y.STOP_BTM,{data:N.SUPER_VOCAL}),dispatch(y.STOP_BTM,{data:N.MEGA_VOCAL}),dispatch(y.STOP_BTM,{data:N.ULTRA_VOCAL}),dispatch(y.STOP_BTM,{data:N.LEGENDARY_VOCAL}),this.unschedule(this.playPrizeLoopBtmSchedule),this.unschedule(this.playPrizeVoiceBtmSchedule)},s.closeNodes=function(){this.effectBg.node.active=!1,this.effectFont.node.active=!1,this.totalWin.node.active=!1,this.fireworks.node.active=!1,this.coinSprays.active=!1,this.coinSprays.children.forEach((function(t){t.active=!1})),this.alert.targetOff(this),T.stopOnBigwinPrize&&(B.active=!1)},s.playAnimation=function(t,e){var i=this,n=0!=t,a=t>=4,o=this.bigwinVO.isRoundWin,s=0;App.globalAudio.pauseMusic(),n&&!o?a?(this.showFireworks(),4==t?(dispatch(y.PLAY_BTM,{data:{url:N.ULTRA_IN}}),s=2):5==t&&(dispatch(y.PLAY_BTM,{data:{url:N.LEGEND_IN}}),s=2.5),this.scheduleOnce((function(){i.playBigwin(t-1,e)}),s)):this.playBigwin(t-1,e):(this.playWin(e),this.showCoinSpray(),dispatch(y.PLAY_BTM,{data:{url:N.WIN_LOOP,loop:!0}}))},s.playWin=function(t){var e=this,i=T.getData().bigwinAutoCloseTime;this.effectBg.node.active=!0,this.effectFont.node.active=!0,this.effectFont.skeletonData=this.data.getGameAlertSpine("w_win"),this.effectFont.setAnimation(0,"in",!1),this.effectFont.setCompleteListener((function(){e.effectFont.setAnimation(0,"loop",!1),e.playBigFontLoop=function(){e.effectFont.setAnimation(0,"loop",!1)},e.schedule(e.playBigFontLoop,2.5,u.REPEAT_FOREVER,0),e.effectFont.setCompleteListener(null)})),this.effectBg.skeletonData=this.data.getGameAlertSpine("w_win_bg"),this.effectBg.setAnimation(0,"in",!1),this.effectBg.setCompleteListener((function(){e.effectBg.setAnimation(0,"loop",!0)})),this.scheduleOnce(this.showWinResult,i+t)},s.playBigwin=function(t,e){var i=this,n=T.getData().bigwinAutoCloseTime,a=this.bigwinFontFileNames[t],o=(this.data.getData().parser.bigwinReach.level,this.bigwinVO.isFgOut),s=2.5;3==t?s=2.3:4==t&&(s=2),this.effectBg.node.active=!0,this.effectFont.node.active=!0,this.effectFont.skeletonData=this.data.getGameAlertSpine(a),this.effectFont.setAnimation(0,"in",!1),this.effectFont.setCompleteListener((function(){i.effectFont.setAnimation(0,"loop",!1),i.playBigFontLoop=function(){i.effectFont.setAnimation(0,"loop",!1)},i.schedule(i.playBigFontLoop,2.5,u.REPEAT_FOREVER,0),i.effectFont.setCompleteListener(null)})),this.effectBg.skeletonData=this.data.getGameAlertSpine(a+"_bg"),this.effectBg.setAnimation(0,"in",!1),this.effectBg.setCompleteListener((function(){i.effectBg.setAnimation(0,"loop",!0)})),t<3&&dispatch(y.PLAY_BTM,{data:{url:N.SMALL_PRIZE_IN}}),this.playWinBtm(t),this.playPrizeLoopBtmSchedule=function(){var e=t<3?N.S_PRIZE_LOOP:N.L_PRIZE_LOOP;i.showCoinSpray(),dispatch(y.PLAY_BTM,{data:{url:e,loop:!0}})},this.scheduleOnce(this.playPrizeLoopBtmSchedule,s),n&&!o&&this.scheduleOnce(this.showWinResult,n+s+e),E.isReplay?o?this.scheduleOnce(this.showWinResult,n+s+e):this.scheduleOnce(this.addClickAlertCompleteCb,e+s):o?this.scheduleOnce((function(){i.alert.once(r.TOUCH_END,(function(){return i.showWinResult()}),n+s+e)}),n+s+e):this.scheduleOnce(this.addClickAlertCompleteCb,e+s)},s.addClickAlertCompleteCb=function(){this.alert.once(r.TOUCH_END,this.completedCB);var t=T.getData().bigwinAutoCloseTime;this.scheduleOnce(this.completedCB,t),this.unschedule(this.addClickAlertCompleteCb)},s.playWinBtm=function(t){var e,i=0;switch(t){case 0:e=N.BIG_VOCAL,i=1.2;break;case 1:e=N.SUPER_VOCAL,i=.8;break;case 2:e=N.MEGA_VOCAL,i=.9;break;case 3:e=N.ULTRA_VOCAL,i=.9;break;case 4:e=N.LEGENDARY_VOCAL,i=0}this.playPrizeVoiceBtmSchedule=function(){dispatch(y.PLAY_BTM,{data:{url:e}})},this.scheduleOnce(this.playPrizeVoiceBtmSchedule,i)},s.playBounceTween=function(t,e){d(t).to(.1,{scale:new p(1.8,1.8,1.8)}).delay(.01).to(.1,{scale:new p(1,1,1)},{onComplete:function(){e&&e()}}).start()},s.showFireworks=function(){this.fireworks.node.active=!0,this.fireworks.setAnimation(0,"fireworks",!0),this.fireworks.timeScale=1.5},s.showCoinSpray=function(){var t=this,e=this.coinSprays.getComponentsInChildren(c.Skeleton);this.coinSprays.active=!0;for(var i=function(){var i=e[n];0==n?(i.node.active=!0,i.setAnimation(0,"coin_01",!1)):1==n?t.scheduleOnce((function(){i.node.active=!0,i.setAnimation(0,"coin_02",!1)}),1.3):t.scheduleOnce((function(){var t=S.getRandomNumber(3,6);i.node.active=!0,i.setAnimation(0,"radom_0"+t,!1),i.setCompleteListener((function(){var t=S.getRandomNumber(3,6);i.setAnimation(0,"radom_0"+t,!1)}))}),2.8+.5*(n-2))},n=0;n<e.length;n++)i()},s.showWinResult=function(){var t=this,e=this.data.getData().gameState,i=e.totalWinnings,n=e.roundWinnings,a=this.data.currentGameType==W.MAIN_GAME,o=(this.data.getData().parser.bigwinReach.level,this.bigwinVO.isFgOut);this.tweenNumTween&&this.tweenNumTween.stop(),this.totalWin.string=A.formatNumber(this.bigwinVO.winnings),this.playBounceTween(this.totalWin.node),this.unschedule(this.playBigFontLoop),dispatch(y.QUICK_STOP_TOTAL_WINNINGS,{data:i}),dispatch(y.QUICK_STOP_WIN_AMOUNT,{data:a?i:n}),this.unschedule(this.showWinResult),this.showWinStatus=Y.SHOW_BUGWIN_NUMBER_END,this.bigwinVO.isRoundWin?this.scheduleOnce(this.completedCB,1):o?E.isReplay?(this.stopAllMusicAndSchedule(),this.completedCB()):this.scheduleOnce((function(){t.alert.once(r.TOUCH_END,(function(){t.stopAllMusicAndSchedule(),t.completedCB()}))}),1):this.addClickAlertCompleteCb()},s.showBigwin=function(t,e){var i=this,n=this.data.getData().gameState,a=n.totalWinnings,o=n.roundWinnings,s=this.data.currentGameType==W.MAIN_GAME,l=this.data.getData().definition.digital,c=this.data.getData().parser.bigwinReach.level,h=e.winnings,u=e.isRoundWin,d=5+3*c,p=c>=4&&!u?4.5:2.7,f={label:this.totalWin,start:0,end:h,tweenTime:d,digital:l,useThousandsSeparator:!0};(u||0==c)&&(p=0),this.bigwinVO=e,this.showWinStatus=Y.SHOW_BIGWIN,this.completedCB=function(){i.unscheduleAllCallbacks(),i.showWinStatus=Y.BIGWIN_COMPLETED,i.tweenNumTween&&i.tweenNumTween.stop(),dispatch(y.QUICK_STOP_TOTAL_WINNINGS,{data:a}),dispatch(y.QUICK_STOP_WIN_AMOUNT,{data:s?a:o}),t(),i.onClose(),i.unschedule(i.playBigFontLoop)},this.playAnimation(c,d),this.scheduleOnce((function(){i.showWinStatus=Y.SHOW_BUGWIN_NUMBER,i.totalWin.node.active=!0,i.tweenNumTween=A.tweenNum(f),i.alert.once(r.TOUCH_END,(function(){i.showWinResult()}),i),dispatch(O.UPDATE_TOTAL_WINNINGS,{data:{value:a,tweenTime:d}}),dispatch(y.UPDATE_WIN_AMOUNT,{data:{value:h,tweenTime:d}})}),p)},s.onKeyDown=function(e){if(t.prototype.onKeyDown.call(this,e),e.keyCode===f.SPACE)switch(this.showWinStatus){case Y.SHOW_BUGWIN_NUMBER:this.showWinResult(),this.showWinStatus=Y.SHOW_BUGWIN_NUMBER_END;break;case Y.SHOW_BUGWIN_NUMBER_END:this.showWinStatus=Y.BIGWIN_COMPLETED,this.unscheduleAllCallbacks(),this.scheduleOnce(this.completedCB,.5)}},s.addEvents=function(){},o(e,[{key:"data",get:function(){return App.dataCenter.get(C)}}]),e}(m)).prototype,"alert",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(F.prototype,"effectBg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"effectFont",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"totalWin",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(F.prototype,"fireworks",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(F.prototype,"coinSprays",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlackOverlayView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./GameEvent.ts"],(function(t){"use strict";var e,a,i,l,n,r,c,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,c=t.Node},function(t){o=t.default},function(t){s=t.GameEvent}],execute:function(){var u,v,y,h,p;n._RF.push({},"35ebfDwb1BJ2J7IhRhzeDOe","BlackOverlayView",void 0);var d=r.ccclass,b=r.property;t("BlackOverlayView",(u=d("BlackOverlayView"),v=b(c),u((p=e((h=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,i(e,"blackOverlay",p,l(e)),e.scatterSymbols=[],e.spliteSymbols=[],e}a(e,t);var n=e.prototype;return n.update=function(t){},n.showOverlay=function(){this.blackOverlay&&(this.blackOverlay.active=!0)},n.hideOverlay=function(){this.blackOverlay&&(this.blackOverlay.active=!1)},n.addEvents=function(){var t=this;this.on(s.SHOW_DARK,(function(){t.blackOverlay.active=!0})),this.on(s.HIDE_DARK,(function(){t.blackOverlay.active=!1;for(var e=0;e<t.scatterSymbols.length;e++)dispatch(s.BACK_SCATTER,{data:t.scatterSymbols[e]});t.scatterSymbols=[]})),this.on(s.SPLIT_HIDE_DARK,(function(){t.blackOverlay.active=!1;for(var e=0;e<t.spliteSymbols.length;e++)dispatch(s.BACK_SPLIT,{data:t.spliteSymbols[e]});t.spliteSymbols=[]})),this.on(s.MOVE_SCATTER,(function(e){t.scatterSymbols.push(e.data),t.node.addChild(e.data)})),this.on(s.MOVE_SPLIT,(function(e){t.spliteSymbols.push(e.data),t.node.addChild(e.data)}))},e}(o)).prototype,"blackOverlay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/BuyFeatureButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./SlotFrameworkEvent.ts","./type2.ts","./CmmSlotUtils.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts"],(function(t){"use strict";var e,n,i,o,a,r,u,s,c,l,f,h,p,d,y,B,E,S,F,v,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,s=t.Button,c=t.NodeEventType,l=t.v3,f=t.Color,h=t.Label,p=t.Sprite},function(t){d=t.default},function(t){y=t.inject},function(t){B=t.SlotFrameworkEvent},function(t){E=t.ESpinStatus},function(t){S=t.CmmSlotUtils},function(t){F=t.EBTM},function(t){v=t.default},function(t){b=t.GameEvent}],execute:function(){var T,_,m,C,A,g,U;r._RF.push({},"ecd3eit8QpCgYtF+zRz/IAy","BuyFeatureButton",void 0);var D=u.ccclass;u.property,t("BuyFeatureButton",(T=D("BuyFeatureButton"),_=y("stake",h),m=y("font",p),T((g=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"stake",g,o(e)),i(e,"fontSprite",U,o(e)),e.button=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this),this.init()},r.start=function(){},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.init=function(){this.button=this.node.getComponent(s),this.node.on(c.TOUCH_START,this.buyFeatureBtnHandler,this),this.node.on(c.TOUCH_MOVE,this.buyFeatureBtnHandler,this),this.node.on(c.TOUCH_CANCEL,this.buyFeatureBtnHandler,this),this.node.on(c.TOUCH_END,this.buyFeatureBtnHandler,this),this.fontSprite.spriteFrame=this.data.getLocaleSpriteFrame("mg_btn_font")},r.setBuyFeatureBtnActive=function(t){this.node.active=t},r.buyFeatureBtnHandler=function(t){if(this.button.interactable){var e=t.type==c.TOUCH_START?l(.95,.95,.95):l(1,1,1);this.node.children.forEach((function(t){t.setScale(e)})),t.type==c.TOUCH_END&&(dispatch(b.OPEN_FEATURE_POPUP),dispatch(b.PLAY_BTM,{data:{url:F.OPEN_FEATURE}}))}},r.updateBuyFeatureStake=function(t){var e=t*this.data.getData().definition.buyFeature[0].featureRate;this.stake.string=S.formatNumber(e)},r.updateBuyFeatureBtnStatus=function(t){var e=E.SPINING===t,n=new f(255,255,255,255),i=new f(130,130,130,255);this.button.interactable=!e,this.fontSprite.color=e?i:n,this.stake.color=e?i:n},r.reset=function(){},r.setData=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.addEvents=function(){var t=this;this.on(b.CHANGE_GAME_STYLE,(function(e){t.setBuyFeatureBtnActive(e.data)})),this.on(B.UPDATE_STAKE,(function(e){t.updateBuyFeatureStake(e.data)})),this.on(B.UPDATE_SPIN_STATUS,(function(e){t.updateBuyFeatureBtnStatus(e.data)}))},a(e,[{key:"data",get:function(){return App.dataCenter.get(v)}}]),e}(d)).prototype,"stake",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(A.prototype,"fontSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=A))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/BuyFeatureView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Decorators.ts","./StakeModel.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./Bundles.ts","./LoadUtils.ts","./UIView.ts","./ObjectUtils.ts","./GameSender.ts","./DefinitionModel.ts","./PlatformModel.ts","./SettingsModel.ts","./CmmSlotUtils.ts","./MathUtil.ts","./UrlUtils.ts"],(function(t){"use strict";var e,n,i,a,o,r,l,s,u,c,p,f,d,h,m,B,b,g,F,y,S,T,C,k,v,E,U,w,_,D,H,O,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.sp,u=t.NodeEventType,c=t.v3,p=t.Button,f=t.tween,d=t.Sprite,h=t.Node,m=t.Label},function(t){B=t.inject},function(t){b=t.default},function(t){g=t.SlotFrameworkEvent},function(t){F=t.EBTM,y=t.default},function(t){S=t.default},function(t){T=t.GameEvent},function(t){C=t.EBundles},function(t){k=t.LoadUtils},function(t){v=t.default},function(t){E=t.ObjectUtils},function(t){U=t.GameSender},function(t){w=t.default},function(t){_=t.default},function(t){D=t.default},function(t){H=t.CmmSlotUtils},function(t){O=t.default},function(t){A=t.default}],execute:function(){var I,L,P,V,x,M,R,z,N,j,G,q,J,K,Q,Y,W,X,Z;r._RF.push({},"f4ddfyBcwFJn6Q8Pc5lIgst","BuyFeatureView",void 0);var $=l.ccclass;l.property,t("BuyFeatureView",(I=$("BuyFeatureView"),L=B("popup",h),P=B("popup/spines",h),V=B("popup/titleFont",h),x=B("popup/cancelBtn",h),M=B("popup/cancelBtn/fontSprite",d),R=B("popup/confirmBtn",h),z=B("popup/confirmBtn/fontSprite",d),N=B("popup/stake",m),I((q=e((G=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"popup",q,a(e)),i(e,"spines",J,a(e)),i(e,"titleFont",K,a(e)),i(e,"cancelBtn",Q,a(e)),i(e,"cancelBtnFontSprite",Y,a(e)),i(e,"confirmBtn",W,a(e)),i(e,"confirmFontSprite",X,a(e)),i(e,"stake",Z,a(e)),e.skeletons=[],e.titleFontTween=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.start=function(){this.init()},r.onDestroy=function(){t.prototype.onDestroy.call(this)},e.getPrefabUrl=function(){return"prefabs/"+A.getViewModeParam()+"/BuyFeatureView"},r.init=function(){this.skeletons=this.spines.getComponentsInChildren(s.Skeleton),this.createTitleFontLoopAnim(),this.setData()},r.cancelBtnHandler=function(t){var e=t.type==u.TOUCH_START?c(1.15,1.15,1.15):c(1.2,1.2,1.2);this.cancelBtn.children.forEach((function(t){t.setScale(e)})),t.type==u.TOUCH_END&&this.closePopup()},r.confirmBtnHandler=function(t){var e=t.type==u.TOUCH_START?c(1.15,1.15,1.15):c(1.2,1.2,1.2);this.confirmBtn.children.forEach((function(t){t.setScale(e)})),t.type==u.TOUCH_END&&this.sendFeatureReq()},r.closePopup=function(){App.uiManager.close(e),dispatch(T.PLAY_BTM,{data:{url:F.CLOSE_FEATURE}})},r.addButtonsEvent=function(){this.cancelBtn.on(u.TOUCH_START,this.cancelBtnHandler,this),this.cancelBtn.on(u.TOUCH_MOVE,this.cancelBtnHandler,this),this.cancelBtn.on(u.TOUCH_CANCEL,this.cancelBtnHandler,this),this.cancelBtn.on(u.TOUCH_END,this.cancelBtnHandler,this),this.confirmBtn.on(u.TOUCH_START,this.confirmBtnHandler,this),this.confirmBtn.on(u.TOUCH_MOVE,this.confirmBtnHandler,this),this.confirmBtn.on(u.TOUCH_CANCEL,this.confirmBtnHandler,this),this.confirmBtn.on(u.TOUCH_END,this.confirmBtnHandler,this)},r.sendFeatureReq=function(){var t={ratioIndex:b.ratioIndex,ratioValue:b.ratioValue,stakeIndex:b.stakeIndex,stakeValue:b.stakeValue};if(this.checkBalance(t))App.senderManager.get(U).buyFeature(t,this.needUpdateStake()),this.setInteractable(!1),this.cancelBtn.targetOff(this),this.confirmBtn.targetOff(this);else{var e={text:App.getLanguage("insufficientFund",[],C[C.wrapper]),confirmCb:function(){},bbrCb:function(){}};App.gameAlert.show(e)}},r.checkBalance=function(t){var e=w.getData().winlineDefs.length,n=this.data.getData().definition.buyFeature,i=t.stakeValue,a=t.ratioValue,o=O.multiply(a,i,e)*n[0].featureRate;return _.getData().player.balance.amount-o>=0},r.updateBuyFeatureStake=function(){var t=b.getData().totalStake*this.data.getData().definition.buyFeature[0].featureRate;this.stake.string=H.formatNumber(t)},r.setInteractable=function(t){this.confirmBtn.getComponent(p).interactable=t,this.cancelBtn.getComponent(p).interactable=t},r.createTitleFontLoopAnim=function(){this.titleFontTween=f(this.titleFont).repeatForever(f().to(1.5,{scale:c(.97,.97)}).to(1.5,{scale:c(1,1)}))},r.needUpdateStake=function(){var t={stakeIndex:D.stakeIndex,ratioIndex:D.ratioIndex},e={stakeIndex:b.stakeIndex,ratioIndex:b.ratioIndex},n=E.diffObjects(t,e);return Object.keys(n).length>0},r.reset=function(){},r.setData=function(){var t=y.getData().filePaths.localeSpriteFrame;this.confirmFontSprite.spriteFrame=k.getDirSp(this.bundle,t,"popup_font_01"),this.cancelBtnFontSprite.spriteFrame=k.getDirSp(this.bundle,t,"popup_font_02"),this.titleFont.getComponent(d).spriteFrame=k.getDirSp(this.bundle,t,"popup_font_03")},r.openPopup=function(){var t;this.updateBuyFeatureStake(),this.popup.active=!0,this.skeletons.forEach((function(t){t.setAnimation(0,"popup",!1),t.setCompleteListener((function(){t.setAnimation(0,"loop",!0),t.setCompleteListener(null)}))})),this.setInteractable(!0),this.addButtonsEvent(),null==(t=this.titleFontTween)||t.start()},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.addEvents=function(){var t=this;this.on(T.CLOSE_FEATURE_POPUP,(function(e){t.closePopup()})),this.on(g.UPDATE_STAKE,(function(e){t.updateBuyFeatureStake()}))},o(e,[{key:"data",get:function(){return App.dataCenter.get(S)}}]),e}(v)).prototype,"popup",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(G.prototype,"spines",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(G.prototype,"titleFont",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(G.prototype,"cancelBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(G.prototype,"cancelBtnFontSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(G.prototype,"confirmBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(G.prototype,"confirmFontSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(G.prototype,"stake",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=G))||j));r._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts"],(function(e){"use strict";var t,n,i,a,r,o,c,f,l,s,m,u,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,c=e._decorator,f=e.sp},function(e){l=e.default},function(e){s=e.inject},function(e){m=e.default,u=e.EBTM},function(e){p=e.default},function(e){h=e.GameEvent}],execute:function(){var E,w,d,b,g,S,v,y,F,C,_,A,L,T,D,N,R,z,k;o._RF.push({},"bb595TDS4BBSrzuiYSG46Qa","CharacterView",void 0);var M=c.ccclass;c.property,e("CharacterView",(E=M("CharacterView"),w=s("manElement/man",f.Skeleton),d=s("womanElement/woman",f.Skeleton),b=s("manElement/lower",f.Skeleton),g=s("manElement/upper",f.Skeleton),S=s("manElement/fire",f.Skeleton),v=s("womanElement/lower",f.Skeleton),y=s("womanElement/upper",f.Skeleton),F=s("womanElement/fire",f.Skeleton),E((A=t((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"man",A,a(t)),i(t,"woman",L,a(t)),i(t,"manLowerEffect",T,a(t)),i(t,"manUpperEffect",D,a(t)),i(t,"manFireEffect",N,a(t)),i(t,"womanLowerEffect",R,a(t)),i(t,"womanUpperEffect",z,a(t)),i(t,"womanFireEffect",k,a(t)),t.fgEffectNodes=[],t}n(t,e);var o=t.prototype;return o.onLoad=function(){e.prototype.onLoad.call(this)},o.start=function(){this.init()},o.onDestroy=function(){e.prototype.onDestroy.call(this)},o.init=function(){this.fgEffectNodes=[this.manLowerEffect.node,this.manUpperEffect.node,this.womanLowerEffect.node,this.womanUpperEffect.node],m.useProEffect||(this.manLowerEffect.node.active=!1,this.womanLowerEffect.node.active=!1)},o.playCharacterManFire=function(e){var t=this;this.man.setAnimation(0,"characterB_fire",!1),this.man.timeScale=e,this.man.setCompleteListener((function(){t.man.timeScale=1,t.man.setAnimation(0,"characterB_idle",!0)})),dispatch(h.PLAY_BTM,{data:{url:u.NEW_CH_MAN_TRANSITION}}),this.manFireEffect.node.active=!0,this.manFireEffect.setAnimation(0,"fireball",!1),this.manFireEffect.setCompleteListener((function(){t.manFireEffect.node.active=!1}))},o.playCharacterWomanFire=function(e){var t=this;this.woman.setAnimation(0,"characterA_fire",!1),this.woman.timeScale=e,this.woman.setCompleteListener((function(){t.woman.timeScale=1,t.woman.setAnimation(0,"characterA_idle",!0)})),dispatch(h.PLAY_BTM,{data:{url:u.NEW_CH_WOMAN_TRANSITION}}),this.womanFireEffect.node.active=!0,this.womanFireEffect.setAnimation(0,"fireball",!1),this.womanFireEffect.setCompleteListener((function(){t.womanFireEffect.node.active=!1}))},o.showOpenFire=function(){var e=m.getData().reelConfig.characterFireSpeed,t=this.data.getData().parser.newTimesSymbols,n=!1,i=!1;if(t.length){for(var a=0;a<t.length;a++)t[a].isRare?n=!0:i=!0;i&&this.playCharacterManFire(e),n&&this.playCharacterWomanFire(e)}},o.setFgElements=function(e){this.fgEffectNodes.forEach((function(t){(m.useProEffect||"lower"!==t.name)&&(t.active=!e)}))},o.speedUpCharacterFire=function(){var e=this.data.getData().parser.newTimesSymbols,t=!1,n=!1;if(e.length){for(var i=0;i<e.length;i++)e[i].isRare?t=!0:n=!0;n&&(this.man.timeScale=1.2*this.man.timeScale),t&&(this.woman.timeScale=1.2*this.woman.timeScale)}},o.reset=function(){},o.setData=function(e){},o.show=function(){this.node.active=!0},o.hide=function(){this.node.active=!1},o.addEvents=function(){var e=this;this.on(h.SHOW_CHARACTER_FIRE,(function(t){e.showOpenFire()})),this.on(h.SPEED_CHARACTER_FIRE_UP,(function(t){e.speedUpCharacterFire()})),this.on(h.CHANGE_GAME_STYLE,(function(t){e.setFgElements(t.data)}))},r(t,[{key:"data",get:function(){return App.dataCenter.get(p)}}]),t}(l)).prototype,"man",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(_.prototype,"woman",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(_.prototype,"manLowerEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(_.prototype,"manUpperEffect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(_.prototype,"manFireEffect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(_.prototype,"womanLowerEffect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(_.prototype,"womanUpperEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(_.prototype,"womanFireEffect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewCloseSpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(t){"use strict";var e,n,a,o,i,s,r,l,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){a=t.cclegacy},function(t){o=t.FlowTrigger},function(t){i=t.SingletonExtends},function(t){s=t.SlotFrameworkEvent},function(t){r=t.default},function(t){l=t.GameEvent},function(t){u=t.FlowIDs}],execute:function(){a._RF.push({},"f257fIQ7PRLcIovBjtKHHvC","CreateNewCloseSpinFlowCmd",void 0);t("default",function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var i=a.prototype;return i.execute=function(){var t=this.createFlow();App.flowManager.registerFlow(t)},i.createFlow=function(){var t=new App.flowManager.Flow(u.CLOSE_SPIN_FLOW),e=this.data.getData().gameState,n=e.totalWinnings,a=e.isJp,i=e.noWinReward,r=this.data.setNewBigWinReach(n);if(a.length&&t.add(o.CONCURRENT,new l(l.SHOW_JP_WIN),o.AFTER_PREVIOUS,new l(l.SHOW_JP)),i&&i>0)t.add(o.AFTER_PREVIOUS,new l(l.SHOW_TREASURE_VIEW,null));else if(r&&!a.length){var c={winnings:n,isRoundWin:!1};t.add(o.CONCURRENT,new l(l.SHOW_BIGWIN,c))}return this.data.isOpenEarlyFlag?t.add(o.AFTER_PREVIOUS,new l(l.SPIN_CLOSED_FLOW,null,{autoComplete:!0})):t.add(o.AFTER_PREVIOUS,new s(s.SEND_CLOSE_REQUEST,this.data.getData().spinId,{autoComplete:!0})),t},n(a,[{key:"data",get:function(){return App.dataCenter.get(r)}}]),a}(i).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewEarlySpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./StakeModel.ts","./GameData.ts","./FlowIDs.ts","./SlotFrameworkEvent.ts","./types.ts","./Bundles.ts","./DefinitionModel.ts","./PlatformModel.ts","./type2.ts","./MathUtil.ts"],(function(t){"use strict";var e,a,n,i,o,r,s,u,l,c,f,d,p,g,w;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy},function(t){i=t.FlowTrigger},function(t){o=t.SingletonExtends},function(t){r=t.default},function(t){s=t.default},function(t){u=t.FlowIDs},function(t){l=t.SlotFrameworkEvent},function(t){c=t.EGameType},function(t){f=t.EBundles},function(t){d=t.default},function(t){p=t.default},function(t){g=t.ESpinStatus},function(t){w=t.default}],execute:function(){n._RF.push({},"3fafbScPZpNLLTFiwsYNj/7","CreateNewEarlySpinFlowCmd",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.execute=function(t){var e=this.createFlow(t);App.flowManager.registerFlow(e)},o.createFlow=function(t){return this.createMgFlow(t)},o.createMgFlow=function(t){var e=new App.flowManager.Flow(u.EARLY_SPIN_FLOW),a=t.data.data,n=(a.spinId,a.test),o={ratioIndex:r.ratioIndex,ratioValue:r.ratioValue,stakeIndex:r.stakeIndex,stakeValue:r.stakeValue};if(0===p.getData().player.balance.amount&&this.data.currentGameType===c.MAIN_GAME)return this.data.isOpenEarlyFlag=!1,e;if(!this.checkBalance()&&this.data.currentGameType===c.MAIN_GAME){this.data.isOpenEarlyFlag=!1;var s={text:App.getLanguage("insufficientFund",[],f[f.wrapper]),confirmCb:function(){d()},bbrCb:function(){d()}},d=function(){dispatch(l.SHOW_AUTO_SPIN,{data:!0}),dispatch(l.UPDATE_SPIN_STATUS,{data:g.IDLE})};return setTimeout((function(){App.gameAlert.show(s)}),500),dispatch(l.STOP_AUTO_SPIN),e}return e.add(i.CONCURRENT,new l(l.SEND_EARLY_SPIN_REQUEST,{spinId:"",stakeVO:o,test:n,forceClose:this.data.getData().spinId},{autoComplete:!0})),e},o.checkBalance=function(){var t={ratioIndex:r.ratioIndex,ratioValue:r.ratioValue,stakeIndex:r.stakeIndex,stakeValue:r.stakeValue},e=t.stakeValue,a=t.ratioValue,n=d.getData().winlineDefs.length,i=w.multiply(a,e,n);return p.getData().player.balance.amount-i>=0},a(n,[{key:"data",get:function(){return App.dataCenter.get(s)}}]),n}(o).instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewQuickStopFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,n,a,o,l,i,S,_,u,s,E;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){o=e.FlowTrigger},function(e){l=e.SingletonExtends},function(e){i=e.SlotFrameworkEvent},function(e){S=e.default,_=e.EBTM},function(e){u=e.default},function(e){s=e.GameEvent},function(e){E=e.FlowIDs}],execute:function(){a._RF.push({},"e929cab5CJA3bK+5qj8Mh55","CreateNewQuickStopFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var l=a.prototype;return l.execute=function(){if(S.quickStopCount++,S.canQuickStop&&!S.isTurbo){S.quickStopCount++;var e=this.createFlow();App.flowManager.killFlow(E.STOP_SPIN_FLOW),App.flowManager.registerFlow(e),S.canQuickStop=!1,S.canQuickStopEarlySpin=!1}},l.createFlow=function(){var e=new App.flowManager.Flow(E.QUICK_STOP_FLOW),t=this.data.getData().parser.newTimesSymbols;return e.add(o.CONCURRENT,new s(s.START_QUICK_STOP)),t.length&&e.add(o.CONCURRENT,new s(s.SPEED_CHARACTER_FIRE_UP,null,{autoComplete:!0})),e.add(o.AFTER_PREVIOUS,new s(s.SHOW_SYMBOLS_QUICK_IN_ANIM)),this.ShowWinFlow(e),e},l.ShowWinFlow=function(e){var t=this.data.getData().gameState,n=t.winSymbols,a=t.totalWinnings,l=t.timesSymbols,u=t.timesUpgrade,E=void 0===u?[]:u,d=t.action,r=t.roundWinnings,T=t.splitList,w=t.femaleTotemLevel,O=void 0===w?0:w,I=t.maleTotemLevel,c=void 0===I?0:I,p=this.data.preSpinData,R=null==p?void 0:p.winSymbols.length,A="freeSpin"==d,m=A?r:a,C=this.data.getData().parser.newTimesSymbols.length?.8:.3,F=R&&!n.length&&l.length,g=A?r:a,N=this.data.setNewBigWinReach(g),P=S.getData().winAmountTime,M=.5;(O>0||c>0)&&(M=0),n&&n.length&&(e.add(o.AFTER_PREVIOUS,new s(s.SHOW_WIN_CASH,null,{autoComplete:!0,delay:C}),new s(s.UPDATE_WIN_AMOUNT,{value:m},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:a,tweenTime:P},{autoComplete:!0}),new s(s.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new s(s.SHOW_SYMBOLS_WIN),new s(s.SHOW_FULL_COMBO),new s(s.REMOVE_SYMBOLS,null,{delay:M})),O>0&&(e.add(o.AFTER_PREVIOUS,new s(s.SHOW_WOMEN_LOCK_ANIM,O)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(o.AFTER_PREVIOUS,new s(s.SHOW_TIMES_LOCK,{}))),null!=T&&T.length>0?(e.add(o.AFTER_PREVIOUS,new s(s.SHOW_MEN_SPLIT_ANIM,T[0])),e.add(o.AFTER_PREVIOUS,new s(s.SHOW_SPLIT_FIRE_BALL,{})),e.add(o.AFTER_PREVIOUS,new s(s.SHOW_TIMES_A,{})),e.add(o.AFTER_PREVIOUS,new s(s.SPLIT_HIDE_DARK,null,{autoComplete:!0}))):console.log("splitSymbols 未定义或为空"),e.add(o.AFTER_PREVIOUS,new s(s.PLAY_CURRENT_VIEW_FALL_ANIM)),E&&E.length&&e.add(o.AFTER_PREVIOUS,new s(s.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))),F&&(N?e.add(o.AFTER_PREVIOUS,new s(s.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(o.AFTER_PREVIOUS,new s(s.SHOW_TIMES_MOVING,null,{delay:.8}),new s(s.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:a,needComplete:!0,tweenTime:P}))),e.add(o.AFTER_PREVIOUS,new s(s.CREATE_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},n(a,[{key:"data",get:function(){return App.dataCenter.get(u)}}]),a}(l).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewResumeFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./type2.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,n,a,o,l,i,s,u,r,d,S,_,E;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){o=e.FlowTrigger},function(e){l=e.SingletonExtends},function(e){i=e.default},function(e){s=e.SlotFrameworkEvent},function(e){u=e.ESpinStatus},function(e){r=e.default,d=e.EBTM},function(e){S=e.default},function(e){_=e.GameEvent},function(e){E=e.FlowIDs}],execute:function(){a._RF.push({},"9ce3e+jBxZD6amGmhDzG0jA","CreateNewResumeFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var l=a.prototype;return l.execute=function(){var e=this.createFlow();App.flowManager.registerFlow(e)},l.createFlow=function(){var e=new App.flowManager.Flow(E.RESUME_FLOW);return dispatch(s.UPDATE_USER_SPIN_ID,{data:{spinId:this.data.getData().spinId}}),dispatch(s.UPDATE_SPIN_STATUS,{data:u.SPINING}),dispatch(_.UPDATE_GAME_TYPE,{data:this.data.currentGameType}),this.ShowWinFlow(e),e},l.ShowWinFlow=function(e){var t=this.data.getData().gameState,n=t.winSymbols,a=t.totalWinnings,l=t.timesSymbols,i=t.timesUpgrade,u=void 0===i?[]:i,S=t.action,E=t.roundWinnings,w=t.femaleTotemLevel,T=void 0===w?0:w,c=t.maleTotemLevel,m=void 0===c?0:c,p=this.data.preSpinData,I=null==p?void 0:p.winSymbols.length,O="freeSpin"==S,A=O?E:a,g=this.data.getData().parser.newTimesSymbols.length?.8:.3,f=I&&!n.length&&l.length,F=O?E:a,N=this.data.setNewBigWinReach(F),R=r.getData().winAmountTime,h=.5;(T>0||m>0)&&(h=0),n&&n.length&&(e.add(o.AFTER_PREVIOUS,new _(_.SHOW_WIN_CASH,null,{autoComplete:!0,delay:g}),new _(_.UPDATE_WIN_AMOUNT,{value:A},{autoComplete:!0}),new s(s.UPDATE_TOTAL_WINNINGS,{value:a,tweenTime:R},{autoComplete:!0}),new _(_.PLAY_BTM,{url:d.COUNTING},{autoComplete:!0}),new _(_.SHOW_SYMBOLS_WIN),new _(_.SHOW_FULL_COMBO),new _(_.REMOVE_SYMBOLS,null,{delay:h})),T>0&&(e.add(o.AFTER_PREVIOUS,new _(_.SHOW_WOMEN_LOCK_ANIM,T)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_LOCK,{}))),e.add(o.AFTER_PREVIOUS,new _(_.PLAY_CURRENT_VIEW_FALL_ANIM)),u&&u.length&&e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))),f&&(N?e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8}),new _(_.PLAY_BTM,{url:d.COUNTING},{autoComplete:!0}),new s(s.UPDATE_TOTAL_WINNINGS,{value:a,needComplete:!0,tweenTime:R}))),e.add(o.AFTER_PREVIOUS,new _(_.CREATE_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},n(a,[{key:"data",get:function(){return App.dataCenter.get(S)}},{key:"slotData",get:function(){return App.dataCenter.get(i)}}]),a}(l).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewSpinCompleteFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./StakeModel.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameSymbolID.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,n,a,l,o,i,u,s,r,w,_,T,E;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){l=e.FlowTrigger},function(e){o=e.SingletonExtends},function(e){i=e.default},function(e){u=e.SlotFrameworkEvent},function(e){s=e.default,r=e.EBTM},function(e){w=e.default},function(e){_=e.EBackendSymbolID},function(e){T=e.GameEvent},function(e){E=e.FlowIDs}],execute:function(){a._RF.push({},"697faiNcK1JOrV7PVrRi3Nn","CreateNewSpinCompleteFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var o=a.prototype;return o.execute=function(){this.createFlow()},o.createFlow=function(){var e=this.data.currSpinData,t=e.currentView,n=e.totalViews,a=e.startFreeGame,l=e.action,o=t+1===n,i=o&&"freeSpin"==l;a?this.showFreeGameIntroFlow():o?i?this.freeGameFinishFlow():this.closeSpinFlow():this.nextSpinFlow()},o.showFreeGameIntroFlow=function(){var e=new App.flowManager.Flow(E.SHOW_FG_INTRO_FLOW),t=this.data.currSpinData.totalWinnings,n=this.data.setNewBigWinReach(t),a=s.getData().winAmountTime;if(console.error("bigreach::::::::"+n),console.error("totalWinnings::::::::"+t),n){var o={winnings:t,isRoundWin:!0};e.add(l.CONCURRENT,new T(T.SHOW_SCATTER_WIN,null,{delay:.3}),l.AFTER_PREVIOUS,new T(T.SHOW_BIGWIN,o,{delay:1}),new T(T.HIDE_DARK,null,{autoComplete:!0}),new T(T.SHOW_FG_INTRO_ALERT,null,{autoComplete:!0,delay:1}))}else e.add(l.CONCURRENT,new T(T.SHOW_SCATTER_WIN,null,{delay:.3}),l.AFTER_PREVIOUS,new T(T.UPDATE_WIN_AMOUNT,{value:t},{autoComplete:!0}),new T(T.PLAY_BTM,{url:r.COUNTING},{autoComplete:!0}),new u(u.UPDATE_TOTAL_WINNINGS,{value:t,needComplete:!0,tweenTime:a}),new T(T.HIDE_DARK,null,{autoComplete:!0}),new T(T.SHOW_FG_INTRO_ALERT,null,{autoComplete:!0}));App.flowManager.registerFlow(e)},o.nextSpinFlow=function(){var e=new App.flowManager.Flow(E.NEXT_SPIN_FLOW),t=this.data.getData().parser,n=t.newTimesSymbols,a=t.view1D,o=this.data.currSpinData,r=o.spinId,w=o.winSymbols,S=o.roundWinnings,d=o.action,p=s.getData(),N=p.hasTimesSymbolsDelay,I=p.nextSpinDelay,C=n.length?N:I;if(null==w&&(w=[]),w.length){i.ratioIndex,i.ratioValue,i.stakeIndex,i.stakeValue;e.add(l.AFTER_PREVIOUS,new T(T.CREATE_SPIN_FLOW,{spinId:r,test:null,next:!0},{autoComplete:!0,delay:C}))}else{if("freeSpin"==d){if(this.data.setNewBigWinReach(S)){var R={winnings:S,isRoundWin:!0};e.add(l.CONCURRENT,new u(T.SHOW_BIGWIN,R,{delay:.5}))}a.filter((function(e){return e==_.SCATTER||e==_.GOLD_SCATTER})).length>=3&&e.add(l.CONCURRENT,new T(T.SHOW_SCATTER_WIN,null,{delay:.8}),l.AFTER_PREVIOUS,new T(T.INCREASE_FG_REMAINING),l.AFTER_PREVIOUS,new T(T.HIDE_DARK,null,{autoComplete:!0}))}e.add(l.AFTER_PREVIOUS,new T(T.CREATE_SPIN_FLOW,{spinId:r,test:null,next:!0},{autoComplete:!0,delay:C}))}App.flowManager.registerFlow(e)},o.freeGameFinishFlow=function(){var e=new App.flowManager.Flow(E.SHOW_FG_SUMMARY_FLOW),t=this.data.currSpinData,n=t.totalWinnings,a=t.roundWinnings,o=this.data.getData().spinId,i=this.data.setNewBigWinReach(a),w=this.data.setNewBigWinReach(n),_=s.getData().winAmountTime;if(i){var S={winnings:a,isRoundWin:!0};e.add(l.CONCURRENT,new T(T.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0,delay:2.5}),new u(u.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:_},{autoComplete:!0}),new T(T.SHOW_BIGWIN,S))}if(w){var d={winnings:n,isRoundWin:!1,isFgOut:!0};e.add(l.AFTER_PREVIOUS,new u(u.SEND_CLOSE_REQUEST,o,{autoComplete:!0}),new T(T.SHOW_FG_SUMMARY_ALERT,null,{delay:1}),new T(T.TIMES_LOCK_ALLOUT,null,{autoComplete:!0}),new T(T.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0,delay:1.8}),new u(u.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:_},{autoComplete:!0}),new T(T.SHOW_BIGWIN,d),new T(T.SPIN_CLOSED_FLOW,null,{autoComplete:!0}))}else e.add(l.AFTER_PREVIOUS,new u(u.SEND_CLOSE_REQUEST,o,{autoComplete:!0}),new T(T.SHOW_FG_SUMMARY_ALERT,null,{delay:1}),new T(T.TIMES_LOCK_ALLOUT,null,{autoComplete:!0}),new T(T.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0}),new u(u.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:_},{autoComplete:!0}),new T(T.UPDATE_WIN_AMOUNT,{value:n},{autoComplete:!0,delay:1.8}),new T(T.PLAY_BTM,{url:r.COUNTING},{autoComplete:!0}),new u(u.UPDATE_TOTAL_WINNINGS,{value:n,needComplete:!0,tweenTime:_}),new T(T.SPIN_CLOSED_FLOW,null,{autoComplete:!0}));App.flowManager.registerFlow(e)},o.closeSpinFlow=function(){dispatch(T.CREATE_CLOSE_SPIN_FLOW)},o.resetEarlyData=function(){this.data.isEarlyFlag=!1,this.data.earlyData=null,this.data.isEarlyCloseFlag=!1,this.data.earlyCloseData=null},n(a,[{key:"data",get:function(){return App.dataCenter.get(w)}}]),a}(o).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewSpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bundles.ts","./ObjectUtils.ts","./Flow.ts","./SingletonExtends.ts","./AutoPlayModel.ts","./SlotFrameworkData.ts","./StakeModel.ts","./SlotFrameworkEvent.ts","./DefinitionModel.ts","./PlatformModel.ts","./SettingsModel.ts","./type2.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./types.ts","./FlowIDs.ts","./MathUtil.ts"],(function(t){"use strict";var e,a,n,i,o,l,s,u,r,d,c,p,f,S,g,I,A,m,_,E,h;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy},function(t){i=t.EBundles},function(t){o=t.ObjectUtils},function(t){l=t.FlowTrigger},function(t){s=t.SingletonExtends},function(t){u=t.default},function(t){r=t.default},function(t){d=t.default},function(t){c=t.SlotFrameworkEvent},function(t){p=t.default},function(t){f=t.default},function(t){S=t.default},function(t){g=t.ESpinStatus},function(t){I=t.default},function(t){A=t.default},function(t){m=t.GameEvent},function(t){_=t.EGameType},function(t){E=t.FlowIDs},function(t){h=t.default}],execute:function(){n._RF.push({},"1310bvF0/5ICKOvJZ6tki4I","CreateNewSpinFlowCmd",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.execute=function(t){dispatch(m.SPIN_START),this.data.isSendOutEarlyFlag=!1,this.data.isSendClose=!1;var e=this.createSpinFlow(t);App.flowManager.registerFlow(e)},s.createSpinFlow=function(t){var e=new App.flowManager.Flow(E.SPIN_FLOW);return App.uiManager.IsOnlyGameViewOpen("GameView")?(dispatch(c.UPDATE_SPIN_STATUS,{data:g.SPINING}),t.data.next?this.nextSpinFlow(e,t):this.firstSpinFlow(e,t),e):(Log.e("spin前提不能有其他UI在畫面上，所以不執行 SpinFlow"),e)},s.firstSpinFlow=function(t,e){var a=e.data,n=a.spinId,o=a.test,s=I.getData().winAmountTime,u={ratioIndex:d.ratioIndex,ratioValue:d.ratioValue,stakeIndex:d.stakeIndex,stakeValue:d.stakeValue};if(0===f.getData().player.balance.amount&&this.data.currentGameType===_.MAIN_GAME&&!this.data.getData().isResuming){var r={text:App.getLanguage("insufficientFundError",[],i[i.wrapper]),confirmCb:function(){p()},bbrCb:function(){p()}},p=function(){dispatch(c.SHOW_AUTO_SPIN,{data:!0}),dispatch(c.UPDATE_SPIN_STATUS,{data:g.IDLE})};return this.data.isOpenEarlyFlag=!1,this.data.isSendOutEarlyFlag=!1,App.gameAlert.show(r),void dispatch(c.STOP_AUTO_SPIN)}if(!this.checkBalance()&&this.data.currentGameType===_.MAIN_GAME&&!this.data.getData().isResuming){var S={text:App.getLanguage("insufficientFund",[],i[i.wrapper]),confirmCb:function(){A()},bbrCb:function(){A()}},A=function(){dispatch(c.SHOW_AUTO_SPIN,{data:!0}),dispatch(c.UPDATE_SPIN_STATUS,{data:g.IDLE})};return this.data.isSendOutEarlyFlag=!1,this.data.isOpenEarlyFlag=!1,App.gameAlert.show(S),void dispatch(c.STOP_AUTO_SPIN)}this.data.currentGameType===_.MAIN_GAME&&(Log.e("spinId::::::::",n),null!=n&&""!=n?(Log.e("buy feature:::::::::::"),f.amount=this.getAfterBuyFeatureBalance()):f.amount=this.getAfterBettingBalance()),n||t.add(l.CONCURRENT,new c(c.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:s},{autoComplete:!0})),this.calculateAutoSpin(),t.add(l.CONCURRENT,new m(m.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0}),new m(c.PLAY_SPIN_BTN_RELEASED_ANIM,null,{autoComplete:!0}));var E=f.amount;t.add(l.CONCURRENT,new m(c.UPDATE_USER_BALANCE,{balance:E},{autoComplete:!0})),this.data.isOpenEarlyFlag?t.add(l.AFTER_PREVIOUS,new m(m.SHOW_SYMBOLS_OUT_ANIM),l.AFTER_PREVIOUS,new m(m.EARLY_DATA_PARSER_TO_SPIN_DATA,null,{autoComplete:!0})):t.add(l.AFTER_PREVIOUS,new m(m.SHOW_SYMBOLS_OUT_ANIM),l.CONCURRENT,new m(c.SEND_SPIN_REQUEST,{spinId:n,stakeVO:u,test:o,updateStake:this.needUpdateStake()},{autoComplete:!0}))},s.nextSpinFlow=function(t,e){if(this.data.setNextSpinData(),"freeSpin"==this.data.currSpinData.action&&this.data.preSpinData.winSymbols&&0==this.data.preSpinData.winSymbols.length){if(this.data.preSpinData.freeGameCount!=this.data.getData().gameState.freeGameCount)for(var a=this.data.preSpinData.timesSymbols.slice(),n=0;n<a.length;n++){var i=a[n];i.lock&&1==i.lock&&dispatch(m.TIMES_LOCK_OUT,i.symbolPos)}this.data.getData().parser.isHaveLockSymbol=this.data.getData().parser.lockTimesSymbols.size>0,t.add(l.CONCURRENT,new m(m.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0}),new m(c.PLAY_SPIN_BTN_RELEASED_ANIM,null,{autoComplete:!0}))}t.add(l.AFTER_PREVIOUS,new m(m.CREATE_STOP_SPIN_FLOW,null,{autoComplete:!0}))},s.checkBalance=function(){var t={ratioIndex:d.ratioIndex,ratioValue:d.ratioValue,stakeIndex:d.stakeIndex,stakeValue:d.stakeValue},e=t.stakeValue,a=t.ratioValue,n=p.getData().winlineDefs.length,i=h.multiply(a,e,n);return f.getData().player.balance.amount-i>=0},s.needUpdateStake=function(){var t={stakeIndex:S.stakeIndex,ratioIndex:S.ratioIndex},e={stakeIndex:d.stakeIndex,ratioIndex:d.ratioIndex},a=o.diffObjects(t,e);return Object.keys(a).length>0},s.calculateAutoSpin=function(){if(u.active&&u.spinsRemaining>0){if(this.data.currentGameType===_.FREE_GAME)return;u.spinsRemaining--}},s.getAfterBettingBalance=function(){var t={ratioIndex:d.ratioIndex,ratioValue:d.ratioValue,stakeIndex:d.stakeIndex,stakeValue:d.stakeValue},e=t.stakeValue,a=t.ratioValue,n=p.getData().winlineDefs.length,i=h.multiply(a,e,n);return Log.e("stake::::::::",i),Log.e("balance::::::::::::",f.getData().player.balance.amount-i),f.getData().player.balance.amount-i},s.getAfterBuyFeatureBalance=function(){var t={ratioIndex:d.ratioIndex,ratioValue:d.ratioValue,stakeIndex:d.stakeIndex,stakeValue:d.stakeValue},e=t.stakeValue,a=t.ratioValue,n=p.getData().winlineDefs.length,i=this.data.getData().definition.buyFeature,o=h.multiply(a,e,n)*i[0].featureRate;return Log.e("featureStake::::::::",o),Log.e("balance::::::::::::",f.getData().player.balance.amount-o),f.getData().player.balance.amount-o},a(n,[{key:"data",get:function(){return App.dataCenter.get(A)}},{key:"slotData",get:function(){return App.dataCenter.get(r)}}]),n}(s).instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/CreateNewStopSpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,a,n,l,i,o,S,s,r,_,d;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy},function(e){l=e.FlowTrigger},function(e){i=e.SingletonExtends},function(e){o=e.SlotFrameworkEvent},function(e){S=e.default,s=e.EBTM},function(e){r=e.default},function(e){_=e.GameEvent},function(e){d=e.FlowIDs}],execute:function(){n._RF.push({},"4a9c9MYrNlMJ5WLUGil7VwC","CreateNewStopSpinFlowCmd",void 0);e("default",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.execute=function(){var e=this.createFlow();App.flowManager.registerFlow(e)},i.createFlow=function(){var e=new App.flowManager.Flow(d.STOP_SPIN_FLOW),t=this.data.preSpinData,a=this.data.getData().parser.newTimesSymbols,n=this.data.currSpinData,i=n.currentView,o=n.action,s=n.currentTimes;Log.e("currSpinData:::::::::",this.data.currSpinData),null==t.winSymbols&&(t.winSymbols=[]);var r=t.winSymbols.length;return this.data.isOpenEarlyFlag&&this.createEarlySpinFlow(),"freeSpin"==o&&(dispatch(_.UPDATE_FG_REMAINING),dispatch(_.UPDATE_FG_TOTAL_TIMES,{data:s})),a.length&&this.showCharacterFireFlow(e),0!==i&&r?this.newSymBolsInFlow(e):(this.data.getData().parser.isHaveLockSymbol&&dispatch(_.SHOW_TIMES_STAGE),i>0?(S.canQuickStop=!0,e.add(l.AFTER_PREVIOUS,new _(_.SHOW_SYMBOLS_OUT_ANIM))):S.canQuickStop=!0,this.allSymbolsInFlow(e)),this.ShowWinFlow(e),e},i.showCharacterFireFlow=function(e){e.add(l.CONCURRENT,new _(_.SHOW_CHARACTER_FIRE,null,{autoComplete:!0}))},i.allSymbolsInFlow=function(e){e.add(l.AFTER_PREVIOUS,new _(_.SHOW_SYMBOLS_IN_ANIM))},i.newSymBolsInFlow=function(e){var t=this.data.getData().parser.newTimesSymbols.length?.3:0;e.add(l.CONCURRENT,new _(_.SHOW_NEW_SYMBOLS_IN_ANIM,null,{delay:t}))},i.ShowWinFlow=function(e){var t=this.data.getData().gameState,a=t.winSymbols,n=t.totalWinnings,i=t.timesSymbols,r=t.timesUpgrade,d=void 0===r?[]:r,u=t.action,E=t.roundWinnings,w=t.splitList,T=t.maleTotemLevel,c=void 0===T?0:T,I=t.femaleTotemLevel,p=void 0===I?0:I,O=this.data.preSpinData,m=null==O?void 0:O.winSymbols.length,F="freeSpin"==u,A=F?E:n,R=this.data.getData().parser.newTimesSymbols.length?.8:.3,h=m&&!a.length&&i.length,N=F?E:n,g=this.data.setNewBigWinReach(N),L=S.getData().winAmountTime,M=.5;if((p>0||c>0)&&(M=0),a&&a.length){if(e.add(l.AFTER_PREVIOUS,new _(_.SHOW_WIN_CASH,null,{autoComplete:!0,delay:R}),new _(_.UPDATE_WIN_AMOUNT,{value:A},{autoComplete:!0}),new o(o.UPDATE_TOTAL_WINNINGS,{value:n,tweenTime:L},{autoComplete:!0}),new _(_.PLAY_BTM,{url:s.COUNTING},{autoComplete:!0}),new _(_.SHOW_SYMBOLS_WIN),new _(_.SHOW_FULL_COMBO),new _(_.REMOVE_SYMBOLS,null,{delay:M})),p>0&&(e.add(l.AFTER_PREVIOUS,new _(_.SHOW_WOMEN_LOCK_ANIM,p)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(l.AFTER_PREVIOUS,new _(_.SHOW_TIMES_LOCK,{}))),null!=w&&w.length>0){this.data.currSpinData.splitList.slice();e.add(l.AFTER_PREVIOUS,new _(_.SHOW_MEN_SPLIT_ANIM,w[0])),e.add(l.AFTER_PREVIOUS,new _(_.SHOW_SPLIT_FIRE_BALL,{})),e.add(l.AFTER_PREVIOUS,new _(_.SHOW_TIMES_A,{})),e.add(l.AFTER_PREVIOUS,new _(_.SPLIT_HIDE_DARK,null,{autoComplete:!0}))}else console.log("splitSymbols 未定义或为空");e.add(l.AFTER_PREVIOUS,new _(_.PLAY_CURRENT_VIEW_FALL_ANIM)),d&&d.length&&e.add(l.AFTER_PREVIOUS,new _(_.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))}h&&(g?e.add(l.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(l.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8}),new _(_.PLAY_BTM,{url:s.COUNTING},{autoComplete:!0}),new o(o.UPDATE_TOTAL_WINNINGS,{value:n,needComplete:!0,tweenTime:L}))),e.add(l.AFTER_PREVIOUS,new _(_.CREATE_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},i.createEarlySpinFlow=function(){var e={data:{spinId:this.data.getData().gameState.spinId,test:null}};dispatch(_.CREATE_EARLY_SPIN_FLOW,{data:e})},a(n,[{key:"data",get:function(){return App.dataCenter.get(r)}}]),n}(i).instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplayCloseSpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var n,t,a,l,o,i,r,s,u;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy},function(e){l=e.FlowTrigger},function(e){o=e.SingletonExtends},function(e){i=e.SlotFrameworkEvent},function(e){r=e.default},function(e){s=e.GameEvent},function(e){u=e.FlowIDs}],execute:function(){a._RF.push({},"e9a76CSiX5GWY3GBKUBZ63M","CreateReplayCloseSpinFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var o=a.prototype;return o.execute=function(){var e=this.createFlow();App.flowManager.registerFlow(e)},o.createFlow=function(){var e=new App.flowManager.Flow(u.REPLAY_CLOSE_SPIN_FLOW),n=this.data.getData().gameState,t=n.totalWinnings,a=n.isJp,o=n.noWinReward,r=this.data.setBigWinReach(t);if(a.length&&e.add(l.CONCURRENT,new s(s.SHOW_JP_WIN),l.AFTER_PREVIOUS,new s(s.SHOW_JP),l.AFTER_PREVIOUS,new i(i.SHOW_REPLAY_END,null,{delay:.3})),r&&!a.length){var E={winnings:t,isRoundWin:!1};null!=o&&o>0?e.add(l.AFTER_PREVIOUS,new s(s.SHOW_TREASURE_VIEW,null),new i(i.SHOW_REPLAY_END,null,{delay:.5})):e.add(l.AFTER_PREVIOUS,new s(s.SHOW_BIGWIN,E),l.AFTER_PREVIOUS,new i(i.SHOW_REPLAY_END,null,{delay:.3}))}return o&&o>0&&e.add(l.AFTER_PREVIOUS,new s(s.SHOW_TREASURE_VIEW,null)),r||a.length||e.add(l.AFTER_PREVIOUS,new i(i.SHOW_REPLAY_END,null,{delay:.5})),e},t(a,[{key:"data",get:function(){return App.dataCenter.get(r)}}]),a}(o).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplayFlow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./type2.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,n,a,o,l,i,u,s,r,d,E,_,S;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){o=e.FlowTrigger},function(e){l=e.SingletonExtends},function(e){i=e.default},function(e){u=e.SlotFrameworkEvent},function(e){s=e.ESpinStatus},function(e){r=e.default,d=e.EBTM},function(e){E=e.default},function(e){_=e.GameEvent},function(e){S=e.FlowIDs}],execute:function(){a._RF.push({},"9805dLZ1RFE74QEx9PF0q30","CreateReplayFlow",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var l=a.prototype;return l.execute=function(){var e=this.createFlow();App.flowManager.registerFlow(e)},l.createFlow=function(){var e=new App.flowManager.Flow(S.REPLAY_RESUME_FLOW);return dispatch(u.UPDATE_SPIN_STATUS,{data:s.SPINING}),Log.e("game type::::::::::::::",this.data.currentGameType),dispatch(_.UPDATE_GAME_TYPE,{data:this.data.currentGameType}),this.ShowWinFlow(e),e},l.ShowWinFlow=function(e){var t,n=this.data.getData().gameState,a=n.winSymbols,l=n.totalWinnings,i=n.timesSymbols,s=n.timesUpgrade,E=void 0===s?[]:s,S=n.action,T=n.roundWinnings,w=n.femaleTotemLevel,c=void 0===w?0:w,p=n.maleTotemLevel,m=void 0===p?0:p,A=null==(t=this.data.preData.gameState)?void 0:t.winSymbols.length,O="freeSpin"==S;dispatch(_.CHANGE_GAME_STYLE,{data:!O});var g=O?T:l,R=this.data.getData().parser.newTimesSymbols.length?.8:.3,I=A&&!a.length&&i.length,F=O?T:l,f=this.data.setBigWinReach(F),C=r.getData().winAmountTime,N=.5;(c>0||m>0)&&(N=0),e.add(o.CONCURRENT,new _("REPLAY_DELAY",null,{delay:.5,autoComplete:!0})),a&&a.length&&(e.add(o.AFTER_PREVIOUS,new _(_.SHOW_WIN_CASH,null,{autoComplete:!0,delay:R}),new _(_.PLAY_BTM,{url:d.COUNTING},{autoComplete:!0}),new _(_.UPDATE_WIN_AMOUNT,{value:g},{autoComplete:!0}),new u(u.UPDATE_TOTAL_WINNINGS,{value:l,tweenTime:C},{autoComplete:!0}),new _(_.SHOW_SYMBOLS_WIN),new _(_.SHOW_FULL_COMBO),new _(_.REMOVE_SYMBOLS,null,{delay:N})),c>0&&(e.add(o.AFTER_PREVIOUS,new _(_.SHOW_WOMEN_LOCK_ANIM,c)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_LOCK,{}))),e.add(o.AFTER_PREVIOUS,new _(_.PLAY_CURRENT_VIEW_FALL_ANIM)),E&&E.length&&e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))),I&&(f?e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(o.AFTER_PREVIOUS,new _(_.SHOW_TIMES_MOVING,null,{delay:.8}),new _(_.PLAY_BTM,{url:d.COUNTING},{autoComplete:!0}),new u(u.UPDATE_TOTAL_WINNINGS,{value:l,needComplete:!0,tweenTime:C}))),e.add(o.CONCURRENT,new _(_.CREATE_REPLAY_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},n(a,[{key:"data",get:function(){return App.dataCenter.get(E)}},{key:"slotData",get:function(){return App.dataCenter.get(i)}}]),a}(l).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplayQuickStopFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,n,a,l,o,i,S,_,u,E,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy},function(e){l=e.FlowTrigger},function(e){o=e.SingletonExtends},function(e){i=e.SlotFrameworkEvent},function(e){S=e.default,_=e.EBTM},function(e){u=e.default},function(e){E=e.GameEvent},function(e){s=e.FlowIDs}],execute:function(){a._RF.push({},"56e07hhX4RJ5bzs0r+E/8sP","CreateReplayQuickStopFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var o=a.prototype;return o.execute=function(){if(S.quickStopCount++,S.canQuickStop&&!S.isTurbo){S.quickStopCount++;var e=this.createFlow();App.flowManager.killFlow(s.REPLAY_STOP_SPIN_FLOW),App.flowManager.registerFlow(e),S.canQuickStop=!1,S.canQuickStopEarlySpin=!1}},o.createFlow=function(){var e=new App.flowManager.Flow(s.REPLAY_QUICK_STOP_FLOW),t=this.data.getData().parser.newTimesSymbols;return e.add(l.CONCURRENT,new E(E.START_QUICK_STOP)),t.length>0&&e.add(l.CONCURRENT,new E(E.SPEED_CHARACTER_FIRE_UP,null,{autoComplete:!0})),e.add(l.AFTER_PREVIOUS,new E(E.SHOW_SYMBOLS_QUICK_IN_ANIM)),this.ShowWinFlow(e),e},o.ShowWinFlow=function(e){var t,n=this.data.getData().gameState,a=n.winSymbols,o=n.totalWinnings,u=n.timesSymbols,s=n.timesUpgrade,d=void 0===s?[]:s,r=n.action,T=n.roundWinnings,w=n.splitList,O=n.femaleTotemLevel,R=void 0===O?0:O,I=n.maleTotemLevel,p=void 0===I?0:I,c=null==(t=this.data.preData.gameState)?void 0:t.winSymbols.length,A="freeSpin"==r,m=A?T:o,C=this.data.getData().parser.newTimesSymbols.length?.8:.3,F=c&&!a.length&&u.length,P=A?T:o,g=this.data.setBigWinReach(P),L=S.getData().winAmountTime,N=.5;(R>0||p>0)&&(N=0),a&&a.length&&(e.add(l.AFTER_PREVIOUS,new E(E.SHOW_WIN_CASH,null,{autoComplete:!0,delay:C}),new E(E.UPDATE_WIN_AMOUNT,{value:m},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:o,tweenTime:L},{autoComplete:!0}),new E(E.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new E(E.SHOW_SYMBOLS_WIN),new E(E.SHOW_FULL_COMBO),new E(E.REMOVE_SYMBOLS,null,{delay:N})),R>0&&(e.add(l.AFTER_PREVIOUS,new E(E.SHOW_WOMEN_LOCK_ANIM,R)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(l.AFTER_PREVIOUS,new E(E.SHOW_TIMES_LOCK,{}))),null!=w&&w.length>0?(e.add(l.AFTER_PREVIOUS,new E(E.SHOW_MEN_SPLIT_ANIM,w[0])),e.add(l.AFTER_PREVIOUS,new E(E.SHOW_SPLIT_FIRE_BALL,{})),e.add(l.AFTER_PREVIOUS,new E(E.SHOW_TIMES_A,{})),e.add(l.AFTER_PREVIOUS,new E(E.SPLIT_HIDE_DARK,null,{autoComplete:!0}))):console.log("splitSymbols 未定义或为空"),e.add(l.AFTER_PREVIOUS,new E(E.PLAY_CURRENT_VIEW_FALL_ANIM)),d&&d.length&&e.add(l.AFTER_PREVIOUS,new E(E.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))),F&&(g?e.add(l.AFTER_PREVIOUS,new E(E.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(l.AFTER_PREVIOUS,new E(E.SHOW_TIMES_MOVING,null,{delay:.8}),new E(E.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:o,needComplete:!0,tweenTime:L}))),e.add(l.AFTER_PREVIOUS,new E(E.CREATE_REPLAY_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},n(a,[{key:"data",get:function(){return App.dataCenter.get(u)}}]),a}(o).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplaySpinCompleteFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameSymbolID.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var n,t,a,l,o,i,u,_,T,w,s,E;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy},function(e){l=e.FlowTrigger},function(e){o=e.SingletonExtends},function(e){i=e.SlotFrameworkEvent},function(e){u=e.default,_=e.EBTM},function(e){T=e.default},function(e){w=e.EBackendSymbolID},function(e){s=e.GameEvent},function(e){E=e.FlowIDs}],execute:function(){a._RF.push({},"57330YYsfRILrJ0/s8Fp42d","CreateReplaySpinCompleteFlowCmd",void 0);e("default",function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var o=a.prototype;return o.execute=function(){this.createFlow()},o.createFlow=function(){var e=this.data.getData().gameState,n=e.currentView,t=e.totalViews,a=e.startFreeGame,l=e.action,o=n+1===t,i=o&&"freeSpin"==l;a?this.showFreeGameIntroFlow():o?i?this.freeGameFinishFlow():this.closeSpinFlow():this.nextSpinFlow()},o.showFreeGameIntroFlow=function(){var e=new App.flowManager.Flow(E.REPLAY_SHOW_FG_INTRO_FLOW),n=this.data.getData().gameState,t=n.totalWinnings,a=n.isGoldenFg,o=this.data.setBigWinReach(t),T=u.getData().winAmountTime;if(o){var w={winnings:t,isRoundWin:!0};e.add(l.CONCURRENT,new s(s.SHOW_SCATTER_WIN,null,{delay:.3}),l.AFTER_PREVIOUS,new s(s.SHOW_BIGWIN,w,{delay:1}),new s(s.HIDE_DARK,null,{autoComplete:!0}),new s(s.SHOW_FG_INTRO_ALERT,null,{autoComplete:!0,delay:1}))}else a?e.add(l.CONCURRENT,new s(s.SHOW_SCATTER_WIN,null,{delay:.3}),l.AFTER_PREVIOUS,new s(s.UPDATE_WIN_AMOUNT,{value:t},{autoComplete:!0}),new s(s.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:t,needComplete:!0,tweenTime:T}),new s(s.HIDE_DARK,null,{autoComplete:!0}),new s(s.SHOW_FG_INTRO_ALERT,null,{autoComplete:!0})):e.add(l.CONCURRENT,new s(s.SHOW_SCATTER_WIN,null,{delay:.3}),l.AFTER_PREVIOUS,new s(s.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new s(s.UPDATE_WIN_AMOUNT,{value:t},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:t,needComplete:!0,tweenTime:T},{autoComplete:!0}),new s(s.HIDE_DARK,null,{autoComplete:!0}),new s(s.SHOW_FG_INTRO_ALERT,null,{autoComplete:!0}));App.flowManager.registerFlow(e)},o.nextSpinFlow=function(){var e=new App.flowManager.Flow(E.REPLAY_NEXT_SPIN_FLOW),n=this.data.getData().parser,t=n.newTimesSymbols,a=n.view1D,o=this.data.getData().gameState,_=o.winSymbols,T=o.roundWinnings,R=o.action,A=o.currentView,N=u.getData(),r=N.hasTimesSymbolsDelay,S=N.nextSpinDelay,d=t.length?r:S;if(null==_&&(_=[]),_.length)e.add(l.CONCURRENT,new i(i.REPLAY_NEXT_SPIN));else if("freeSpin"==R){if(this.data.setBigWinReach(T)){var C={winnings:T,isRoundWin:!0};e.add(l.CONCURRENT,new i(s.SHOW_BIGWIN,C,{delay:.5}))}a.filter((function(e){return e==w.SCATTER||e==w.GOLD_SCATTER})).length>=3&&e.add(l.CONCURRENT,new s(s.SHOW_SCATTER_WIN,null,{delay:.8}),l.AFTER_PREVIOUS,new s(s.INCREASE_FG_REMAINING),l.AFTER_PREVIOUS,new s(s.HIDE_DARK,null,{autoComplete:!0})),e.add(l.AFTER_PREVIOUS,new s(s.CREATE_REPLAY_SPIN_FLOW,null,{autoComplete:!0,delay:d}))}_.length||0!==A||e.add(l.CONCURRENT,new i(i.REPLAY_NEXT_SPIN)),App.flowManager.registerFlow(e)},o.freeGameFinishFlow=function(){var e=new App.flowManager.Flow(E.REPLAY_SHOW_FG_SUMMARY_FLOW),n=this.data.getData().gameState,t=n.totalWinnings,a=n.roundWinnings,o=this.data.setBigWinReach(a),T=this.data.setBigWinReach(t),w=u.getData().winAmountTime;if(o){var R={winnings:a,isRoundWin:!0};e.add(l.CONCURRENT,new s(s.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0,delay:2.5}),new i(i.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:w},{autoComplete:!0}),new s(s.SHOW_BIGWIN,R))}if(T){var A={winnings:t,isRoundWin:!1,isFgOut:!0};e.add(l.AFTER_PREVIOUS,new s(s.SHOW_FG_SUMMARY_ALERT,null,{delay:1}),new s(s.TIMES_LOCK_ALLOUT,null,{autoComplete:!0}),new s(s.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0,delay:1.8}),new i(i.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:w},{autoComplete:!0}),new s(s.SHOW_BIGWIN,A),new i(i.SHOW_REPLAY_END,null,{delay:.3}))}else e.add(l.AFTER_PREVIOUS,new s(s.SHOW_FG_SUMMARY_ALERT,null,{delay:1}),new s(s.TIMES_LOCK_ALLOUT,null,{autoComplete:!0}),new s(s.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:0,tweenTime:w},{autoComplete:!0}),new s(s.UPDATE_WIN_AMOUNT,{value:t},{autoComplete:!0,delay:1.8}),new s(s.PLAY_BTM,{url:_.COUNTING},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:t,needComplete:!0,tweenTime:w}),new i(i.SHOW_REPLAY_END,null,{delay:.3}));App.flowManager.registerFlow(e)},o.closeSpinFlow=function(){dispatch(s.CREATE_REPLAY_CLOSE_SPIN_FLOW)},t(a,[{key:"data",get:function(){return App.dataCenter.get(T)}}]),a}(o).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplaySpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./AutoPlayModel.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./GameData.ts","./GameEvent.ts","./types.ts","./FlowIDs.ts"],(function(t){"use strict";var e,n,o,a,i,r,u,s,l,c,p,f;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy},function(t){a=t.FlowTrigger},function(t){i=t.SingletonExtends},function(t){r=t.default},function(t){u=t.default},function(t){s=t.SlotFrameworkEvent},function(t){l=t.default},function(t){c=t.GameEvent},function(t){p=t.EGameType},function(t){f=t.FlowIDs}],execute:function(){o._RF.push({},"fc1d3HHsS5NCZoLEcIy7sDw","CreateReplaySpinFlowCmd",void 0);t("default",function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var i=o.prototype;return i.execute=function(t){var e=this.createSpinFlow(t);App.flowManager.registerFlow(e)},i.createSpinFlow=function(t){var e=new App.flowManager.Flow(f.REPLAY_SPIN_FLOW);return this.firstSpinFlow(e,t),e},i.firstSpinFlow=function(t,e){this.calculateAutoSpin(),t.add(a.CONCURRENT,new c(c.UPDATE_WIN_AMOUNT,{value:0},{autoComplete:!0})),t.add(a.CONCURRENT,new s(s.REPLAY_NEXT_SPIN))},i.calculateAutoSpin=function(){if(r.active&&r.spinsRemaining>0){if(this.data.currentGameType===p.FREE_GAME)return;r.spinsRemaining--}},n(o,[{key:"data",get:function(){return App.dataCenter.get(l)}},{key:"slotData",get:function(){return App.dataCenter.get(u)}}]),o}(i).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/CreateReplayStopSpinFlowCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./SlotFrameworkEvent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./FlowIDs.ts"],(function(e){"use strict";var t,a,n,l,o,i,S,s,_,r,d;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy},function(e){l=e.FlowTrigger},function(e){o=e.SingletonExtends},function(e){i=e.SlotFrameworkEvent},function(e){S=e.default,s=e.EBTM},function(e){_=e.default},function(e){r=e.GameEvent},function(e){d=e.FlowIDs}],execute:function(){n._RF.push({},"33bc1aT7X5DL4Rwi+S7PC6B","CreateReplayStopSpinFlowCmd",void 0);e("default",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.execute=function(){var e=this.createFlow();App.flowManager.registerFlow(e)},o.createFlow=function(){var e,t=new App.flowManager.Flow(d.REPLAY_STOP_SPIN_FLOW),a=this.data.preData,n=this.data.getData().parser.newTimesSymbols,o=this.data.getData().gameState,s=o.currentView,_=o.action,m=o.currentTimes;null==a.gameState.winSymbols&&(a.gameState.winSymbols=[]);var u=null==(e=a.gameState)?void 0:e.winSymbols.length;if("freeSpin"==_){if(dispatch(r.UPDATE_FG_REMAINING),dispatch(r.UPDATE_FG_TOTAL_TIMES,{data:m}),"freeSpin"==this.data.getData().gameState.action&&this.data.preData.gameState.winSymbols&&0==this.data.preData.gameState.winSymbols.length){if(this.data.preData.gameState.freeGameCount!=this.data.getData().gameState.freeGameCount)for(var E=this.data.preData.gameState.timesSymbols.slice(),w=0;w<E.length;w++){var T=E[w];1==T.lock&&dispatch(r.TIMES_LOCK_OUT,T.symbolPos)}this.data.getData().parser.isHaveLockSymbol=this.data.getData().parser.lockTimesSymbols.size>0}t.add(l.CONCURRENT,new r(i.PLAY_SPIN_BTN_RELEASED_ANIM,null,{autoComplete:!0}))}return Log.e("newTimesSymbol :::::::::::",n),n.length&&this.showCharacterFireFlow(t),0!==s&&u?this.newSymBolsInFlow(t):(this.data.getData().parser.isHaveLockSymbol&&dispatch(r.SHOW_TIMES_STAGE),S.canQuickStop=!0,this.allSymbolsInFlow(t)),this.ShowWinFlow(t),t},o.showCharacterFireFlow=function(e){e.add(l.CONCURRENT,new r(r.SHOW_CHARACTER_FIRE,null,{autoComplete:!0}))},o.allSymbolsInFlow=function(e){e.add(l.CONCURRENT,new r(r.SHOW_SYMBOLS_OUT_ANIM),l.AFTER_PREVIOUS,new r(r.SHOW_SYMBOLS_IN_ANIM))},o.newSymBolsInFlow=function(e){var t=this.data.getData().parser.newTimesSymbols.length?.3:0;e.add(l.CONCURRENT,new r(r.SHOW_NEW_SYMBOLS_IN_ANIM,null,{delay:t}))},o.ShowWinFlow=function(e){var t,a=this.data.getData().gameState,n=a.winSymbols,o=a.totalWinnings,_=a.timesSymbols,d=a.timesUpgrade,m=void 0===d?[]:d,u=a.action,E=a.roundWinnings,w=a.splitList,T=a.femaleTotemLevel,O=void 0===T?0:T,I=a.maleTotemLevel,p=void 0===I?0:I,c=null==(t=this.data.preData.gameState)?void 0:t.winSymbols.length,g="freeSpin"==u,R=g?E:o,h=this.data.getData().parser.newTimesSymbols.length?.8:.3,A=c&&!n.length&&_.length,C=g?E:o,N=this.data.setBigWinReach(C),F=S.getData().winAmountTime,L=.5;(O>0||p>0)&&(L=0),n&&n.length&&(e.add(l.AFTER_PREVIOUS,new r(r.SHOW_WIN_CASH,null,{autoComplete:!0,delay:h}),new r(r.PLAY_BTM,{url:s.COUNTING},{autoComplete:!0}),new r(r.UPDATE_WIN_AMOUNT,{value:R},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:o,tweenTime:F},{autoComplete:!0}),new r(r.SHOW_SYMBOLS_WIN),new r(r.SHOW_FULL_COMBO),new r(r.REMOVE_SYMBOLS,null,{delay:L})),O>0&&(e.add(l.AFTER_PREVIOUS,new r(r.SHOW_WOMEN_LOCK_ANIM,O)),this.data.getData().parser.lockTimesSymbols.size>0&&e.add(l.AFTER_PREVIOUS,new r(r.SHOW_TIMES_LOCK,{}))),null!=w&&w.length>0?(e.add(l.AFTER_PREVIOUS,new r(r.SHOW_MEN_SPLIT_ANIM,w[0])),e.add(l.AFTER_PREVIOUS,new r(r.SHOW_SPLIT_FIRE_BALL,{})),e.add(l.AFTER_PREVIOUS,new r(r.SHOW_TIMES_A,{})),e.add(l.AFTER_PREVIOUS,new r(r.SPLIT_HIDE_DARK,null,{autoComplete:!0}))):console.log("splitSymbols 未定义或为空"),e.add(l.AFTER_PREVIOUS,new r(r.PLAY_CURRENT_VIEW_FALL_ANIM)),m&&m.length&&e.add(l.AFTER_PREVIOUS,new r(r.SHOW_TIMES_SYMBOLS_UPGRADE,null,{autoComplete:!0}))),A&&(N?e.add(l.AFTER_PREVIOUS,new r(r.SHOW_TIMES_MOVING,null,{delay:.8})):e.add(l.AFTER_PREVIOUS,new r(r.SHOW_TIMES_MOVING,null,{delay:.8}),new r(r.PLAY_BTM,{url:s.COUNTING},{autoComplete:!0}),new i(i.UPDATE_TOTAL_WINNINGS,{value:o,needComplete:!0,tweenTime:F},{autoComplete:!0}))),e.add(l.CONCURRENT,new r(r.CREATE_REPLAY_SPIN_COMPLETE_FLOW,null,{autoComplete:!0}))},a(n,[{key:"data",get:function(){return App.dataCenter.get(_)}}]),n}(o).instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/CurrentTimesView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameData.ts","./GameEvent.ts","./GameConfigModel.ts","./UrlUtils.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,l,u,m,c,p,f,d,h,T,v,g,A,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose,r=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.sp,m=t.v3,c=t.tween,p=t.Vec3,f=t.Node,d=t.Label},function(t){h=t.default},function(t){T=t.inject},function(t){v=t.default},function(t){g=t.GameEvent},function(t){A=t.EBTM},function(t){w=t.default}],execute:function(){var b,y,_,E,N,G,L,C,D,F,S;s._RF.push({},"85842Rv+bVCBLxjG4vaKsg0","CurrentTimesView",void 0);var x=l.ccclass;l.property,t("CurrentTimesView",(b=x("CurrentTimesView"),y=T("timesNode",f),_=T("timesNode/timesAnimation",u.Skeleton),E=T("timesNode/totalTimes",d),N=T("timesNode/upgradeAnimation",u.Skeleton),b((C=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"timesNode",C,a(e)),n(e,"timesAnimation",D,a(e)),n(e,"totalTimes",F,a(e)),n(e,"upgradeAnimation",S,a(e)),e.lv=0,e.breatheTween=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.start=function(){this.init()},s.onDestroy=function(){t.prototype.onDestroy.call(this)},s.init=function(){},s.setFgElements=function(t){var e,i=this.data.getData().gameState.currentTimes;if(this.timesNode.active=!t,this.timesAnimation.setAnimation(0,"loop_0",!0),this.lv=0,null==(e=this.breatheTween)||e.stop(),!t){var n=i<=0?0:i;this.updateFGTotalTimes(n)}},s.updateFGTotalTimes=function(t){var e=this,i=[{aniName:"loop_0",lv:0,maxTimes:8},{aniName:"loop_1",lv:1,maxTimes:25},{aniName:"loop_2",lv:2,maxTimes:80}],n=i[i.length-1],a="loop_0",r=0;if(t>=n.maxTimes)a=n.aniName,r=n.lv;else for(var s,l=o(i);!(s=l()).done;){var u=s.value;if(t<=u.maxTimes){a=u.aniName,r=u.lv;break}}if(r>this.lv&&(this.upgradeAnimation.node.active=!0,this.upgradeAnimation.setAnimation(0,"lvUp",!1),this.upgradeAnimation.setCompleteListener((function(){e.upgradeAnimation.node.active=!1})),dispatch(g.PLAY_BTM,{data:{url:A.TOTAL_TIMES_UPGRADE}}),this.timesAnimation.setAnimation(0,a,!0),this.playBreatheTween(this.totalTimes.node,1+.1*r)),this.totalTimes.string=t+"x","portrait"==w.getViewModeParam())if(t.toString().length>3){var c=10*(t.toString().length-3);this.totalTimes.node.setPosition(m(-c,8,0))}else this.totalTimes.node.setPosition(m(0,8,0));this.lv=r},s.playBreatheTween=function(t,e){var i;null==(i=this.breatheTween)||i.stop(),this.breatheTween=c(t).repeatForever(c().set({scale:new p(1,1,1)}).to(.6,{scale:new p(e,e,e)}).to(.6,{scale:new p(1,1,1)})).start()},s.reset=function(){},s.setData=function(t){},s.show=function(){this.node.active=!0},s.hide=function(){this.node.active=!1},s.addEvents=function(){var t=this;this.on(g.CHANGE_GAME_STYLE,(function(e){t.setFgElements(e.data)})),this.on(g.UPDATE_FG_TOTAL_TIMES,(function(e){t.updateFGTotalTimes(e.data)}))},r(e,[{key:"data",get:function(){return App.dataCenter.get(v)}}]),e}(h)).prototype,"timesNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(L.prototype,"timesAnimation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(L.prototype,"totalTimes",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(L.prototype,"upgradeAnimation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=L))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/EffectsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./GameSymbolID.ts"],(function(t){"use strict";var e,a,i,o,n,s,l,c,r,d,f,u,h;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){i=t.cclegacy,o=t._decorator,n=t.instantiate,s=t.sp,l=t.tween},function(t){c=t.default},function(t){r=t.default,d=t.EBTM},function(t){f=t.default},function(t){u=t.GameEvent},function(t){h=t.EBackendSymbolID}],execute:function(){var p;i._RF.push({},"c69a8p1wNZAY6AN+qmtbYUP","EffectsView",void 0);var m=o.ccclass;o.property,t("EffectsView",m("EffectsView")(p=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var o=i.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.start=function(){this.init()},o.onDestroy=function(){t.prototype.onDestroy.call(this)},o.init=function(){},o.showFireBall=function(t,e){void 0===e&&(e=!1);var a=r.getData().filePaths.fireBallPrefab,i=App.cache.get(this.data.module,a).data,o=this.data.getData().symbolPosConfig,l=this.data.getData().parser.newTimesSymbols,c=r.getData().reelConfig.fireBallSpeed,f=n(i),p=f.getComponent(s.Skeleton);if(l.length){var m=l.find((function(e){return e.symbolPos==t})),g=m.isRare?"fireball_purple":"fireball_blue",_=m.times>=100,v=_?d.FIREBALL_HIT_100X:d.FIREBALL_HIT,T=_?3:1,S=m.symbol==h.T1;this.node.addChild(f),f.position=o.get(t);var E=r.isTurbo;g=E?g+"_turbo":g,g=e?g+"_stop":g;var M=c;E&&_&&(M=1.4*c),p.timeScale=M,p.setAnimation(0,g,!1),p.setCompleteListener((function(){f.destroy()})),S&&dispatch(u.SHAKE_NODE,{data:T}),this.scheduleOnce((function(){dispatch(u.PLAY_BTM,{data:{url:v}})}),.3)}},o.showSplitFireBall=function(t){var e=r.getData().filePaths.fireBallPrefab,a=App.cache.get(this.data.module,e).data,i=this.data.getData().symbolPosConfig,o=r.getData().reelConfig.fireBallSpeed,l=n(a),c=l.getComponent(s.Skeleton),f="fireball_purple",h=d.FIREBALL_HIT_100X;this.node.addChild(l),l.position=i.get(t);var p=r.isTurbo;f=p?f+"_turbo":f;var m=o;p&&(m=1.4*o),c.timeScale=m,c.setAnimation(0,f,!1),c.setCompleteListener((function(){l.destroy()})),this.scheduleOnce((function(){dispatch(u.PLAY_BTM,{data:{url:h}})}),.3)},o.showTimesMoving=function(t){var e=this,a=this.data.getData(),i=a.symbolPosConfig,o=a.winBoardPosition,s=a.currentTimesPosition,c=this.data.getData().gameState,f=c.timesSymbols,h=c.currentTimes,p=r.getData().reelConfig.totalTimesFireBallTime;if(h>0){var m=r.getData().filePaths.timesMovingPrefab,g=App.cache.get(this.data.module,m).data,_=n(g);this.node.addChild(_),_.position=s,_.active=!1,l(_).to(p,{position:o},{onStart:function(){_.active=!0},onComplete:function(){dispatch(u.EXPAND_WIN_AMOUNT),dispatch(u.UPDATE_TIMES,{data:h}),_.destroy()}}).start(),dispatch(u.PLAY_BTM,{data:{url:d.TIMES_MOVING}})}for(var v=function(a){var s=f[a].symbolPos,c=r.getData().filePaths,m=c.blueTimesMovingPrefab,g=c.purpleTimesMovingPrefab,_=f[a].isRare?g:m,v=App.cache.get(e.data.module,_).data,T=n(v),S=h>0?.37*(a+1):.37*a;e.node.addChild(T),T.position=i.get(s),T.active=!1,l(T).delay(S).to(p,{position:o},{onStart:function(){T.active=!0,dispatch(u.HIDE_TIMES_LABEL,{data:s}),dispatch(u.PLAY_TIMES_SYMBOL_FUNCTION,{data:s}),dispatch(u.PLAY_BTM,{data:{url:d.TIMES_MOVING}})},onComplete:function(){var e=f[a].times;0!=a||h>0||dispatch(u.EXPAND_WIN_AMOUNT),a==f.length-1&&dispatch(u.MERGE_WIN_AMOUNT,{data:t}),dispatch(u.UPDATE_TIMES,{data:e}),T.destroy()}}).start()},T=0;T<f.length;T++)v(T)},o.showCloneTimesMoving=function(t,e,a){for(var i=this,o=0,s=function(){var s=r.getData().filePaths.splitBlueTimesMovingPrefab,d=App.cache.get(i.data.module,s).data,f=n(d),u=r.getData().reelConfig.totalTimesFireBallTime,h=i.data.getData().gameState,p=(h.timesSymbols,h.currentTimes,i.data.getData().symbolPosConfig);i.node.addChild(f),f.position=p.get(t),f.active=!1,l(f).to(u,{position:p.get(e[c])},{onStart:function(){f.active=!0},onComplete:function(){o++,l(i).delay(.5).call((function(){o==e.length&&a()})).start(),f.active=!1,f.destroy()}}).start()},c=0;c<e.length;c++)s()},o.reset=function(){},o.setData=function(t){},o.show=function(){this.node.active=!0},o.hide=function(){this.node.active=!1},o.addEvents=function(){var t=this;this.on(u.SHOW_FIRE_BALL,(function(e){t.showFireBall(e.data)})),this.on(u.SHOW_FIRE_BALL_QUICK_STOP,(function(e){t.showFireBall(e.data,!0)})),this.on(u.SHOW_TIMES_MOVING,(function(e){t.showTimesMoving(e.complete)})),this.on(u.SHOW_CLONE_TIMES_MOVING,(function(){var e=t.data.getData().gameState.splitList.slice();e.forEach((function(a,i){t.showCloneTimesMoving(a.from,a.to,(function(){e.length}))}))})),this.on(u.SHOW_SPLIT_FIRE_BALL,(function(e){var a=t.data.getData().gameState.splitList.slice();l(t).call((function(){t.showSplitFireBall(a[0].from),dispatch(u.SHAKE_NODE,{data:1})})).call((function(){e.complete()})).start()}))},a(i,[{key:"data",get:function(){return App.dataCenter.get(f)}}]),i}(c))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/FlowIDs.ts",["cc"],(function(_){"use strict";var O;return{setters:[function(_){O=_.cclegacy}],execute:function(){var L;_("FlowIDs",void 0),O._RF.push({},"7aee7LJWGhHGZsxmzi73BbH","FlowIDs",void 0),function(_){_.UNKNOWN="UNKNOWN",_.SPIN_FLOW="SPIN_FLOW",_.STOP_SPIN_FLOW="STOP_SPIN_FLOW",_.CLOSE_SPIN_FLOW="CLOSE_SPIN_FLOW",_.SPIN_CLOSED_FLOW="SPIN_CLOSED_FLOW",_.RESUME_FLOW="RESUME_FLOW",_.QUICK_STOP_FLOW="QUICK_STOP_FLOW",_.EARLY_SPIN_FLOW="EARLY_SPIN_FLOW",_.NEXT_SPIN_FLOW="NEXT_SPIN_FLOW",_.SHOW_FG_INTRO_FLOW="SHOW_FG_INTRO_FLOW",_.SHOW_FG_SUMMARY_FLOW="SHOW_FG_SUMMARY_FLOW",_.EMPTY_SPIN_FLOW="EMPTY_SPIN_FLOW",_.QUICK_STOP_EMPTY_FLOW="QUICK_STOP_EMPTY_FLOW",_.REPLAY_SPIN_FLOW="REPLAY_SPIN_FLOW",_.REPLAY_STOP_SPIN_FLOW=" REPLAY_STOP_SPIN_FLOW",_.REPLAY_CLOSE_SPIN_FLOW="REPLAY_CLOSE_SPIN_FLOW",_.REPLAY_RESUME_FLOW="REPLAY_RESUME_FLOW",_.REPLAY_QUICK_STOP_FLOW="REPLAY_QUICK_STOP_FLOW",_.REPLAY_NEXT_SPIN_FLOW="REPLAY_NEXT_SPIN_FLOW",_.REPLAY_SHOW_FG_INTRO_FLOW="REPLAY_SHOW_FG_INTRO_FLOW",_.REPLAY_SHOW_FG_SUMMARY_FLOW="REPLAY_SHOW_FG_SUMMARY_FLOW"}(L||(L=_("FlowIDs",{}))),O._RF.pop()}}}));

System.register("chunks:///_virtual/FreeGameAlertView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./MisaButton.ts","./CmmSlotUtils.ts","./LoadUtils.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./types.ts","./AutoPlayModel.ts","./ReplayModel.ts","./UrlUtils.ts","./SlotFrameworkEvent.ts"],(function(t){"use strict";var e,i,a,n,s,o,r,l,c,u,f,h,p,d,E,_,g,m,G,S,A,F,b,T,M,B,D,N,I,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,r=t._decorator,l=t.sp,c=t.tween,u=t.Vec3,f=t.NodeEventType,h=t.KeyCode,p=t.Node,d=t.Sprite,E=t.Label},function(t){_=t.default},function(t){g=t.inject},function(t){m=t.default},function(t){G=t.CmmSlotUtils},function(t){S=t.LoadUtils},function(t){A=t.default,F=t.EBTM,b=t.EBGM},function(t){T=t.default},function(t){M=t.GameEvent},function(t){B=t.EGameType},function(t){D=t.default},function(t){N=t.default},function(t){I=t.default},function(t){R=t.SlotFrameworkEvent}],execute:function(){var C,y,L,O,w,v,P,H,U,k,z,V,W,Y,K,j,x;o._RF.push({},"712f8jQeR9Au6MJMUW95ZtA","FreeGameAlertView",void 0);var J,Q=r.ccclass;r.property;!function(t){t[t.NONE=0]="NONE",t[t.START_FREE_GAME=1]="START_FREE_GAME",t[t.START_FREE_GAME_END=2]="START_FREE_GAME_END",t[t.FINISH_FREE_GAME=3]="FINISH_FREE_GAME",t[t.FINISH_FREE_GAME_END=4]="FINISH_FREE_GAME_END"}(J||(J={}));t("FreeGameAlertView",(C=Q("FreeGameAlertView"),y=g("alert",p),L=g("alert/bbr",p),O=g("alert/effectBg",l.Skeleton),w=g("alert/fgFontSprite",d),v=g("alert/fgTimes",E),P=g("alert/startBtn",p),H=g("alert/finishBtn",p),C((z=e((k=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,a(e,"alert",z,n(e)),a(e,"bbr",V,n(e)),a(e,"effectBg",W,n(e)),a(e,"fgFontSprite",Y,n(e)),a(e,"fgTimes",K,n(e)),a(e,"startBtn",j,n(e)),a(e,"finishBtn",x,n(e)),e.finishFGCallback=null,e.freeGameAlertStatus=J.NONE,e}i(e,t);var o=e.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.start=function(){this.init()},o.onDestroy=function(){t.prototype.onDestroy.call(this)},e.getPrefabUrl=function(){return"prefabs/"+I.getViewModeParam()+"/FGAlertView"},o.init=function(){this.enabledKeyDown=!0,this.setStartCloseBtnLocalize()},o.goToFreeGame=function(){var t=this,e=null;if(dispatch(R.HIDE_SPIN_BAR),this.data.getData().newGameState&&this.data.getData().newGameState.length&&this.data.getData().newGameState.length>0){e=this.data.getData().spinId;dispatch(M.SHOW_TRANSITION_IN,{data:function(){t.data.currentGameType=B.FREE_GAME,dispatch(M.CHANGE_GAME_STYLE,{data:!1}),dispatch(M.PLAY_BGM,{data:t.data.getData().gameState.isGoldenFg?b.GOLDFREEGAME:b.FREEGAME}),N.isReplay?t.scheduleOnce((function(){dispatch(M.CREATE_REPLAY_SPIN_FLOW,{data:{spinId:e,test:null}})}),1):t.scheduleOnce((function(){dispatch(M.CREATE_SPIN_FLOW,{data:{spinId:e,next:!0,test:null}})}),1)}})}else{e=this.data.getData().gameState.spinId;dispatch(M.SHOW_TRANSITION_IN,{data:function(){t.data.currentGameType=B.FREE_GAME,dispatch(M.CHANGE_GAME_STYLE,{data:!1}),dispatch(M.PLAY_BGM,{data:t.data.getData().gameState.isGoldenFg?b.GOLDFREEGAME:b.FREEGAME}),N.isReplay?t.scheduleOnce((function(){dispatch(M.CREATE_REPLAY_SPIN_FLOW,{data:{spinId:e,test:null}})}),1):t.scheduleOnce((function(){dispatch(M.CREATE_SPIN_FLOW,{data:{spinId:e,test:null}})}),1)}})}},o.goToMainGame=function(){var t=this;dispatch(M.SHOW_TRANSITION_OUT,{data:function(){t.data.currentGameType=B.MAIN_GAME,dispatch(M.CHANGE_GAME_STYLE,{data:!0}),dispatch(M.PLAY_BGM,{data:b.MAINGAME}),dispatch(R.SHOW_SPIN_BAR)}})},o.startFreeGame=function(){this.startBtn.active=!1,this.alert.active=!1,this.goToFreeGame(),this.data.originTurbo=A.isTurbo,A.setIsTurbo(!1,!1),this.unschedule(this.startFreeGame),this.bbr.targetOff(this),this.close()},o.finishFreeGame=function(){this.finishBtn.active=!1,this.alert.active=!1,A.stopOnFg&&(D.active=!1),this.goToMainGame(),A.setIsTurbo(this.data.originTurbo?this.data.originTurbo:A.isTurbo,!1),this.unschedule(this.finishFreeGame),this.bbr.targetOff(this),this.close()},o.playBounceTween=function(t,e){c(t).delay(.2).to(.1,{scale:new u(.9,.9,.9)}).to(.2,{scale:new u(.6,.6,.6)},{onComplete:function(){e&&e()}}).start()},o.setStartCloseBtnLocalize=function(){var t=A.getData().filePaths.localeSpriteFrame;this.startBtn.getComponent(m).customNormalSprite=S.getDirSp(this.bundle,t,"t_font_01_normal"),this.startBtn.getComponent(m).customPressedSprite=S.getDirSp(this.bundle,t,"t_font_01_pressed"),this.startBtn.getComponent(m).customHoverSprite=S.getDirSp(this.bundle,t,"t_font_01_pressed"),this.startBtn.getComponent(m).customDisabledSprite=S.getDirSp(this.bundle,t,"t_font_01_disabled"),this.finishBtn.getComponent(m).customNormalSprite=S.getDirSp(this.bundle,t,"t_font_02_normal"),this.finishBtn.getComponent(m).customPressedSprite=S.getDirSp(this.bundle,t,"t_font_02_pressed"),this.finishBtn.getComponent(m).customHoverSprite=S.getDirSp(this.bundle,t,"t_font_02_pressed"),this.finishBtn.getComponent(m).customDisabledSprite=S.getDirSp(this.bundle,t,"t_font_02_disabled")},o.showIntroAlert=function(){var t=this,e=this.data.getData().gameState,i=A.getData().autoCloseTime;dispatch(M.MUSIC_VOLUME_MULTIPLE,{data:.5}),this.alert.active=!0,this.finishBtn.active=!1,this.fgTimes.string=e.freeGameCount.toString(),this.fgTimes.node.position.set(0,225,0),this.fgFontSprite.spriteFrame=e.isGoldenFg?this.data.getLocaleSpriteFrame("t_font_03_1"):this.data.getLocaleSpriteFrame("t_font_03"),"portrait"==I.getViewModeParam()&&e.isGoldenFg&&this.fgTimes.node.position.set(0,240,0),this.fgFontSprite.node.position.set(0,22,0),this.playBounceTween(this.fgFontSprite.node),this.effectBg.skeletonData=this.data.getGameAlertSpine("f_spins_bg"),this.effectBg.setAnimation(0,"in",!1),this.effectBg.setCompleteListener((function(){dispatch(M.MUSIC_VOLUME_MULTIPLE,{data:2}),t.effectBg.setAnimation(0,"loop",!0),t.startBtn.active=!0,i&&t.scheduleOnce(t.startFreeGame,i),t.bbr.once(f.TOUCH_END,t.startFreeGame,t),t.startBtn.once(f.TOUCH_END,t.startFreeGame,t),t.effectBg.setCompleteListener(null)})),this.schedule((function(){t.freeGameAlertStatus=J.START_FREE_GAME}),.5),dispatch(M.PLAY_BTM,{data:{url:e.isGoldenFg?F.GOLDFREEGAME_IN:F.FREEGAME_IN}})},o.showSummaryAlert=function(t){var e=this,i=this.data.getData().gameState,a=i.totalWinnings,n=i.isGoldenFg,s=A.getData().autoCloseTime;this.alert.active=!0,this.startBtn.active=!1,this.fgTimes.string=G.formatNumber(a),this.fgTimes.node.position.set(0,32,0),App.globalAudio.pauseMusic(),this.fgFontSprite.spriteFrame=this.data.getLocaleSpriteFrame("t_font_04"),this.fgFontSprite.node.position.set(0,148,0),this.playBounceTween(this.fgFontSprite.node),this.effectBg.skeletonData=this.data.getGameAlertSpine("f_total_bg"),this.effectBg.setAnimation(0,"in",!1),this.effectBg.setCompleteListener((function(){e.effectBg.setAnimation(0,"loop",!0),e.finishBtn.active=!0,e.finishFGCallback=function(){e.finishFreeGame(),e.unschedule(e.finishFGCallback),t()},s&&e.scheduleOnce(e.finishFGCallback,s),e.bbr.once(f.TOUCH_END,e.finishFGCallback,e),e.finishBtn.once(f.TOUCH_END,e.finishFGCallback,e),e.effectBg.setCompleteListener(null)})),c(this.node).delay(2).call((function(){App.globalAudio.resumeMusic()})).start(),this.schedule((function(){e.freeGameAlertStatus=J.FINISH_FREE_GAME}),.5),dispatch(M.PLAY_BTM,{data:{url:n?F.GOLDFREEGAME_OUT:F.FREEGAME_OUT}})},o.onKeyDown=function(e){if(t.prototype.onKeyDown.call(this,e),e.keyCode===h.SPACE)switch(this.freeGameAlertStatus){case J.START_FREE_GAME:this.startFreeGame(),this.freeGameAlertStatus=J.START_FREE_GAME_END;break;case J.FINISH_FREE_GAME:null!=this.finishFGCallback&&(this.finishFGCallback(),this.freeGameAlertStatus=J.FINISH_FREE_GAME_END)}},s(e,[{key:"data",get:function(){return App.dataCenter.get(T)}}]),e}(_)).prototype,"alert",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(k.prototype,"bbr",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(k.prototype,"effectBg",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(k.prototype,"fgFontSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(k.prototype,"fgTimes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"startBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"finishBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=k))||U));o._RF.pop()}}}));

System.register("chunks:///_virtual/FullComboView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameData.ts","./GameEvent.ts","./GameConfigModel.ts"],(function(t){"use strict";var e,n,i,o,a,r,c,l,s,u,f,p,h,y,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,c=t._decorator,l=t.sp,s=t.tween,u=t.Node,f=t.UIOpacityComponent},function(t){p=t.default},function(t){h=t.inject},function(t){y=t.default},function(t){d=t.GameEvent},function(t){m=t.EBTM}],execute:function(){var v,b,C,w,O,g,F,D,L;r._RF.push({},"25dc3zChk5DT6OyyXqQlXl6","FullComboView",void 0);var A=c.ccclass;c.property,t("FullComboView",(v=A("FullComboView"),b=h("alert",u),C=h("alert",f),w=h("alert/effect",l.Skeleton),v((F=e((g=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"alert",F,o(e)),i(e,"alertOpacity",D,o(e)),i(e,"effect",L,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.start=function(){this.init()},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.init=function(){},r.showFullCombo=function(t){var e=this;this.data.getData().parser.isFullCombo?(this.openAlert(),this.effect.setAnimation(0,"in",!1),this.effect.setCompleteListener((function(){e.effect.setAnimation(0,"loop",!0)})),dispatch(d.PLAY_BTM,{data:{url:m.FULLCOMBO}}),this.scheduleOnce((function(){e.closeAlert((function(){t&&t()}))}),3)):t&&t()},r.openAlert=function(){this.alert.active=!0,s(this.alertOpacity).to(1,{opacity:255}).start()},r.closeAlert=function(t){var e=this;s(this.alertOpacity).to(.3,{opacity:0}).call((function(){e.alert.active=!1,t&&t()})).start()},r.reset=function(){},r.setData=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.addEvents=function(){var t=this;this.on(d.SHOW_FULL_COMBO,(function(e){t.showFullCombo(e.complete)}))},a(e,[{key:"data",get:function(){return App.dataCenter.get(y)}}]),e}(p)).prototype,"alert",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(g.prototype,"alertOpacity",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(g.prototype,"effect",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=g))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/g1005",["./GameEntry.ts","./ParseResponse.ts","./RegisterNewCommands.ts","./CreateReplayCloseSpinFlowCmd.ts","./CreateReplayFlow.ts","./CreateReplayQuickStopFlowCmd.ts","./CreateReplaySpinCompleteFlowCmd.ts","./CreateReplaySpinFlowCmd.ts","./CreateReplayStopSpinFlowCmd.ts","./FlowIDs.ts","./CreateNewCloseSpinFlowCmd.ts","./CreateNewEarlySpinFlowCmd.ts","./CreateNewQuickStopFlowCmd.ts","./CreateNewResumeFlowCmd.ts","./CreateNewSpinCompleteFlowCmd.ts","./CreateNewSpinFlowCmd.ts","./CreateNewStopSpinFlowCmd.ts","./NewSpinClosedCmd.ts","./BuyFeatureButton.ts","./Symbol.ts","./AnimaView.ts","./BackgroundView.ts","./BigwinView.ts","./BlackOverlayView.ts","./BuyFeatureView.ts","./CharacterView.ts","./CurrentTimesView.ts","./EffectsView.ts","./FreeGameAlertView.ts","./FullComboView.ts","./IntroView.ts","./JackpotView.ts","./PrizeView.ts","./ReelView.ts","./ReplayUIViewL.ts","./ReplayUIViewP.ts","./SymbolView.ts","./TransitionView.ts","./TreasuresView.ts","./WinView.ts","./GameColor.ts","./GameColors.ts","./GameConfigModel.ts","./GameData.ts","./GameLanguage.ts","./GameLanguages.ts","./GameSymbolID.ts","./GlobalModel.ts","./GameEvent.ts","./GameLogic.ts","./GameHandler.ts","./GameSender.ts","./GameService.ts","./res-type2.ts","./types.ts","./GameView.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/GameColor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProxy.ts","./GameData.ts","./GameColors.ts"],(function(o){"use strict";var t,n,r,e,c,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy},function(o){r=o.injectColorData,e=o.ColorProxy},function(o){c=o.default},function(o){i=o}],execute:function(){var u;n._RF.push({},"a1bccOBJRhCP77JAb6CqO+C","GameColor",void 0);o("GameColor",r(u=function(o){function n(){for(var t,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return(t=o.call.apply(o,[this].concat(r))||this).bundle=c.module,t}return t(n,o),n.prototype.init=function(){this.importColors(i)},n}(e))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameColors.ts",["cc"],(function(e){"use strict";var n,r;return{setters:[function(e){n=e.cclegacy,r=e.Color}],execute:function(){e("EUiColorKeys",void 0),n._RF.push({},"aa840sFe0RHCbJb9DlN5nKO","GameColors",void 0);var a,o=e("DARK",{mode:"dark",data:{mainGame:{auxiliary:new r("#4e3487"),main:new r("#ab84ff"),mainHover:new r("#896acc"),topbar:new r(42,26,77,209.1)},record:{5:new r(255,255,255,12.75),10:new r(255,255,255,255*.24)},background:{0:new r("#c9c9cc"),20:new r("#a9a9ad"),40:new r("#88898e"),60:new r("#68696f"),80:new r("#474951"),100:new r("#272932")},white:{info01:new r("#ffffff"),default01:new r(255,255,255,38.25),default02:new r(255,255,255,255*.24),hover01:new r(255,255,255,76.5),hover02:new r(255,255,255,255*.08),labelDefault01:new r(255,255,255,153),textAuto01:new r("#ffffff")},red:{primary:new r("#ff6433")},green:{primary:new r("#3ae300")},yellow:{primary:new r("#ffd680"),secondary:new r(255,168,0,76.5)}}}).data;a||(a=e("EUiColorKeys",{}));var f={};for(var t in o)for(var w in o[t]){var i=c(t+"_"+w);f[i]&&Log.e("碰撞檢測: "+t+"_"+w+" 的哈希碰撞"),f[i]=t+"_"+w,a[t+"_"+w]=i}function c(e){for(var n=0,r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n|=0}return n}n._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfigModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectUtils.ts","./BaseModel.ts","./DefinitionModel.ts","./SettingsModel.ts","./GameSender.ts","./GameData.ts","./UrlModel.ts","./UrlUtils.ts"],(function(s){"use strict";var t,e,_,m,i,a,b,o,u,n,l;return{setters:[function(s){t=s.inheritsLoose,e=s.createClass},function(s){_=s.cclegacy},function(s){m=s.ObjectUtils},function(s){i=s.BaseModel},function(s){a=s.default},function(s){b=s.default},function(s){o=s.GameSender},function(s){u=s.default},function(s){n=s.default},function(s){l=s.default}],execute:function(){var c,r;s({EBGM:void 0,EBTM:void 0}),_._RF.push({},"e5bb6o7O65Hert4BN+LmyiY","GameConfigModel",void 0),function(s){s.MAINGAME="assets/music/bgm/bgm_mg",s.FREEGAME="assets/music/bgm/bgm_fg",s.GOLDFREEGAME="assets/music/bgm/bgm_golden_fg"}(c||(c=s("EBGM",{}))),function(s){s.SPIN="assets/music/btm/btm_spin",s.CH_LOOP="assets/music/btm/btm_ch_loop",s.FREEGAME_IN="assets/music/btm/btm_fg_in",s.FREEGAME_OUT="assets/music/btm/btm_fg_out",s.SYMBOL_WIN="assets/music/btm/btm_fx_symbol_frame",s.SYMBOL_BREAK="assets/music/btm/btm_fx_symbol_out",s.TIMES_SYMBOL_01="assets/music/btm/btm_muti_function_1",s.TIMES_SYMBOL_02="assets/music/btm/btm_muti_function_2",s.SYMBOL_TURBO_FALL_OUT="assets/music/btm/btm_fall_auto_1",s.SYMBOL_TURBO_FALL_IN="assets/music/btm/btm_fall_auto_2",s.SYMBOL_NORMAL_FALL_OUT="assets/music/btm/btm_fall_normal_1",s.SYMBOL_NORMAL_FALL_IN="assets/music/btm/btm_fall_normal_2",s.FIREBALL_IN="assets/music/btm/btm_fx_symbol_function_1",s.FIREBALL_HIT="assets/music/btm/btm_fx_symbol_function_2",s.FIREBALL_HIT_100X="assets/music/btm/btm_fx_symbol_function_2_100x",s.CH_MAN_TRANSITION="assets/music/btm/btm_ch_male",s.CH_WOMAN_TRANSITION="assets/music/btm/btm_ch_female",s.NEW_CH_MAN_TRANSITION="assets/music/btm/btm_fg_chB",s.NEW_CH_WOMAN_TRANSITION="assets/music/btm/btm_fg_chA",s.SMALL_PRIZE_IN="assets/music/btm/btm_w_in_prize_s",s.ULTRA_IN="assets/music/btm/btm_w_ultra",s.LEGEND_IN="assets/music/btm/btm_w_legend",s.WIN_LOOP="assets/music/btm/btm_w_loop",s.S_PRIZE_LOOP="assets/music/btm/btm_w_loop_prize_s",s.L_PRIZE_LOOP="assets/music/btm/btm_w_loop_prize_l",s.JP_WIN="assets/music/btm/btm_w_jp",s.FULLCOMBO="assets/music/btm/btm_fc",s.SCATTER_IN="assets/music/btm/btm_scatter_in",s.SCATTER_IN_X2="assets/music/btm/btm_scatter_in_x2",s.SCATTER_WIN="assets/music/btm/btm_scatter_win",s.TIMES_SYMBOL_UPGRADE="assets/music/btm/btm_muti_upgrade",s.TIMES_MOVING="assets/music/btm/btm_muti_total",s.TOTAL_TIMES_UPGRADE="assets/music/btm/btm_totalTimes_upgrade",s.TRANSITION="assets/music/btm/btm_transitions",s.SCORE="assets/music/btm/btm_score",s.SCORE_PLUS="assets/music/btm/btm_score_plus",s.FIREWORKS="assets/music/btm/btm_w_fireworks",s.COUNTING="assets/music/btm/btm_counting",s.OPEN_FEATURE="assets/music/btm/btm_open",s.CLOSE_FEATURE="assets/music/btm/btm_close",s.JACKPOT_WIN="assets/music/btm/btm_w_jp_line",s.JP_POPUP_IN_1="assets/music/btm/btm_w_jp_intro_1",s.JP_POPUP_IN_2="assets/music/btm/btm_w_jp_intro_2",s.JP_POPUP_LOOP_1="assets/music/btm/btm_w_jp_loop_1",s.JP_POPUP_LOOP_2="assets/music/btm/btm_w_jp_loop_2",s.JP_MINI_VOCAL="assets/music/btm/btm_w_jp_mini_vocal",s.JP_MINOR_VOCAL="assets/music/btm/btm_w_jp_minor_vocal",s.JP_MAJOR_VOCAL="assets/music/btm/btm_w_major_vocal",s.JP_GRAND_VOCAL="assets/music/btm/btm_w_grand_vocal",s.BIG_VOCAL="assets/music/btm/btm_w_big_vocal",s.SUPER_VOCAL="assets/music/btm/btm_w_super_vocal",s.MEGA_VOCAL="assets/music/btm/btm_w_mega_vocal",s.ULTRA_VOCAL="assets/music/btm/btm_w_ultra_vocal",s.LEGENDARY_VOCAL="assets/music/btm/btm_w_legendary_vocal",s.TIMES_SPLIT_A="assets/music/btm/btm_multi_split_A",s.TIMES_SPLIT_B="assets/music/btm/btm_multi_split_B",s.TIMES_LOCK="assets/music/btm/btm_multi_lock",s.TIMES_LOCK_LV1="assets/music/btm/btm_multi_lv1",s.TIMES_LOCK_LV2="assets/music/btm/btm_multi_lv2",s.TIMES_LOCK_LV3="assets/music/btm/btm_multi_lv3",s.SCATTER_WIN_16="assets/music/btm/btm_symbol_16_win",s.GOLDFREEGAME_IN="assets/music/btm/btm_T_fg_in",s.GOLDFREEGAME_OUT="assets/music/btm/btm_T_fg_out",s.WOMEN_FG_CHA_LV1="assets/music/btm/btm_fg_chA_lv1",s.WOMEN_FG_CHA_LV2="assets/music/btm/btm_fg_chA_lv2",s.WOMEN_FG_CHA_LV3="assets/music/btm/btm_fg_chA_lv3",s.GOLDEN_FG_SYMBOL_CHA_LV1="assets/music/btm/btm_sym_chA_lv1",s.GOLDEN_FG_SYMBOL_CHA_LV2="assets/music/btm/btm_sym_chA_lv2",s.GOLDEN_FG_SYMBOL_CHA_LV3="assets/music/btm/btm_sym_chA_lv3",s.MEN_FG_CHB_LV1="assets/music/btm/btm_fg_chB_lv1",s.MEN_FG_CHB_LV2="assets/music/btm/btm_fg_chB_lv2",s.MEN_FG_CHB_LV3="assets/music/btm/btm_fg_chB_lv3",s.GOLDEN_FG_SYMBOL_CHB_LV1="assets/music/btm/btm_sym_chB_lv1",s.GOLDEN_FG_SYMBOL_CHB_LV2="assets/music/btm/btm_sym_chB_lv2",s.GOLDEN_FG_SYMBOL_CHB_LV3="assets/music/btm/btm_sym_chB_lv3",s.SCATTER_SYMBOL_INTRO="assets/music/btm/btm_T_fg_intro",s.WOMAN_FG_VOICE_LV1="assets/music/btm/btm_female_lv01",s.WOMAN_FG_VOICE_LV2="assets/music/btm/btm_female_lv02",s.WOMAN_FG_VOICE_LV3="assets/music/btm/btm_female_lv03",s.MEN_FG_VOICE_LV1="assets/music/btm/btm_male_lv01",s.MEN_FG_VOICE_LV2="assets/music/btm/btm_male_lv02",s.MEN_FG_VOICE_LV3="assets/music/btm/btm_male_lv03"}(r||(r=s("EBTM",{})));var f=function(s){function _(){var t;(t=s.call(this)||this).turboMode={animStagger:0,speed:.16,characterFireSpeed:2.5,fireBallSpeed:3.2,totalTimesFireBallTime:.5},t.normalMode={animStagger:.03,speed:.23,characterFireSpeed:1.4,fireBallSpeed:1.85,totalTimesFireBallTime:.5},t._isTurbo=!1,t.canQuickStop=!1,t.quickStopCount=0,t.canQuickStopEarlySpin=!1,t.useProEffect=!1,t.stopOnBigwinPrize=!1,t.stopOnJpPrize=!0,t.stopOnFg=!0;var e=n.getLanguageParam(),_=l.getViewModeParam();return t.data={reelConfig:t.normalMode,filePaths:{symbolsSpriteFrame:"assets/texture/symbols/"+_,symbolsSpriteFrameBlur:"assets/texture/symbolsBlur/"+_,symbolPrefab:"prefabs/"+_+"/Symbol",symbolsSkeletonData:"assets/spine/"+_+"/symbol",winCashPrefab:"prefabs/"+_+"/WinCash",fireBallPrefab:"prefabs/"+_+"/Fireball",gameAlertsSkeletonData:"assets/spine/"+_+"/prize",spinSkeleton:"assets/spine/"+_+"/spin",common:"assets/texture/common/"+_,localeSpriteFrame:"assets/texture/locale/"+_+"/"+e,font:"assets/font/"+_,timesMovingPrefab:"prefabs/"+_+"/TimesMoving",blueTimesMovingPrefab:"prefabs/"+_+"/BlueTimesMoving",purpleTimesMovingPrefab:"prefabs/"+_+"/PurpleTimesMoving",transitionsSkeletonData:"assets/spine/"+_+"/transition",buyFeatureBtnPrefab:"prefabs/"+_+"/BuyFeatureButton",splitBlueTimesMovingPrefab:"prefabs/"+_+"/Split",introSkeleton:"assets/spine/intro",testSpinDatas:"script/data/testSpin",testCloseSpinDatas:"script/data/testCloseSpin"},bigwinAutoCloseTime:5,hasTimesSymbolsDelay:.35,nextSpinDelay:0,symbolQuickInTime:.16,winAmountTime:1.75,autoCloseTime:null},t}t(_,s),_.Instance=function(){return this._instance||(this._instance=new _)};var i=_.prototype;return i.setData=function(s){this.setIsTurbo(s.platform.player.settings.advancedSettings.turbo),App.dataCenter.get(u).originTurbo=s.platform.player.settings.advancedSettings.turbo;var t=a.getData(),e=t.autoConfirmTime,_=t.autoSpinInterval;this.data.reelConfig=this.isTurbo?this.turboMode:this.normalMode,this.data.autoCloseTime=e,this.data.nextSpinDelay=_,this.data.hasTimesSymbolsDelay=_,this.data.bigwinAutoCloseTime=s.engine.definition.prizeAutoNextDelay},i.setNewData=function(s){this.setIsTurbo(s.platform.player.settings.advancedSettings.turbo),App.dataCenter.get(u).originTurbo=s.platform.player.settings.advancedSettings.turbo;var t=a.getData(),e=t.autoConfirmTime,_=t.autoSpinInterval;this.data.reelConfig=this.isTurbo?this.turboMode:this.normalMode,this.data.autoCloseTime=e,this.data.nextSpinDelay=_,this.data.hasTimesSymbolsDelay=_,this.data.bigwinAutoCloseTime=s.engine.definition.prizeAutoNextDelay},i.sendSettingByTurbo=function(){var s={turbo:b.turbo},t={turbo:this.isTurbo},e=m.diffObjects(s,t);if(Object.keys(e).length>0){var _={type:"game",data:e};App.senderManager.get(o).setting(_)}b.turbo=this.isTurbo},i.setIsTurbo=function(s,t){void 0===t&&(t=!0),this._isTurbo=s,this.data.reelConfig=this.isTurbo?this.turboMode:this.normalMode,t&&this.sendSettingByTurbo()},e(_,[{key:"isTurbo",get:function(){return this._isTurbo}}]),_}(i);f._instance=null;s("default",f.Instance());_._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bundles.ts","./MathUtil.ts","./GameDataBase.ts","./GameEvent.ts","./types.ts","./GameConfigModel.ts","./GameSymbolID.ts","./AutoPlayModel.ts","./ObjectUtils.ts","./PlatformModel.ts","./StakeModel.ts","./DefinitionModel.ts","./UrlUtils.ts"],(function(e){"use strict";var t,a,i,s,n,r,o,l,m,c,p,u,h,d,y,S,f,g;return{setters:[function(e){t=e.inheritsLoose,a=e.extends,i=e.createClass},function(e){s=e.cclegacy,n=e.v3},function(e){r=e.EBundles},function(e){o=e.default},function(e){l=e.GameDataBase},function(e){m=e.GameEvent},function(e){c=e.EGameType},function(e){p=e.default},function(e){u=e.GameSymbolID},function(e){h=e.default},function(e){d=e.ObjectUtils},function(e){y=e.default},function(e){S=e.default},function(e){f=e.default},function(e){g=e.default}],execute:function(){var b;e("EInitName",void 0),s._RF.push({},"1ccecTxaNJLsI8drIc74lIn","GameData",void 0),function(e){e.INIT_GAME="init_game",e.INIT_REPLAY="init_replay"}(b||(b=e("EInitName",{}))),e("default",function(e){function s(){for(var t,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).GAME_VERSION="1.0.9_3",t.preData=void 0,t._currentGameType=void 0,t.previousGameType=void 0,t.originTurbo=null,t.currSpinIndex=0,t.preSpinData=null,t.isEarlyFlag=!1,t.isOpenEarlyFlag=!1,t.isSendOutEarlyFlag=!1,t.earlySpinDelaying=!1,t.earlyData=null,t.newEarlyData=null,t.isEarlyCloseFlag=!1,t.earlyCloseData=null,t.waitEarlyDataRetryInterval=null,t.waitEarlyCloseDataRetryInterval=null,t.isHaveNewLock=!1,t.newLockTimesSymbols=new Map,t.delayEarlyTween=void 0,t.isSendClose=!1,t.originGameData=null,t}t(s,e);var r=s.prototype;return r.init=function(){this.data={symbolPosConfig:new Map,gameState:null,definition:null,isResuming:!1,parser:{view1D:[],newTimesSymbols:[],winOdds:[],bigwinReach:null,isFullCombo:!1,lockTimesSymbols:new Map,isHaveLockSymbol:!1,isSplitSymbol:!1},winBoardPosition:n(),currentTimesPosition:n()},u.init(),this.data.symbolPosConfig=u.symbolPosConfig,"landscape"==g.getViewModeParam()?(this.data.winBoardPosition=n(50,290,0),this.data.currentTimesPosition=n(388,264,0)):(this.data.winBoardPosition=n(50,-282,0),this.data.currentTimesPosition=n(293,264,0))},r.onDestory=function(){},r.clear=function(){},r.debug=function(){Log.d(""+this.module)},r.parseView=function(e){this.data.parser.view1D=o.flattenArray(e.view)},r.parseNewTimesSymbols=function(e){e.action,e.currentView,e.timesSymbols,e.splitList;var t,a,i,s,n=e.newTimesSymbols;null==(t=this.preSpinData)||t.winSymbols,null==(a=this.preSpinData)||a.posTransform,null==(i=this.preSpinData)||i.splitList,null==(s=this.preSpinData)||s.timesSymbols;this.data.parser.newTimesSymbols=n.slice()},r.ReplayParseView=function(e){this.data.parser.view1D=o.flattenArray(e.engine.view)},r.ReplayParseTimesSymbols=function(e){var t,a,i,s;Log.e("parse times symbol::::::",e.engine);var n=e.engine,r=(n.action,n.currentView,n.timesSymbols,n.newTimesSymbols),o=void 0===r?[]:r;null==(t=this.preData.gameState)||t.winSymbols,null==(a=this.preData.gameState)||a.splitList,null==(i=this.preData.gameState)||i.timesSymbols,null==(s=this.preData.gameState)||s.posTransform;this.data.parser.newTimesSymbols=o.slice()},r.setPreData=function(){this.preData=JSON.parse(JSON.stringify(this.data))},r.setPreSpinData=function(){this.preSpinData=JSON.parse(JSON.stringify(this.currSpinData))},r.compareFunction=function(e,t){return e<t?-1:e>t?1:0},r.parseReplayWinOddsType=function(e){for(var t=Object.keys(e),a=Object.values(e).sort(this.compareFunction),i=0;i<t.length;i++)this.data.parser.winOdds.push({level:i,reachRate:a[i]});Log.w("parseReplayWinOddsType",this.data.parser.winOdds)},r.parseWinOddsTypes=function(e){var t=e.winOddsTypes,a=Object.keys(t),i=Object.values(t).sort(this.compareFunction);Log.w("BigWinOdd values::::::::::",i);for(var s=0;s<a.length;s++)this.data.parser.winOdds.push({level:s,reachRate:i[s]});Log.w("parseWinOddsTypes",this.data.parser.winOdds)},r.parseFullCombo=function(e){this.data.parser.isFullCombo=e.every((function(t){return t===e[0]}))},r.parseLockTimesSymbol=function(){var e=this.currSpinData,t=this.preSpinData.timesSymbols;if(void 0!==t)for(var a=0;a<t.length;a++){var i=t[a];void 0!==i.lock&&1==i.lock&&this.data.parser.lockTimesSymbols.has(i.symbolPos)&&this.data.parser.lockTimesSymbols.delete(i.symbolPos)}if(e.timesSymbols&&e.timesSymbols.length>0){var s=e.timesSymbols.slice();this.isHaveNewLock=!1,this.newLockTimesSymbols.clear();for(var n=0;n<s.length;n++){var r=s[n];if(null!=r.lock&&r.lock>0){if(this.data.parser.lockTimesSymbols.get(r.symbolPos)){this.data.parser.lockTimesSymbols.set(r.symbolPos,r);continue}this.newLockTimesSymbols.set(r.symbolPos,r),this.isHaveNewLock=!0,this.data.parser.lockTimesSymbols.set(r.symbolPos,r)}}this.data.parser.lockTimesSymbols.size>0?this.data.parser.isHaveLockSymbol=!0:this.data.parser.isHaveLockSymbol=!1}else this.data.parser.isHaveLockSymbol=!1;Log.e("new round lock::::::::::time symbol:::::::::::::",this.data.parser.lockTimesSymbols)},r.parseReplayLockTimesSymbol=function(){var e=this.data.gameState;if(this.isHaveNewLock=!1,Log.e("curr spin data::::::::::::::::::::",e),Log.e("pre Spin data::::::::::",this.preData),this.preData.gameState){var t=this.preData.gameState.timesSymbols;if(void 0!==t)for(var a=0;a<t.length;a++){var i=t[a];i.lock&&1==i.lock&&this.data.parser.lockTimesSymbols.has(i.symbolPos)&&this.data.parser.lockTimesSymbols.delete(i.symbolPos)}}for(var s=e.timesSymbols.slice(),n=0;n<s.length;n++){var r=s[n];if(Log.e("lock::::::::::time symbol:::::::::::::",r.lock),null!=r.lock&&r.lock>0){if(this.data.parser.lockTimesSymbols.get(r.symbolPos)){this.data.parser.lockTimesSymbols.set(r.symbolPos,r);continue}this.newLockTimesSymbols.set(r.symbolPos,r),this.isHaveNewLock=!0,this.data.parser.lockTimesSymbols.set(r.symbolPos,r)}}this.data.parser.lockTimesSymbols.size>0?this.data.parser.isHaveLockSymbol=!0:this.data.parser.isHaveLockSymbol=!1,Log.e("lock::::::::::time symbol:::::::::::::",this.data.parser.lockTimesSymbols)},r.setNewInitData=function(e){var t=e.engine,a=e.isResuming;this.data.newGameState=t.gameState.slice(),this.setPreSpinData(),this.data.definition=t.definition,this.data.isResuming=a,this.data.spinId=t.spinId,0==this.data.isResuming&&(this.currSpinIndex=this.data.newGameState.length-1),this.data.gameState=this.currSpinData,this.parseView(this.currSpinData),this.parseWinOddsTypes(t.definition),this.parseFullCombo(this.data.parser.view1D)},r.setNewSpinData=function(e){var t=e.engine;this.data.newGameState=t.gameState.slice(),this.data.spinId=t.spinId,this.currSpinIndex=0,this.setPreSpinData(),this.data.gameState=this.currSpinData,this.parseView(this.currSpinData),this.parseNewTimesSymbols(this.currSpinData),this.parseFullCombo(this.data.parser.view1D),this.parseLockTimesSymbol()},r.judgeIsOpenEarlyFlag=function(){1==this.data.newGameState.length&&(h.spinsRemaining>1||-1==h.spinsRemaining)&&h.active&&p.isTurbo&&this.currentGameType==c.MAIN_GAME?this.isOpenEarlyFlag=!0:(this.isOpenEarlyFlag=!1,this.earlyData=null)},r.setNextSpinData=function(){this.setPreSpinData(),this.currSpinIndex++,this.data.gameState=this.currSpinData,this.parseView(this.currSpinData),this.parseNewTimesSymbols(this.currSpinData),this.parseFullCombo(this.data.parser.view1D),this.parseLockTimesSymbol()},r.setReplayCurrentView=function(e){this.setPreData(),this.data.gameState=e.engine,this.ReplayParseView(e),this.ReplayParseTimesSymbols(e),this.parseReplayLockTimesSymbol()},r.setReplayInit=function(e){var t=e.definition?e.definition.digital:f.getData().digital,i=e.definition?e.definition.winOddsTypes:f.getData().winOddsTypes,s=e.definition?e.definition.extraFgRounds:f.getData().extraFgRounds;this.data.definition=a({digital:t,winOddsTypes:this.parseReplayWinOddsType(i),extraFgRounds:s},this.data.definition),p.getData().autoCloseTime=3,p.getData().bigwinAutoCloseTime=5},r.setBigWinReach=function(e){var t=this.data.gameState.totalStake,a=this.data.parser.winOdds,i=e/t;this.data.parser.bigwinReach=null;for(var s=0;s<a.length;s++)i>=a[s].reachRate&&(this.data.parser.bigwinReach=a[s]);return this.data.parser.bigwinReach},r.setNewBigWinReach=function(e){var t=this.currSpinData.totalStake,a=this.data.parser.winOdds,i=e/t;this.data.parser.bigwinReach=null;for(var s=0;s<a.length;s++)i>=a[s].reachRate&&(this.data.parser.bigwinReach=a[s]);return console.error("bigwinReach::::::::::",this.data.parser.bigwinReach),console.error("totalStake::::::::::",t),this.data.parser.bigwinReach},r.getSymbolSpriteFrame=function(e){var t=p.getData().filePaths.symbolsSpriteFrame,a="symbol_"+e,i=App.cache.get(s.module,t).data.find((function(e){return e.name===a}));if(!i)throw new Error("NOT FIND 所需圖片 "+a);return i},r.getSymbolSpriteFrameBlur=function(e){var t=p.getData().filePaths.symbolsSpriteFrameBlur,a="symbol_"+e,i=App.cache.get(s.module,t).data.find((function(e){return e.name===a}));if(!i)throw new Error("NOT FIND 所需圖片 "+a);return i},r.getSymbolAnimSpine=function(e){var t=p.getData().filePaths.symbolsSkeletonData,a="symbol_"+e,i=App.cache.get(s.module,t).data.find((function(e){return e.name===a}));if(!i)throw new Error("NOT FIND 所需sp.SkeletonData "+a);return i},r.getGameAlertSpine=function(e){var t=p.getData().filePaths.gameAlertsSkeletonData,a=App.cache.get(s.module,t).data.find((function(t){return t.name===e}));if(!a)throw new Error("NOT FIND 所需sp.SkeletonData "+e);return a},r.getCommonSpriteFrame=function(e){var t=p.getData().filePaths.common,a=App.cache.get(s.module,t).data.find((function(t){return t.name===e}));if(!a)throw new Error("NOT FIND 所需spriteFrame "+e);return a},r.getLocaleSpriteFrame=function(e){var t=p.getData().filePaths.localeSpriteFrame,a=App.cache.get(s.module,t).data.find((function(t){return t.name===e}));if(!a)throw new Error("NOT FIND 所需spriteFrame "+e);return a},r.getTransitionSpine=function(e){var t=p.getData().filePaths.transitionsSkeletonData,a=App.cache.get(s.module,t).data.find((function(t){return t.name===e}));if(!a)throw new Error("NOT FIND 所需skeletonData "+e);return a},r.getIsFGFinish=function(){var e=this.data.gameState,t=e.currentView,a=e.totalViews,i=(e.spinId,e.startFreeGame,e.action);return t+1===a&&"freeSpin"==i},r.getIsBigWinReach=function(){return null!=this.data.parser.bigwinReach},r.saveOriginGameData=function(){this.originGameData=d.clone(this.data),y.saveOriginData(),S.saveOriginData()},r.restoreCurrentGameData=function(){this.originGameData?(this.data=d.clone(this.originGameData),this.currentGameType=c.MAIN_GAME,this.originGameData=null):console.warn("No originGameData to restore."),y.restoreCurrentData(),S.restoreCurrentData()},i(s,[{key:"currentGameType",get:function(){return this._currentGameType},set:function(e){this.previousGameType=this._currentGameType,this._currentGameType=e,dispatch(m.UPDATE_GAME_TYPE,{data:this._currentGameType})}},{key:"currSpinData",get:function(){return this.data.newGameState[this.currSpinIndex]}}]),s}(l)).module=r[r.g1005],s._RF.pop()}}}));

System.register("chunks:///_virtual/GameEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Bundles.ts","./HeartbetJson.ts","./Resource.ts","./Entry.ts","./Decorators.ts","./SlotFrameworkData.ts","./ColorModel.ts","./PlatformModel.ts","./ReadyBundleModel.ts","./ReplayModel.ts","./UrlModel.ts","./CmmSlotUtils.ts","./BigwinView.ts","./BuyFeatureView.ts","./GameColor.ts","./GameConfigModel.ts","./GameData.ts","./GameLanguage.ts","./GameHandler.ts","./GameSender.ts","./GameService.ts","./GameView.ts","./SlotTableViewP.ts","./RegisterNewCommands.ts","./SlotTableViewL_v2.ts","./UrlUtils.ts","./IntroView.ts"],(function(){"use strict";var e,t,n,a,r,o,i,s,u,l,c,d,p,g,f,m,b,h,y,w,v,A,S,C,L,k,M,x,D,B,G,I,P,F,V,E,_,R,T,O,U,N;return{setters:[function(r){e=r.inheritsLoose,t=r.createClass,n=r.asyncToGenerator,a=r.regeneratorRuntime},function(e){r=e.cclegacy,o=e.Color,i=e.Prefab,s=e.SpriteFrame,u=e.sp,l=e.Font,c=e.AudioClip,d=e.Widget,p=e.v3},function(e){g=e.Config,f=e.ViewZOrder},function(e){m=e.EBundles},function(e){b=e.HeartbeatJson},function(e){h=e.Resource},function(e){y=e.Entry},function(e){w=e.registerEntry},function(e){v=e.default},function(e){A=e.default},function(e){S=e.default},function(e){C=e.default},function(e){L=e.default},function(e){k=e.default},function(e){M=e.CmmSlotUtils},function(e){x=e.BigwinView},function(e){D=e.BuyFeatureView},function(e){B=e.GameColor},function(e){G=e.default},function(e){I=e.default},function(e){P=e.GameLanguage},function(e){F=e.GameHandler},function(e){V=e.GameSender},function(e){E=e.GameService},function(e){_=e.default},function(e){R=e.default},function(e){T=e.default},function(e){O=e.default},function(e){U=e.default},function(e){N=e.IntroView}],execute:function(){var H;r._RF.push({},"c377cr5gcNGs7F0q/XMrclI","GameEntry",void 0);w("GameEntry",App.dataCenter.get(I).module,_)(H=function(r){function y(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).language=new P,e.color=new B,e}e(y,r);var w=y.prototype;return w.addNetHandler=function(){App.handlerManager.get(F)},w.removeNetHandler=function(){},w.loadResources=function(){var e=n(a().mark((function e(t){var n,r,o,d,p,g,f,b,y,w,v,A,S,L,k,M,B,I,P,F=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.getData().filePaths,r=n.symbolsSpriteFrame,o=n.symbolPrefab,d=n.symbolsSkeletonData,p=n.winCashPrefab,g=n.fireBallPrefab,f=n.gameAlertsSkeletonData,b=n.spinSkeleton,y=n.common,w=n.localeSpriteFrame,v=n.font,A=n.timesMovingPrefab,S=n.transitionsSkeletonData,L=n.buyFeatureBtnPrefab,k=n.blueTimesMovingPrefab,M=n.purpleTimesMovingPrefab,B=n.symbolsSpriteFrameBlur,I=n.splitBlueTimesMovingPrefab,P=n.introSkeleton,n.testSpinDatas,n.testCloseSpinDatas,e.next=3,this.setloadingDataVO();case 3:this.loader.getLoadResources=function(){return[{preloadView:_,bundle:F.bundle},{url:o,bundle:F.bundle,type:i},{url:p,bundle:F.bundle,type:i},{url:g,bundle:F.bundle,type:i},{url:A,bundle:F.bundle,type:i},{url:k,bundle:F.bundle,type:i},{url:M,bundle:F.bundle,type:i},{url:I,bundle:F.bundle,type:i},{url:L,bundle:F.bundle,type:i},{dir:r,bundle:F.bundle,type:s},{dir:B,bundle:F.bundle,type:s},{dir:d,bundle:F.bundle,type:u.SkeletonData},{dir:f,bundle:F.bundle,type:u.SkeletonData},{dir:b,bundle:F.bundle,type:u.SkeletonData},{dir:S,bundle:F.bundle,type:u.SkeletonData},{dir:y,bundle:F.bundle,type:s},{dir:w,bundle:F.bundle,type:s},{dir:v,bundle:F.bundle,type:l},{dir:"assets/music/bgm",bundle:F.bundle,type:c},{dir:"assets/music/btm",bundle:F.bundle,type:c},{dir:P,bundle:F.bundle,type:u.SkeletonData},{preloadView:D,bundle:F.bundle},{preloadView:x,bundle:F.bundle}]},this.loader.onLoadProgress=function(e,t,n){App.gameLoading.setLoading(e,t,n)},this.loader.onLoadComplete=function(e){h.LoaderError.SUCCESS&&(C.setComplete(m[F.bundle]),t())},this.loader.loadResources();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),w.initData=function(){Log.e(" 🐽🐽🐽 gv"+this.data.GAME_VERSION+" sv"+this.slotData.SLOT_VERSION+" 🐽🐽🐽 "),T.execute(),App.serviceManager.get(E,!0),this.initColorModel(),this.initLanguage()},w.initColorModel=function(){var e={mainGame:{auxiliary:new o("#4e3487"),main:new o("#ab84ff"),mainHover:new o("#896acc"),topbar:new o(42,26,77,209.1)},record:{5:new o(255,255,255,12.75),10:new o(255,255,255,255*.24)},background:{0:new o("#c9c9cc"),20:new o("#a9a9ad"),40:new o("#88898e"),60:new o("#68696f"),80:new o("#474951"),100:new o("#272932")},white:{info01:new o("#ffffff"),default01:new o(255,255,255,38.25),default02:new o(255,255,255,255*.24),hover01:new o(255,255,255,76.5),hover02:new o(255,255,255,255*.08),labelDefault01:new o(255,255,255,153),textAuto01:new o("#ffffff")},red:{primary:new o("#ff6433")},green:{primary:new o("#3ae300")},yellow:{primary:new o("#ffd680"),secondary:new o(255,168,0,76.5)}};A.setData(e)},w.pauseMessageQueue=function(){},w.resumeMessageQueue=function(){},w.onEnter=function(e){r.prototype.onEnter.call(this,e),Log.d("--------------onEnterLogin--------------"),this.serviceInit()},w.openGameView=function(e){var t=this;App.gameLoading.setMessage("gv"+this.data.GAME_VERSION+" sv"+this.slotData.SLOT_VERSION);var n=setInterval((function(){t.checkCompletion(n,e)}),100)},w.onUnloadBundle=function(){r.prototype.onUnloadBundle.call(this)},w.checkCompletion=function(){var e=n(a().mark((function e(t,n){var r,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=App.gameLoading,C.isComplete()){e.next=5;break}return e.abrupt("return");case 5:return clearInterval(t),App.uiManager.open({type:this.gameViewType,bundle:this.bundle,args:n}),e.next=10,this.waitSocketConnected();case 10:if(!U.hasParam("spinId")){e.next=18;break}L.isReplay=!0,Log.d("hasReplayUrl",L.isReplay),App.senderManager.get(V).replay(),r.complete(),e.next=20;break;case 18:return e.next=20,App.senderManager.get(V).initial().then((function(){r.hideProgressBar(),r.hideGameLogo(),App.uiManager.open({type:N,bundle:o.bundle,zIndex:f.UILoading,name:"Intro"});var e=S.getData().slotTablesOn,t=o.data.getData().isResuming,n="1"===k.getData().searchParams.table;if(e&&!t){if(n)return;var a=M.getOrientationTarget(O,R);App.uiManager.open({type:a,bundle:m[m.slotFramework],zIndex:f.UI,name:"機台選擇",args:!0})}}));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),w.setloadingDataVO=function(){var e=n(a().mark((function e(){var t,n,r,o,i,l,c,g,f,m,b,h,y,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.getViewModeParam(),r=k.getData().searchParams.l,e.next=4,App.cache.getCacheByAsync("assets/texture/common/"+t+"/l_bg/spriteFrame",s,this.bundle);case 4:return e.next=6,e.sent;case 6:return o=e.sent,e.next=9,App.cache.getCacheByAsync("assets/spine/"+t+"/loading/loading",u.SkeletonData,this.bundle);case 9:return i=e.sent,e.next=12,App.cache.getCacheByAsync("assets/texture/common/"+t+"/l_loading_frame/spriteFrame",s,this.bundle);case 12:return l=e.sent,e.next=15,App.cache.getCacheByAsync("assets/texture/common/"+t+"/l_loading_02/spriteFrame",s,this.bundle);case 15:return c=e.sent,e.next=18,App.cache.getCacheByAsync("assets/texture/common/"+t+"/l_loading_01/spriteFrame",s,this.bundle);case 18:return g=e.sent,e.next=21,App.cache.getCacheByAsync("assets/texture/common/"+t+"/l_loading_light/spriteFrame",s,this.bundle);case 21:return f=e.sent,e.next=24,App.cache.getCacheByAsync("assets/texture/locale/"+t+"/"+r+"/l_logo/spriteFrame",s,this.bundle);case 24:return m=e.sent,e.next=27,App.cache.getCacheByAsync("assets/texture/locale/"+t+"/"+r+"/l_font/spriteFrame",s,this.bundle);case 27:b=e.sent,h=null,"landscape"==t?(n={background:o,spine:i,barFrame:l,bar:g,barbg:c,barLight:f,logo:m,startGame:b},y={alignMode:d.AlignMode.ALWAYS,left:20,isAlignLeft:!0,isAlignTop:!0,top:10},App.gameLoading.setLogoWidget(y),App.gameLoading.setAtgLogoPosition(580,290)):"portrait"==t&&(n={background:o,barFrame:l,bar:g,barbg:c,barLight:f,logo:m,startGame:b},w={alignMode:d.AlignMode.ALWAYS,bottom:180,isAlignBottom:!0,isAlignHorizontalCenter:!0,horizontalCenter:0},App.gameLoading.setLogoWidget(w),h={mask:p(0,0,0)}),App.gameLoading.setData(n,h);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),w.serviceInit=function(){this.service.heartbeat=b,this.service.maxEnterBackgroundTime=g.MIN_INBACKGROUND_TIME,this.service.connect(),this.service.enabled=!0},w.initLanguage=function(){var e,t=null!=(e=k.getData().searchParams)&&e.l?k.getData().searchParams.l:"zh-tw";App.language.change(t)},w.waitSocketConnected=function(){var e=n(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=0,r=setInterval((function(){t.service.isConnected?(clearInterval(r),e()):(a+=100)>=3e4&&(clearInterval(r),n(new Error("Socket connection timed out")))}),100)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t(y,[{key:"service",get:function(){return App.serviceManager.get(E)}},{key:"data",get:function(){return App.dataCenter.get(I)}},{key:"slotData",get:function(){return App.dataCenter.get(v)}}]),y}(y));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlowEvent.ts"],(function(_){"use strict";var E,S,A;return{setters:[function(_){E=_.inheritsLoose},function(_){S=_.cclegacy},function(_){A=_.FlowEvent}],execute:function(){S._RF.push({},"e8518OAeXJGKr2B8BndSneN","GameEvent",void 0);var T=_("GameEvent",function(_){function S(){return _.apply(this,arguments)||this}return E(S,_),S}(A));T.CREATE_SPIN_FLOW="GameEvent:CREATE_SPIN_FLOW",T.CREATE_STOP_SPIN_FLOW="GameEvent:CREATE_STOP_SPIN_FLOW",T.CREATE_SPIN_COMPLETE_FLOW="GameEvent:CREATE_SPIN_COMPLETE_FLOW",T.CREATE_CLOSE_SPIN_FLOW="GameEvent:CREATE_CLOSE_SPIN_FLOW",T.SPIN_CLOSED_FLOW="GameEvent:SPIN_CLOSED_FLOW",T.CREATE_RESUME_FLOW="GameEvent:CREATE_RESUME_FLOW",T.CREATE_QUICK_STOP_FLOW="GameEvent:CREATE_QUICK_STOP_FLOW",T.CREATE_EARLY_SPIN_FLOW="GameEvent:CREATE_EARLY_SPIN_FLOW",T.WAIT_EARLY_SPIN_RESPONSE="GameEvent:WAIT_EARLY_SPIN_RESPONSE",T.SET_EARLY_SPIN_DATA_TO_SPIN="GameEvent:SET_EARLY_SPIN_DATA_TO_SPIN",T.EARLY_SPIN_DELAYING="SlotFramework:EARLY_SPIN_DELAYING",T.SET_EARLY_SPIN_DELAYING_COMPLETED="SlotFramework:SET_EARLY_SPIN_DELAYING_COMPLETED",T.SPIN_START="GameEvent:START_SPIN",T.SPIN_CLOSED="GameEvent:SPIN_CLOSED",T.AUTO_SPIN_STATUS="GameEvent:AUTO_SPIN_STATUS",T.UPDATE_GAME_TYPE="GameEvent:UPDATE_GAME_TYPE",T.SHOW_SYMBOLS_OUT_ANIM="GameEvent:SHOW_SYMBOLS_OUT_ANIM",T.SHOW_SYMBOLS_IN_ANIM="GameEvent:SHOW_SYMBOLS_IN_ANIM",T.SHOW_SYMBOLS_QUICK_IN_ANIM="GameEvent:SHOW_SYMBOLS_QUICK_IN_ANIM",T.SHOW_NEW_SYMBOLS_IN_ANIM="GameEvent:SHOW_NEW_SYMBOLS_IN_ANIM",T.SHOW_OPEN_TIMES_SYMBOL="GameEvent:SHOW_OPEN_TIMES_SYMBOL",T.SHOW_CHARACTER_FIRE="GameEvent:SHOW_CHARACTER_FIRE",T.SHOW_FIRE_BALL="GameEvent:SHOW_FIRE_BALL",T.SHOW_FIRE_BALL_QUICK_STOP="GameEvent:SHOW_FIRE_BALL_QUICK_STOP",T.SPEED_CHARACTER_FIRE_UP="GameEvent:SPEED_CHARACTER_FIRE_UP",T.REMOVE_FIRE_BALLS="GameEvent:REMOVE_FIRE_BALLS",T.SHOW_TIMES_SYMBOLS_UPGRADE="GameEvent:SHOW_TIMES_SYMBOLS_UPGRADE",T.SHOW_SCATTER_WIN="GameEvent:SHOW_SCATTER_WIN",T.SHOW_FG_INTRO_ALERT="GameEvent:SHOW_FG_INTRO_ALERT",T.SHOW_FG_SUMMARY_ALERT="GameEvent:SHOW_FG_SUMMARY_ALERT",T.SHOW_SYMBOLS_WIN="GameEvent:SHOW_SYMBOLS_WIN",T.REMOVE_SYMBOLS="GameEvent:REMOVE_SYMBOLS",T.PLAY_CURRENT_VIEW_FALL_ANIM="GameEvent:PLAY_CURRENT_VIEW_FALL_ANIM",T.SHOW_TIMES_MOVING="GameEvent:SHOW_TIMES_MOVING",T.SHOW_CLONE_TIMES_MOVING="GameEvent:SHOW_CLONE_TIMES_MOVING",T.HIDE_TIMES_LABEL="GameEvent:HIDE_TIMES_LABEL",T.EXPAND_WIN_AMOUNT="GameEvent:EXPAND_WIN_AMOUNT",T.UPDATE_TIMES="GameEvent:UPDATE_TIMES",T.MERGE_WIN_AMOUNT="GameEvent:MERGE_WIN_AMOUNT",T.UPDATE_FG_TOTAL_TIMES="GameEvent:UPDATE_FG_TOTAL_TIMES",T.PLAY_TIMES_SYMBOL_FUNCTION="GameEvent:PLAY_TIMES_SYMBOL_FUNCTION",T.CLONE_TIMES="GameEvent:CLONE_TIMES",T.SHOW_WIN_CASH="GameEvent:SHOW_WIN_CASH",T.UPDATE_WIN_AMOUNT="GameEvent:UPDATE_WIN_AMOUNT",T.QUICK_STOP_WIN_AMOUNT="GameEvent:QUICK_STOP_WIN_AMOUNT",T.QUICK_STOP_TOTAL_WINNINGS="GameEvent:QUICK_STOP_TOTAL_WINNINGS",T.UPDATE_FG_REMAINING="GameEvent:UPDATE_FG_REMAINING",T.INCREASE_FG_REMAINING="GameEvent:INCREASE_FG_REMAINING",T.SHAKE_NODE="GameEvent:SHAKE_NODE",T.PLAY_BGM="GameEvent:PLAY_BGM",T.PLAY_BTM="GameEvent:PLAY_BTM",T.STOP_BTM="GameEvent:STOP_BTM",T.MUSIC_VOLUME_MULTIPLE="GameEvent:MUSIC_VOLUME_MULTIPLE",T.CHANGE_GAME_STYLE="GameEvent:CHANGE_GAME_STYLE",T.SET_SYMBOL_VIEW_MASK="GameEvent:SET_SYMBOL_VIEW_MASK",T.SHOW_JP_WIN="GameEvent:SHOW_JP_WIN",T.SHOW_JP="GameEvent:SHOW_JP",T.SHOW_BIGWIN="GameEvent:SHOW_BIGWIN",T.SHOW_FULL_COMBO="GameEvent:SHOW_FULL_COMBO",T.SHOW_TRANSITION_IN="GameEvent:SHOW_TRANSITION_IN",T.SHOW_TRANSITION_OUT="GameEvent:SHOW_TRANSITION_OUT",T.SHOW_TIMES_A="GameEvent:SHOW_TIMES_A",T.SHOW_TIMES_B="GameEvent:SHOW_TIMES_B",T.SHOW_TIMES_LOCK="GameEvent:SHOW_TIMES_LOCK",T.SHOW_TIMES_STAGE="GameEvent:SHOW_TIMES_STAGE",T.TIMES_LOCK_OUT="GameEvent:TIMES_LOCK_OUT",T.TIMES_LOCK_ALLOUT="GameEvent:TIMES_LOCK_ALLOUT",T.SHOW_MEN_SPLIT_ANIM="GameEvent:SHOW_MEN_SPLIT_ANIM",T.SHOW_WOMEN_LOCK_ANIM="GameEvent:SHOW_WOMEN_LOCK_ANIM",T.START_QUICK_STOP="GameEvent:START_QUICK_STOP",T.OPEN_FEATURE_POPUP="GameEvent:OPEN_FEATURE_POPUP",T.CLOSE_FEATURE_POPUP="GameEvent:CLOSE_FEATURE_POPUP",T.SHOW_TREASURE_VIEW="GameEvent:SHOW_TREASURE_VIEW",T.SHOW_TOTEM_SYMBOL_WIN="GameEvent:SHOW_TOTEM_SYMBOL_WIN",T.PARSER_INIT_COMPLETED="GameEvent:PARSER_INIT_COMPLETED",T.PARSER_SPIN_COMPLETED="GameEvent:PARSER_SPIN_COMPLETED",T.PARSER_CLOSE_SPIN_COMPLETED="GameEvent:PARSER_CLOSE_SPIN_COMPLETED",T.EARLY_DATA_PARSER_TO_SPIN_DATA="GameEvent:EARLY_DATA_PARSER_TO_SPIN_DATA",T.EARLY_CLOSE_DATA_PARSER_TO_DATA="GameEvent:EARLY_CLOSE_DATA_PARSER_TO_DATA",T.WAIT_EARLY_DATA_RETRY="GameEvent:WAIT_EARLY_DATA_RETRY",T.WAIT_EARLY_CLOSE_DATA_RETRY="GameEvent:WAIT_EARLY_CLOSE_DATA_RETRY",T.KILL_WAIT_EARLY_DATA_RETRY_INTERVAL="GameEvent:KILL_WAIT_EARLY_DATA_RETRY_INTERVAL",T.KILL_WAIT_EARLY_CLOSE_DATA_RETRY_INTERVAL="GameEvent:KILL_WAIT_EARLY_CLOSE_DATA_RETRY_INTERVAL",T.CREATE_REPLAY_FLOW="GameEvent:CREATE_REPLAY_FLOW",T.CREATE_REPLAY_SPIN_FLOW="GameEvent:CREATE_REPLAY_SPIN_FLOW",T.CREATE_REPLAY_STOP_SPIN_FLOW="GameEvent:CREATE_REPLAY_STOP_SPIN_FLOW",T.CREATE_REPLAY_SPIN_COMPLETE_FLOW="GameEvent:CREATE_REPLAY_SPIN_COMPLETE_FLOW",T.CREATE_REPLAY_CLOSE_SPIN_FLOW="GameEvent:CREATE_REPLAY_CLOSE_SPIN_FLOW",T.PARSER_REPLAY_COMPLETED="GameEvent:PARSER_REPLAY_COMPLETED",T.CREATE_REPLAY_QUICK_STOP_FLOW="GameEvent:CREATE_REPLAY_QUICK_STOP_FLOW",T.MOVE_SCATTER="GameEvent:MOVE_SCATTER",T.BACK_SCATTER="GameEvent:BACK_SCATTER",T.MOVE_SPLIT="GameEvent:MOVE_SPLIT",T.BACK_SPLIT="GameEvent:BACK_SPLIT",T.SHOW_DARK="GameEvent:SHOW_DARK",T.HIDE_DARK="GameEvent:HIDE_DARK",T.SPLIT_HIDE_DARK="GameEVent:SPLIT_HIDE_DARK",T.SHOW_SPLIT_FIRE_BALL="GameEVent:SHOW_SPLIT_FIRE_BALL",T.REPLAY_START_QUICK_STOP="GameEvent:REPLAY_START_QUICK_STOP",T.PROCESS_REPLAY_IN_GAME="GameEvent:PROCESS_REPLAY_IN_GAME",T.RESET_AND_OPEN_GAME_VIEW="GameEvent:RESET_AND_OPEN_GAME_VIEW",S._RF.pop()}}}));

System.register("chunks:///_virtual/GameHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AutoPlayModel.ts","./SlotFrameworkEvent.ts","./GameHandlerBase.ts","./GameData.ts","./GameEvent.ts","./GameSender.ts","./GameService.ts"],(function(e){"use strict";var t,n,a,r,o,E,s,i,S,_,d,l;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy,r=e.tween},function(e){o=e.default},function(e){E=e.SlotFrameworkEvent},function(e){s=e.GameHandlerBase},function(e){i=e.EInitName,S=e.default},function(e){_=e.GameEvent},function(e){d=e.GameSender},function(e){l=e.GameService}],execute:function(){a._RF.push({},"99d2d5XLeZNFZU0pol7HdFF","GameHandler",void 0),e("GameHandler",function(e){function a(){return e.apply(this,arguments)||this}return t(a,e),a.prototype.addListeners=function(){var e=this;this.on(E.SEND_SPIN_REQUEST,(function(e){var t=null==e?void 0:e.data,n=t.spinId,a=t.stakeVO,r=t.test,o=t.updateStake;App.senderManager.get(d).spin(a,n,r,o)})),this.on(E.SEND_EARLY_SPIN_REQUEST,(function(t){var n=null==t?void 0:t.data,a=n.spinId,E=n.stakeVO,s=n.test,i=n.forceClose;o.active&&e.data.isOpenEarlyFlag&&(Log.w("SEND_OUT_EARLY_SPIN_REQUEST::::::::"),e.data.earlyData=null,e.data.delayEarlyTween=r(e).delay(.4).call((function(){e.data.isSendOutEarlyFlag=!0,e.data.isSendClose=!0,App.senderManager.get(d).earlySpin(E,a,s,!1,i)})).start())})),this.on(E.SEND_CLOSE_REQUEST,(function(t){var n=t.data;e.data.isSendClose=!0,App.senderManager.get(d).closeSpin(n)})),this.on(E.SEND_EARLY_CLOSE_REQUEST,(function(e){var t=e.data.spinId;App.senderManager.get(d).earlyCloseSpin(t,e.complete)})),this.on(E.SEND_UPDATE_AVATAR_REQUEST,(function(e){var t=e.avatarId;App.senderManager.get(d).updateAvatar(t)})),this.on(E.SEND_GET_SLOT_TABLE_PAGE_DATA_REQUEST,(function(e){App.senderManager.get(d).getSlotTablePage(e)})),this.on(E.SEND_GET_SLOT_TABLES_DATA_REQUEST,(function(){App.senderManager.get(d).getSlotTableData()})),this.on(E.SEND_GET_SLOT_TABLE_DETAIL_REQUEST,(function(e){var t=e.roomId;App.senderManager.get(d).getSlotTableDetail({roomId:t})})),this.on(E.SEND_CHANGE_SLOT_TABLE_REQUEST,(function(e){App.senderManager.get(d).changeSlotTable(e)})),this.on(E.SEND_LOCK_SLOT_TABLE_REQUEST,(function(e){App.senderManager.get(d).lockSlotTable(e)})),this.on(E.SEND_SETTING_REQUEST,(function(e){App.senderManager.get(d).setting(e)})),this.on(E.SEND_GET_BET_RECORDS_REQUEST,(function(e){App.senderManager.get(d).getBetRecords(e)})),this.on(E.SEND_UPDATE_DISPLAYNAME_REQUEST,(function(e){App.senderManager.get(d).updateDisplayName(e)})),this.on(E.SEND_GET_HISTORY_REQUEST,(function(e){App.senderManager.get(d).getHistoryRecords(e)})),this.on(E.SEND_GET_RANKING_LIST_REQUEST,(function(e){App.senderManager.get(d).getSlotBetRanksList(e)})),this.on(E.SEND_GET_RANKING_REPLAY_REQUEST,(function(e){App.senderManager.get(d).getSlotBetRanksReplay(e)})),this.on(E.REPLAY_BACK_TO_GAME,(function(){e.data.restoreCurrentGameData(),dispatch(_.RESET_AND_OPEN_GAME_VIEW,{data:i.INIT_GAME})}))},n(a,[{key:"data",get:function(){return App.dataCenter.get(S)}},{key:"service",get:function(){return App.serviceManager.get(l)}}]),a}(s)).module=App.dataCenter.get(S).module,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameLanguage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageDelegate.ts","./GameData.ts","./GameLanguages.ts"],(function(e){"use strict";var t,n,a,u,i,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){a=e.injectLanguageData,u=e.LanguageDelegate},function(e){i=e.default},function(e){o=e}],execute:function(){var c;n._RF.push({},"f1193TL7XRNTotDdk19nkad","GameLanguage",void 0);e("GameLanguage",a(c=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(t=e.call.apply(e,[this].concat(a))||this).bundle=i.module,t}return t(n,e),n.prototype.init=function(){this.importLanguages(o)},n}(u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameLanguages.ts",["cc"],(function(a){"use strict";var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){e._RF.push({},"81245kTwHZKeorW+mlZYtcM","GameLanguages",void 0);a("ZH_TW",{language:"zh-tw",data:{confirm:"確定",cancel:"取消"}}),a("ZH_CN",{language:"zh-cn",data:{confirm:"确定",cancel:"取消"}}),a("EN",{language:"en",data:{confirm:"Sure",cancel:"Cancel"}}),a("VN",{language:"vn",data:{confirm:"",cancel:""}});e._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Bundles.ts","./ExitUtils.ts","./Resource.ts","./ResourceLoader.ts","./Logic.ts","./AutoPlayModel.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./PlatformModel.ts","./ReadyBundleModel.ts","./ParseResponse.ts","./BigwinView.ts","./FreeGameAlertView.ts","./GameData.ts","./GameEvent.ts","./GameSender.ts","./GameView.ts","./DefinitionModel.ts","./BuyFeatureView.ts","./FlowIDs.ts","./GameConfigModel.ts","./ReplayModel.ts","./TreasuresView.ts","./type2.ts"],(function(e){"use strict";var t,a,n,i,r,o,l,s,u,c,p,E,d,A,_,f,S,I,y,R,T,g,h,L,P,m,v,w,D,C,O,N,b,M,U;return{setters:[function(e){t=e.inheritsLoose,a=e.asyncToGenerator,n=e.regeneratorRuntime,i=e.createClass},function(e){r=e.cclegacy,o=e.Tween,l=e.game,s=e.tween},function(e){u=e.ViewZOrder},function(e){c=e.EBundles},function(e){p=e.ExitUtils},function(e){E=e.Resource},function(e){d=e.default},function(e){A=e.Logic},function(e){_=e.default},function(e){f=e.default},function(e){S=e.SlotFrameworkEvent},function(e){I=e.default},function(e){y=e.default},function(e){R=e.default},function(e){T=e.BigwinView},function(e){g=e.FreeGameAlertView},function(e){h=e.EInitName,L=e.default},function(e){P=e.GameEvent},function(e){m=e.GameSender},function(e){v=e.default},function(e){w=e.default},function(e){D=e.BuyFeatureView},function(e){C=e.FlowIDs},function(e){O=e.default,N=e.EBGM},function(e){b=e.default},function(e){M=e.TreasuresView},function(e){U=e.ESpinStatus}],execute:function(){r._RF.push({},"eab18k4U4VBmL9CvuJA0z/Q","GameLogic",void 0);e("GameLogic",function(e){function r(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).loader=new d,t.earlySpinDelayingEvent=null,t.earlySpinDelayingSetTimeout=null,t.earlyIntervalId=1,t}t(r,e);var A=r.prototype;return A.onLoad=function(t){e.prototype.onLoad.call(this,t),this._init()},A.onDestroy=function(){this.loader.unLoadResources(),this.data.clear(),e.prototype.onDestroy.call(this)},A.start=function(){App.senderManager.get(m).init()},A.reset=function(){o.stopAll(),App.flowManager.killAllFlow(),App.uiManager.closeExcept([]),dispatch(S.UPDATE_SPIN_STATUS,{data:U.IDLE}),this.removeAllEvents()},A._init=function(){this.loadResources()},A.loadResources=function(){this.loader.getLoadResources=function(){return[]},this.loader.onLoadComplete=function(e){E.LoaderError.SUCCESS},this.loader.loadResources()},A.addEvents=function(){var e=this;this.on(S.INIT_RESPONSE,(function(e){e.engine.gameState.length&&R.parseNewInit(e)})),this.on(S.SPIN_RESPONSE,(function(e){dispatch(S.UPDATE_USER_SPIN_ID,{data:{spinId:e.engine.spinId}}),dispatch(S.UPDATE_USER_BALANCE,{data:{balance:e.platform.player.balance.amount}}),R.parseNewSpin(e)})),this.on(S.EARLY_SPIN_RESPONSE,(function(e){R.parseEarlySpin(e)})),this.on(S.EARLY_CLOSE_RESPONSE,(function(e){R.tempEarlyClose(e)})),this.on(S.CLOSE_RESPONSE,(function(e){R.parseCloseSpin(e)})),this.on(S.REPLAY_RESPONSE,(function(e){R.parseReplay(e)})),this.on(S.REPLAY_AGAIN,(function(e){R.parseReplayAgain(e)})),this.on(S.WRAPPER_SERVICE_CLOSE,(function(e){var t={text:App.getLanguage("disconnect",[],c[c.wrapper]),confirmCb:function(e){a()},bbrCb:function(e){},needCloseAlert:!1,tag:u.TopErrorAlert,isDisableBlockInput:b.isReplay&&l.isPaused()},a=function(){p.exit()};App.gameAlert.show(t,u.TopErrorAlert)})),this.on(S.WARN_RESPONSE,(function(e){var t={text:e.message,confirmCb:function(e){a()},bbrCb:function(e){},needCloseAlert:!1,tag:u.TopErrorAlert},a=function(){p.exit()};App.gameAlert.show(t,u.TopErrorAlert)})),this.on(S.CLICK_GAME_LOADING_CONFIRM_BTN,(function(){e.view.init()})),this.on(P.PARSER_SPIN_COMPLETED,(function(){dispatch(P.CREATE_STOP_SPIN_FLOW)})),this.on(P.START_QUICK_STOP,(function(){o.stopAllByTarget(e)})),this.on(P.PARSER_CLOSE_SPIN_COMPLETED,(function(){e.data.getIsFGFinish()||dispatch(P.SPIN_CLOSED_FLOW)})),this.on(P.QUICK_STOP_TOTAL_WINNINGS,(function(e){dispatch(S.QUICK_STOP_TOTAL_WINNINGS,{data:e.data})})),this.on(P.SPIN_START,(function(){})),this.on(P.SPIN_CLOSED,(function(){})),this.on(S.SELECT_AUTO_SPIN_COUNT,(function(e){var t=e.data,a=I.getData().player.settings.autoPlay.numberOfPlays[t];_.active=!0,_.spinsRemaining=a,_.active&&dispatch(P.CREATE_SPIN_FLOW,{data:{spinId:null,test:null}})})),this.on(S.STOP_AUTO_SPIN,(function(){if(_.active=!1,_.spinsRemaining=0,App.flowManager.killOneFlow(C.EARLY_SPIN_FLOW),e.data.isEarlyCloseFlag=!1,e.data.isEarlyFlag=!1,e.data.isSendOutEarlyFlag)null==e.data.earlyData?Log.w("已送出預跑但還未收到資料"):(Log.w("已送出預跑且收到資料"),clearInterval(e.earlyIntervalId),e.earlyIntervalId>-1&&(e.earlyIntervalId=-1,dispatch(P.CREATE_SPIN_FLOW,{data:{spinId:null,test:null,earlySpin:!0}})));else{Log.w("尚未送出可直接取消預跑"),e.data.delayEarlyTween&&(e.data.delayEarlyTween.stop(),e.data.delayEarlyTween.removeSelf());var t=!1;e.earlyIntervalId>-1&&(t=!0,clearInterval(e.earlyIntervalId),e.earlyIntervalId=-1),e.data.isOpenEarlyFlag&&(e.data.isOpenEarlyFlag=!1,e.data.isSendClose||(Log.w("還未結算:::::::::::"),t&&dispatch(S.SEND_CLOSE_REQUEST,{data:e.data.getData().spinId})))}})),this.on(P.EARLY_SPIN_DELAYING,(function(t){e.earlySpinDelayingEvent=t;e.data.earlySpinDelaying=!0;var a=O.quickStopCount,n=O.isTurbo;clearTimeout(e.earlySpinDelayingSetTimeout),1===a||n?(clearTimeout(e.earlySpinDelayingSetTimeout),t.complete(),e.data.earlySpinDelaying=!1):e.earlySpinDelayingSetTimeout=setTimeout((function(){t.complete(),e.data.earlySpinDelaying=!1}),1875)})),this.on(P.SET_EARLY_SPIN_DELAYING_COMPLETED,(function(){e.earlySpinDelayingEvent&&e.earlySpinDelayingEvent.complete()})),this.on(P.AUTO_SPIN_STATUS,(function(){})),this.once(S.SWIPE_UP,(function(){y.isComplete()&&(App.gameAlert.isCurrentShow(u.TopErrorAlert)||App.gameLoading.complete())})),this.on(P.EARLY_DATA_PARSER_TO_SPIN_DATA,(function(){var t=e.data.earlyData;Log.w("EARLY_DATA_PARSER_TO_SPIN_DATA::::",t),I.amount=t.platform.player.balance.amount,R.parseNewEarlySpin(t),dispatch(S.UPDATE_USER_SPIN_ID,{data:{spinId:t.engine.spinId}}),dispatch(S.UPDATE_USER_BALANCE,{data:{balance:t.platform.player.balance.amount}}),dispatch(P.PARSER_SPIN_COMPLETED)})),this.on(P.EARLY_CLOSE_DATA_PARSER_TO_DATA,(function(){var t=e.data.earlyCloseData;e.data.isEarlyCloseFlag=!1,I.amount=t.platform.player.balance.amount,dispatch(S.UPDATE_USER_BALANCE,{data:{balance:t.platform.player.balance.amount}}),dispatch(P.PARSER_CLOSE_SPIN_COMPLETED),e.data.earlyCloseData=null})),this.on(P.WAIT_EARLY_DATA_RETRY,(function(t){var a=0;e.data.waitEarlyDataRetryInterval=setInterval((function(){var n=e.data,i=n.isEarlyFlag,r=n.earlyData;if(++a>333){Log.e("EARLY_DATA timeout "+30*a/1e3+"s"),clearInterval(e.data.waitEarlyDataRetryInterval);var o={text:"early spin"+App.getLanguage("timeoutError",[],c[c.wrapper]),confirmCb:function(e){l()},bbrCb:function(e){},needCloseAlert:!1,code:"front",tag:u.TopErrorAlert},l=function(){p.exit()};App.gameAlert.show(o,u.TopErrorAlert)}i&&r&&(t.complete(),clearInterval(e.data.waitEarlyDataRetryInterval))}),30)})),this.on(P.WAIT_EARLY_SPIN_RESPONSE,(function(){null==e.data.earlyData&&e.data.isOpenEarlyFlag&&(e.earlyIntervalId=setInterval((function(){e.data.earlyData&&(clearInterval(e.earlyIntervalId),dispatch(P.CREATE_SPIN_FLOW,{data:{spinId:null,test:null,earlySpin:!0}}),e.earlyIntervalId=-1)}),100))})),this.on(P.KILL_WAIT_EARLY_DATA_RETRY_INTERVAL,(function(t){clearInterval(e.data.waitEarlyDataRetryInterval)})),this.on(P.KILL_WAIT_EARLY_CLOSE_DATA_RETRY_INTERVAL,(function(t){clearInterval(e.data.waitEarlyCloseDataRetryInterval)})),this.on(P.WAIT_EARLY_CLOSE_DATA_RETRY,(function(t){var a=0;e.data.waitEarlyCloseDataRetryInterval=setInterval((function(){var n=e.data,i=n.isEarlyCloseFlag,r=n.earlyCloseData;if(a++,Log.d("wait close",a),a>333){Log.e("EARLY_CLOSE_DATA timeout "+30*a/1e3+"s"),clearInterval(e.data.waitEarlyCloseDataRetryInterval);var o={text:"early close"+App.getLanguage("timeoutError",[],c[c.wrapper]),confirmCb:function(e){l()},bbrCb:function(e){},needCloseAlert:!1,code:"front",tag:u.TopErrorAlert},l=function(){p.exit()};App.gameAlert.show(o,u.TopErrorAlert)}i&&r&&(t.complete(),clearInterval(e.data.waitEarlyCloseDataRetryInterval))}),30)})),this.on(P.SHOW_BIGWIN,(function(t){var i=t.data,r=e.data.getData().parser.bigwinReach.level,o=w.getData(),l=o.smallPrizeDelay,c=o.bigPrizeDelay,p=i.isRoundWin?0:r<=3?l:c;App.globalAudio.isMusicOn=!1,s(e).delay(p).call(a(n().mark((function a(){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return App.globalAudio.isMusicOn=!0,a.next=3,App.uiManager.open({type:T,bundle:e.bundle,zIndex:u.UI,name:"BIG WIN"});case 3:a.sent.showBigwin(t.complete,t.data);case 5:case"end":return a.stop()}}),a)})))).start()})),this.on(P.SHOW_FG_INTRO_ALERT,(function(t){App.uiManager.open({type:g,bundle:e.bundle,zIndex:u.UI,name:"免費遊戲彈窗"}).then((function(e){e.showIntroAlert()}))})),this.on(P.SHOW_FG_SUMMARY_ALERT,(function(t){App.uiManager.open({type:g,bundle:e.bundle,zIndex:u.UI,name:"免費遊戲彈窗"}).then((function(e){e.showSummaryAlert(t.complete)}))})),this.on(P.OPEN_FEATURE_POPUP,a(n().mark((function t(a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,App.uiManager.open({type:D,bundle:e.bundle,zIndex:u.UI,name:"購買免費遊戲"});case 2:t.sent.openPopup();case 4:case"end":return t.stop()}}),t)})))),this.on(P.SHOW_TREASURE_VIEW,a(n().mark((function t(a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Log.e("show treasure win:::::::::::::::"),App.globalAudio.pauseMusic(),t.next=4,App.uiManager.open({type:M,bundle:e.bundle,zIndex:u.UI,name:"BIG WIN"});case 4:t.sent.showTreasureWin(a.complete);case 6:case"end":return t.stop()}}),t)})))),this.on(P.PARSER_REPLAY_COMPLETED,(function(t){t?(e.view.initReplay(),e.view.playBGM(N.MAINGAME)):e.view.againReplayUpdateAmount(),dispatch(P.CREATE_REPLAY_FLOW)})),this.on(S.REPLAY_NEXT_SPIN,(function(){b.index++;var t=b.index,a=b.getData().betData.theResult[t];e.data.setReplayCurrentView(a),dispatch(P.CREATE_REPLAY_STOP_SPIN_FLOW)})),this.on(P.REPLAY_START_QUICK_STOP,(function(){e.view.replayQuickStop()})),this.on(P.PROCESS_REPLAY_IN_GAME,(function(t){e.view.reset(),s(e).delay(.5).call(a(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,App.uiManager.open({type:v,bundle:e.bundle,args:h.INIT_REPLAY});case 2:case"end":return t.stop()}}),t)})))).start()})),this.on(P.RESET_AND_OPEN_GAME_VIEW,(function(t){b.reset();var i=t.data;e.view.reset(),s(e).delay(.5).call(a(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,App.uiManager.open({type:v,bundle:e.bundle,args:i});case 2:case"end":return t.stop()}}),t)})))).start()})),this.on(P.SHAKE_NODE,(function(t){e.view.shakeView()})),this.on(P.PLAY_BGM,(function(t){e.view.playBGM(t.data)})),this.on(P.PLAY_BTM,(function(t){var a=t.data,n=a.url,i=a.loop;e.view.playBTM(n,i)})),this.on(P.STOP_BTM,(function(t){e.view.stopBTM(t.data)})),this.on(P.MUSIC_VOLUME_MULTIPLE,(function(t){e.view.multipleMusicVolume(t.data)})),this.on(S.BUY_FEATURE_RESPONSE,(function(t){e.view.buyFeatureSpin(t.data)}))},i(r,[{key:"data",get:function(){return App.dataCenter.get(L)}},{key:"slotData",get:function(){return App.dataCenter.get(f)}},{key:"view",get:function(){return this.gameView}}]),r}(A));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameSender.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bundles.ts","./ServerModel.ts","./CmmUtils.ts","./Http.ts","./SlotFrameworkEvent.ts","./GameService.ts","./type2.ts","./Config.ts","./GameSenderBase.ts","./DefinitionModel.ts","./GameStateModel.ts","./InitialModel.ts","./PlatformModel.ts","./SettingsModel.ts","./SlotTableModel.ts","./SocketModel.ts","./ReplayModel.ts","./UrlUtils2.ts","./GameData.ts","./GameConfigModel.ts","./GameEvent.ts","./SlotFrameworkData.ts","./NoTouchingView.ts"],(function(e){"use strict";var t,s,a,n,o,r,i,u,S,l,d,c,p,E,R,f,m,T,h,g,A,_,O,C,v,L,P,N,D,I,w,q,b,y;return{setters:[function(e){t=e.inheritsLoose,s=e.extends,a=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e.sys},function(e){u=e.EBundles},function(e){S=e.default,l=e.EServerMode},function(e){d=e.CmmUtils},function(e){c=e.Http},function(e){p=e.SlotFrameworkEvent},function(e){E=e.GameService},function(e){R=e.ESocketRequestName,f=e.ESpinStatus,m=e.EDebugLogLevel},function(e){T=e.ViewZOrder},function(e){h=e.GameSenderBase},function(e){g=e.default},function(e){A=e.default},function(e){_=e.default},function(e){O=e.default},function(e){C=e.default},function(e){v=e.default},function(e){L=e.default},function(e){P=e.default,N=e.EReplayMode},function(e){D=e.default},function(e){I=e.default},function(e){w=e.default},function(e){q=e.GameEvent},function(e){b=e.default},function(e){y=e.default}],execute:function(){r._RF.push({},"fbe8fGj+GJDzq2bvbdH7aMn","GameSender",void 0),e("GameSender",function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var h=r.prototype;return h.initial=function(){var e=this;if(S.mode!==l.STATIC){var t={token:L.currentToken,clientType:d.getClientType(),deviceInfo:{browser:{name:i.browserType,version:i.browserVersion},os:{name:i.os,version:i.osVersion,versionName:i.osMainVersion},platform:{type:i.platform},engine:{name:"cocos creator 3.7.2"}}};return new Promise((function(s,a){e.send("initial",t,(function(t){if(t.status==c.ServerStatus.SUCCESS){if(t.code)return Log.e("NETWORK_ERROR: ",t),void e.showAlert(t.message,{needCloseAlert:!1,code:null==t?void 0:t.code});try{e.setToken(t),g.setData(t.engine.definition),A.setData(t.engine.gameState),O.setData(t.platform),C.setData(t.platform.player.settings),_.setData(t),dispatch(p.INIT_RESPONSE,t),s()}catch(e){var a={title:App.getLanguage("alertHint",[],u[u.slotFramework]),text:"initial data error",bbrCb:function(){},needCloseAlert:!1,code:e};App.gameAlert.show(a)}}else Log.e("NETWORK_ERROR: ",t),e.showAlert(t.message,{needCloseAlert:!1,code:null==t?void 0:t.code})}))}))}},h.spin=function(){var e=n(o().mark((function e(t,a,n,r){var i,u,d,E,T,h=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return i=n.type,(u=w.getData().filePaths.testSpinDatas)&&(d=App.cache.get(I.module,u).data)&&d.length>0&&(S.mode=l.STATIC,Log.e("fake spin data:::::::",d[i].json),E=d[i].json,A.setData(E.engine.gameState),O.amount=E.platform.player.balance.amount,dispatch(p.SPIN_RESPONSE,E)),e.abrupt("return");case 5:T=s({request:R.SPIN},t,{updateStake:r},a&&{spinId:a},{pools:{"jp-mini":this.slotData.tempJpPools["jp-mini"],"jp-minor":this.slotData.tempJpPools["jp-minor"],"jp-major":this.slotData.tempJpPools["jp-major"],"jp-grand":this.slotData.tempJpPools["jp-grand"]}}),this.send(T.request,T,(function(e){if(e.status==c.ServerStatus.SUCCESS)h.setToken(e),A.setData(e.engine.gameState),O.amount=e.platform.player.balance.amount,dispatch(p.SPIN_RESPONSE,e);else if(e.status==c.ServerStatus.ERROR_SPIN_ONE_MORE){var t,s,n,o;h.setToken(e),dispatch(p.UPDATE_SPIN_STATUS,{data:f.IDLE}),Log.e("後端->前端 多打了一次spin"),h.debugLog({id:a||h.data.getData().gameState.spinId,level:m.ERROR,message:"後端->前端 多打了一次spin",data:{requestVO:T,currentData:null==(t=h.data)||null==(s=t.getData())?void 0:s.gameState,preData:null==(n=h.data)||null==(o=n.preData)?void 0:o.gameState}})}else Log.e("NETWORK_ERROR: ",e),h.showAlert(e.message,{needCloseAlert:!1,code:e.code})}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,s,a,n){return e.apply(this,arguments)}}(),h.earlySpin=function(e,t,a,n,o){var r=this;if(S.mode!==l.STATIC){var i=s({request:R.SPIN},e,{updateStake:n},t&&{spinId:t},{forceClose:o,pools:{"jp-mini":this.slotData.tempJpPools["jp-mini"],"jp-minor":this.slotData.tempJpPools["jp-minor"],"jp-major":this.slotData.tempJpPools["jp-major"],"jp-grand":this.slotData.tempJpPools["jp-grand"]}});Log.w("early request::::::::::",i,o),this.send(i.request,i,(function(e){e.status==c.ServerStatus.SUCCESS?(r.setToken(e),dispatch(p.EARLY_SPIN_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),r.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))}},h.closeSpin=function(e){var t=this;if(S.mode!=l.STATIC){var s={request:R.CLOSE_SPIN,spinId:e};this.send(s.request,s,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),O.amount=e.platform.player.balance.amount,dispatch(p.CLOSE_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))}else{var a=w.getData().filePaths.testCloseSpinDatas;if(a){var n=App.cache.get(I.module,a).data;if(n&&n.length>0){var o=n[0].json;O.amount=o.platform.player.balance.amount,dispatch(p.CLOSE_RESPONSE,o),S.mode=l.ONLINE}}}},h.earlyCloseSpin=function(e,t){var s=this,a={request:R.CLOSE_SPIN,spinId:e};this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(s.setToken(e),t&&t(),dispatch(p.EARLY_CLOSE_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),s.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.setting=function(e){var t=this,a=s({request:R.UPDATE_SETTINGS},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?t.setToken(e):Log.e("update setting NETWORK_ERROR: ",e)}))},h.getBetRecords=function(e){var t=this,a=s({request:R.GET_BET_RECORDS},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),dispatch(p.BET_RECORDS_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.getHistoryRecords=function(e){var t=this,a=s({request:R.GET_USER_REPORT},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),dispatch(p.GET_HISTORY_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.getSlotTablePage=function(e){var t=this,a=s({request:R.GET_SLOT_TABLES},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),v.setData(e),dispatch(p.SLOT_TABLE_PAGE_DATA_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.getSlotTableData=function(){var e=this,t={request:R.GET_SLOT_TABLES};this.send(t.request,t,(function(t){t.status==c.ServerStatus.SUCCESS?(e.setToken(t),v.setData(t),dispatch(p.SLOT_TABLES_RESPONSE,t)):(Log.e("NETWORK_ERROR: ",t),e.showAlert(t.message,{needCloseAlert:!1,code:t.code}))}))},h.getSlotTable=function(e){var t=this,a=s({request:R.GET_SLOT_TABLES},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),v.setData(e),dispatch(p.SLOT_TABLE_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.getSlotTableDetail=function(e){var t=this,a=s({request:R.GET_SLOT_TABLE_DETAIL},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),v.setData(e),dispatch(p.SLOT_TABLE_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.changeSlotTable=function(e){var t=this,a=s({request:R.UPDATE_SLOT_TABLE},e);this.send(a.request,a,(function(e){if(e.status!==c.ServerStatus.BACKEND_ERROR)if(t.setToken(e),e.status!==c.ServerStatus.NOT_MODIFIED){var s=new URLSearchParams(window.location.search);s.set("table","1");var a=window.location.pathname+"?"+s.toString();window.location.href=a}else App.gameAlert.show({text:e.message,confirmCb:function(){dispatch(p.SYNC_SOLT_TABLES)},bbrCb:function(){}},T.TopErrorAlert);else t.showAlert(e.message,{needCloseAlert:!1,code:e.code})}))},h.lockSlotTable=function(e){var t=this,a=s({request:R.LOCK_SLOT_TABLE},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),dispatch(p.LOCK_SLOT_TABLE_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.buyFeature=function(e,t){var a=this,n=s({request:R.SPIN,action:"buyFeature",clientType:"web",featureIndex:0,featureValue:"freeGame"},e,{updateStake:!0,pools:{"jp-mini":this.slotData.tempJpPools["jp-mini"],"jp-minor":this.slotData.tempJpPools["jp-minor"],"jp-major":this.slotData.tempJpPools["jp-major"],"jp-grand":this.slotData.tempJpPools["jp-grand"]}});this.send(n.request,n,(function(e){e.status==c.ServerStatus.SUCCESS?(a.setToken(e),dispatch(p.BUY_FEATURE_RESPONSE,{data:e.engine.gameState.spinId})):(Log.e("NETWORK_ERROR: ",e),App.gameAlert.show({text:e.message,confirmCb:function(){},bbrCb:function(){}}))}))},h.updateAvatar=function(e){var t={request:R.UPDATE_AVATAR,avatarId:e};this.send(t.request,t),O.getData().player.avatar=e,O.getData().player.avatarUrl=D.GetAvatarUrl(e),dispatch(p.UPDATE_AVATAR_COMPLETED_RESPONSE)},h.updateDisplayName=function(e){var t=this,s={request:R.UPDATE_DISPLAYNAME,displayName:e};this.send(s.request,s,(function(s){t.setToken(s),s.status!==c.ServerStatus.REQUEST_ERROR?(O.getData().player.displayName=e,dispatch(p.UPDATE_DISPLAYNAME_RESPONSE)):dispatch(p.SET_DISPLAYNAME_TIP,s.message)}))},h.replay=function(){var e=this,t=new URL(window.location.href).searchParams.get("spinId"),s={request:R.REPLAY,spinId:t};this.send(s.request,s,(function(t){t.status==c.ServerStatus.SUCCESS?(P.setData(t),g.setData(t.definition),dispatch(p.REPLAY_RESPONSE,t)):(Log.e("NETWORK_ERROR: ",t),e.showAlert(t.message,{needCloseAlert:!1}))}))},h.getSlotBetRanksList=function(e){var t=this,a=s({request:R.GET_SLOT_BET_RANKS_LIST,action:"list"},e);this.send(a.request,a,(function(e){e.status==c.ServerStatus.SUCCESS?(t.setToken(e),dispatch(p.GET_RANKING_LIST_RESPONSE,e)):(Log.e("NETWORK_ERROR: ",e),t.showAlert(e.message,{needCloseAlert:!1,code:e.code}))}))},h.getSlotBetRanksReplay=function(e){var t=this,a=s({request:R.GET_SLOT_BET_RANKS_REPLAY,action:"replay"},e);if(App.dataCenter.get(b).getData().spinStatus===f.IDLE)return new Promise((function(e,s){t.send(a.request,a,(function(s){P.replayMode=N.RANKING_REPLAY,s.status==c.ServerStatus.SUCCESS?(P.isReplay=!0,t.data.saveOriginGameData(),P.setData(s),s.definition&&g.setData(s.definition),dispatch(p.REPLAY_RESPONSE,s),dispatch(q.PROCESS_REPLAY_IN_GAME,{data:s}),e()):(Log.e("NETWORK_ERROR: ",s),t.showAlert(s.message,{needCloseAlert:!1}))}))}));App.uiManager.close(y);var n={text:"請等待遊戲結束後，再進行重播",confirmCb:function(){dispatch(p.PLAY_CLICK_BTM)},bbrCb:function(){dispatch(p.PLAY_CLICK_BTM)},needCloseAlert:!0,tag:T.Tips};App.gameAlert.show(n,T.Tips)},a(r,[{key:"service",get:function(){return App.serviceManager.get(E)}},{key:"data",get:function(){return App.dataCenter.get(I)}}]),r}(h)).module=App.dataCenter.get(I).module,r._RF.pop()}}}));

System.register("chunks:///_virtual/GameService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./res-type.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./GameServiceBase.ts","./GameData.ts"],(function(t){"use strict";var e,a,n,s,i,o,c,r;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy},function(t){s=t.ENotifyTypes},function(t){i=t.default},function(t){o=t.SlotFrameworkEvent},function(t){c=t.GameServiceBase},function(t){r=t.default}],execute:function(){n._RF.push({},"46b28pe9U9I5ZdY9xfVIQ+3","GameService",void 0),t("GameService",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.addSocketListeners=function(){var t=this;this.on("echo",(function(t){})),this.on("warning",(function(t){dispatch(o.WARN_RESPONSE,t)})),this.on("error",(function(t){dispatch(o.ERROR_RESPONSE,t)})),this.on("notify",(function(e){switch(e.type){case s.JACKPOT_UPDATE:t.slotData.tempJpPools={"jp-mini":e.data["jp-mini"],"jp-minor":e.data["jp-minor"],"jp-major":e.data["jp-major"],"jp-grand":e.data["jp-grand"]},dispatch(o.NOTIFY_JACKPOT_RESPONSE,{data:e});break;case s.SYSTEM:dispatch(o.NOTIFY_SYSTEM_RESPONSE,{data:e});break;case s.JACKPOT_UPDATE:case s.BIG_WIN:case s.SUPER_WIN:case s.MEGA_WIN:case s.ULTRA_WIN:case s.LEGENDARY_WIN:case s.JP_MINI:case s.JP_MINOR:case s.JP_MAJOR:case s.JP_GRAND:dispatch(o.NOTIFY_PRIZE_RESPONSE,{data:e})}})),this.on("slotTableUpdated",(function(t){dispatch(o.SLOT_TABLES_UPDATED_RESPONSE,t)}))},a(n,[{key:"slotData",get:function(){return App.dataCenter.get(i)}}]),n}(c)).module=App.dataCenter.get(r).module,n._RF.pop()}}}));

System.register("chunks:///_virtual/GameSymbolID.ts",["cc","./UrlUtils.ts"],(function(M){"use strict";var S,E,t;return{setters:[function(M){S=M.cclegacy,E=M.Vec3},function(M){t=M.default}],execute:function(){var e,A,_,s;M({EBackendSymbolID:void 0,EReelStatus:void 0,ESymbolAnimType:void 0,ESymbolStatus:void 0}),S._RF.push({},"ed54f++FrZK6LMrYcjegPaG","GameSymbolID",void 0),function(M){M[M.BLUR=0]="BLUR",M[M.STATIC=1]="STATIC",M[M.ANIM=2]="ANIM",M[M.WIN=3]="WIN"}(e||(e=M("ESymbolStatus",{}))),function(M){M.LOOP="loop",M.WIN="win",M.IN="in",M.OUT="out",M.TEASE="tease",M.FUNCTION="function",M.LV1="lv1",M.LV2="lv2",M.LV3="lv3",M.HIT="hit"}(A||(A=M("ESymbolAnimType",{}))),function(M){M.SPINNING="SPINNING",M.STOPPING="STOPPING",M.STATIC="STATIC"}(_||(_=M("EReelStatus",{}))),function(M){M[M.EYE=1]="EYE",M[M.SNAKE=2]="SNAKE",M[M.BOW=3]="BOW",M[M.MACHETE=4]="MACHETE",M[M.ORANGE_GEM=5]="ORANGE_GEM",M[M.RED_GEM=6]="RED_GEM",M[M.PURPLE_GEM=7]="PURPLE_GEM",M[M.BLUE_GEM=8]="BLUE_GEM",M[M.GREEN_GEM=9]="GREEN_GEM",M[M.T1=10]="T1",M[M.T2=11]="T2",M[M.T3=12]="T3",M[M.T4=13]="T4",M[M.JACKPOT=14]="JACKPOT",M[M.SCATTER=15]="SCATTER",M[M.GOLD_SCATTER=16]="GOLD_SCATTER",M[M.MEN_TOTEM=17]="MEN_TOTEM",M[M.WOMEN_TOTEM=18]="WOMEN_TOTEM"}(s||(s=M("EBackendSymbolID",{})));var T=M("GameSymbolID",function(){function M(){}return M.init=function(){this.mapSymbolAnims(),this.makeSymbolPosConfig(t.getViewModeParam())},M.mapSymbolAnims=function(){var S=A.FUNCTION,E=A.WIN,t=A.IN,e=A.LOOP;M.SYMBOL_ANIMS_MAP.set(s.EYE,[E]),M.SYMBOL_ANIMS_MAP.set(s.SNAKE,[E]),M.SYMBOL_ANIMS_MAP.set(s.BOW,[E]),M.SYMBOL_ANIMS_MAP.set(s.MACHETE,[E]),M.SYMBOL_ANIMS_MAP.set(s.ORANGE_GEM,[E]),M.SYMBOL_ANIMS_MAP.set(s.RED_GEM,[E]),M.SYMBOL_ANIMS_MAP.set(s.PURPLE_GEM,[E]),M.SYMBOL_ANIMS_MAP.set(s.BLUE_GEM,[E]),M.SYMBOL_ANIMS_MAP.set(s.GREEN_GEM,[E]),M.SYMBOL_ANIMS_MAP.set(s.T1,[S]),M.SYMBOL_ANIMS_MAP.set(s.T2,[S]),M.SYMBOL_ANIMS_MAP.set(s.T3,[S]),M.SYMBOL_ANIMS_MAP.set(s.T4,[S]),M.SYMBOL_ANIMS_MAP.set(s.JACKPOT,[t,e,E]),M.SYMBOL_ANIMS_MAP.set(s.SCATTER,[t,E])},M.makeSymbolPosConfig=function(M){void 0===M&&(M="landscape");for(var S="landscape"==M?375:353,t="landscape"==M?250:235,e="landscape"==M?this.SYMBOL_WIDTH:117,A="landscape"==M?this.SYMBOL_HIGH:.94*this.SYMBOL_HIGH,_="landscape"==M?64:60,s="landscape"==M?-54:-51,T=0;T<this.TOTAL_SYMBOL;T++){var n=new E(0,0);n.x=_+T%this.ROW*(e+0)-S,n.y=s+Math.floor(T/this.ROW)*-(A+0)+t,this.symbolPosConfig.set(T,n)}},M}());T.ROW=6,T.COL=5,T.TOTAL_SYMBOL=T.ROW*T.COL,T.SYMBOL_WIDTH=124,T.SYMBOL_HIGH=98,T.symbolPosConfig=new Map,T.SYMBOL_ANIMS_MAP=new Map,T.symbolTextures=[],T.symbolSpriteMap=new Map,T.symbolAnimMap=new Map,S._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bundles.ts","./CmmUtils.ts","./GameViewBase.ts","./Decorators.ts","./PrizeNotify.ts","./InfoBarController.ts","./MenuController.ts","./TopBar.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./PlatformModel.ts","./SettingsModel.ts","./type2.ts","./LoadUtils.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./GameLogic.ts","./WrapperData.ts","./AdapterEvent.ts","./CmmSlotUtils.ts","./SlotTableViewP.ts","./InfoBarPController.ts","./SpinBarPController.ts","./SpinBarControllerLandScape.ts","./ReplayUIViewL.ts","./Config.ts","./ReplayModel.ts","./SlotTableViewL_v2.ts","./UrlUtils.ts","./ReplayUIViewP.ts"],(function(t){"use strict";var e,n,i,a,o,r,s,l,u,p,c,d,f,g,h,m,b,_,S,y,A,E,C,v,I,D,T,w,P,B,L,N,M,U,R,V,O,G,k,F,z,W,x,H,Y,Q,j,q,K,J,X,Z,$,tt,et,nt;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,p=t.NodeEventType,c=t.Size,d=t.UITransform,f=t.instantiate,g=t.Widget,h=t.Vec3,m=t.Input,b=t.v3,_=t.tween,S=t.Color,y=t.Label,A=t.game,E=t.Node},function(t){C=t.EBundles},function(t){v=t.CmmUtils},function(t){I=t.default},function(t){D=t.inject},function(t){T=t.PrizeNotify},function(t){w=t.default},function(t){P=t.default},function(t){B=t.default},function(t){L=t.default},function(t){N=t.SlotFrameworkEvent},function(t){M=t.default},function(t){U=t.default},function(t){R=t.ESpinStatus},function(t){V=t.LoadUtils},function(t){O=t.default,G=t.EBTM,k=t.EBGM},function(t){F=t.default,z=t.EInitName},function(t){W=t.GameEvent},function(t){x=t.GameLogic},function(t){H=t.default},function(t){Y=t.EOrientationType},function(t){Q=t.CmmSlotUtils},function(t){j=t.default},function(t){q=t.default},function(t){K=t.default},function(t){J=t.default},function(t){X=t.default},function(t){Z=t.ViewZOrder},function(t){$=t.default},function(t){tt=t.default},function(t){et=t.default},function(t){nt=t.default}],execute:function(){var it,at,ot,rt,st,lt,ut,pt,ct,dt,ft,gt,ht,mt,bt,_t,St,yt;l._RF.push({},"3fc9cnk3ABNwrWISu6ie4X8","GameView",void 0);var At=u.ccclass;u.property,t("default",(it=At("GameView"),at=D("content",E),ot=D("content/gameLayer",E),rt=D("content/uiLayer",E),st=D("content/uiLayer/leftContent",E),lt=D("content/gameLayer/ReelView",E),ut=D("content/gameLayer/SymbolView",E),pt=D("content/uiLayer/rotateScreenBtn",E),it(((yt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"content",ft,a(e)),i(e,"gameLayer",gt,a(e)),i(e,"uiLayer",ht,a(e)),i(e,"leftContent",mt,a(e)),i(e,"ReelView",bt,a(e)),i(e,"SymbolView",_t,a(e)),i(e,"rotateScreenBtn",St,a(e)),e.slotUIConfigs=[],e.slotUIMap=new Map,e}n(e,t);var l=e.prototype;return l.onLoad=function(){t.prototype.onLoad.call(this)},l.start=function(){this.beforeInit()},l.onDestroy=function(){this.removeAllEvents()},l.reset=function(){t.prototype.reset.call(this)},e.getPrefabUrl=function(){return"prefabs/"+et.getViewModeParam()+"/GameView"},l.beforeInit=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.args){t.next=3;break}return t.abrupt("return");case 3:e===z.INIT_REPLAY?(!0,dispatch(W.PARSER_REPLAY_COMPLETED,true),this.playBGM(k.MAINGAME)):e==z.INIT_GAME&&($.isReplay=!1,O.setIsTurbo(M.getData().player.settings.advancedSettings.turbo),dispatch(N.CLICK_GAME_LOADING_CONFIRM_BTN));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.init=function(){this.initGameViewSize(),this.initNewCompleted(),this.setUI(),this.initAudio(),this.setEventTouch(),this.gameLayer.on(p.TOUCH_END,this.quickStop,this),this.initRotateScreenBtn()},l.initRotateScreenBtn=function(){null!=M.getData().disableRotate&&1==M.getData().disableRotate?this.rotateScreenBtn.active=!1:this.rotateScreenBtn.active=!0},l.initReplay=function(){this.initAudio(),this.setReplayUI(),this.gameLayer.on(p.TOUCH_END,this.replayQuickStop,this),M.getData().player.avatarUrl=$.getData().betData.replayMeta.avatarUrl,M.getData().player.displayName=$.getData().betData.replayMeta.displayName,dispatch(N.UPDATE_USER_BALANCE,{data:{balance:$.getData().betData.replayMeta.amount}}),dispatch(N.UPDATE_AVATAR_COMPLETED_RESPONSE),dispatch(N.SET_DISPLAY_NAME),dispatch(N.UPDATE_USER_SPIN_ID,{data:{spinId:""}})},l.againReplayUpdateAmount=function(){dispatch(W.UPDATE_WIN_AMOUNT,{data:{value:0}}),dispatch(N.UPDATE_TOTAL_WINNINGS,{data:{value:0}})},l.initGameViewSize=function(){var t=this.wrapperData.orientation===Y.LANDSCAPE?new c(1280,720):new c(720,1280);this.content.getComponent(d).setContentSize(t)},l.createBuyFeatureBtn=function(){var t=O.getData().filePaths.buyFeatureBtnPrefab,e=this.data.getData().definition.buyFeature,n=App.cache.get(this.data.module,t).data;if(e.length>0){var i=f(n);this.uiLayer.addChild(i)}},l.setReplayUI=function(){var t=this.slotData.getData().filePaths,e=t.infoBarPPrefab,n=t.infoBarPrefab,i=t.spinBarPrefab;this.slotUIConfigs=[{path:Q.getOrientationTarget(n,e),component:Q.getOrientationTarget(w,q)},{path:Q.getOrientationTarget("prefabs/ui/topBar/TopBar","prefabs/ui/topBar/TopBarP"),component:B}],"landscape"==et.getViewModeParam()&&this.slotUIConfigs.push({path:i,component:J}),this.addSlotUI(this.slotUIConfigs);var a=Q.getOrientationTarget(X,nt);App.uiManager.open({type:a,bundle:C[C.slotFramework],zIndex:Z.ReplayUI,name:"replay UI層"}),this.uiLayer.getComponentInChildren(B).setVersion("v"+this.data.GAME_VERSION)},l.setUI=function(){var t=this.slotData.getData().filePaths,e=t.infoBarPPrefab,n=t.infoBarPrefab,i=t.spinBarPPrefab,a=t.spinBarPrefab;this.slotUIConfigs=[{path:Q.getOrientationTarget(n,e),component:Q.getOrientationTarget(w,q)},{path:Q.getOrientationTarget(a,i),component:Q.getOrientationTarget(J,K)},{path:Q.getOrientationTarget("prefabs/ui/topBar/TopBar","prefabs/ui/topBar/TopBarP"),component:B},{path:"prefabs/component/PrizeNotify",component:T}],this.addSlotUI(this.slotUIConfigs),this.setSlotUIData()},l.addSlotUI=function(t){var e=this;t.forEach((function(t){var n=t.path,i=t.component,a=App.cache.get(C[C.slotFramework],n).data,o=f(a);e.slotUIMap.set(o.name,o),o.addComponent(i),e.uiLayer.addChild(o)}));var n=this.uiLayer.getComponentInChildren(T);if(n){var i=et.getViewModeParam(),a=n.node.getChildByName("content").getComponent(g);"landscape"==i?(a.left=0,a.isAlignVerticalCenter=!0,a.verticalCenter=-50,n.node.active=!0):(a.left=-14,a.isAbsoluteLeft=!0,a.isAlignVerticalCenter=!0,a.verticalCenter=310,n.node.active=!0)}},l.setSlotUIData=function(){var t=this;if(App.dataCenter.get(H).orientation===Y.LANDSCAPE){var e=this.uiLayer.getComponentInChildren(J);e.addSpinEventTouch(this.name,(function(){t.spin()})),e.addQuickStopEventTouch((function(){t.quickStop()})),e.initTurbo(O.isTurbo),e.addTurboEventTouch(O);var n=O.getData().filePaths,i=n.common,a=n.font,o=n.localeSpriteFrame,r=n.spinSkeleton,s=App.cache.get(this.bundle,r).data[0],l={normal:V.getDirSp(this.bundle,i,"mg_btn_spin_bg_normal"),pressed:V.getDirSp(this.bundle,i,"mg_btn_spin_bg_pressed"),hover:V.getDirSp(this.bundle,i,"mg_btn_spin_bg_normal"),disabled:V.getDirSp(this.bundle,i,"mg_btn_spin_bg_disabled")},u={normal:V.getDirSp(this.bundle,i,"mg_btn_spin_icon_normal"),pressed:V.getDirSp(this.bundle,i,"mg_btn_spin_icon_pressed"),hover:V.getDirSp(this.bundle,i,"mg_btn_spin_icon_normal"),disabled:V.getDirSp(this.bundle,i,"mg_btn_spin_icon_disabled")},p={font:V.getDirSp(this.bundle,a,"countup_01"),fontSize:8,fontPos:new h(0,12,0)};e.setSpinBtnData(s,l,u,p);var c=this.uiLayer.getComponentInChildren(B);c.setVersion("v"+this.data.GAME_VERSION);var d=M.getData().jackpotOn;c.showHideJPBar(d);var f=c.getComponentInChildren(P),g={bundle:this.bundle,background:i,rules:o};f.setRuleAssets(g)}else{var m=this.uiLayer.getComponentInChildren(K);m.addSpinEventTouch(this.name,(function(){t.spin()})),m.addQuickStopEventTouch((function(){t.quickStop()})),m.initTurbo(O.isTurbo),m.addTurboEventTouch(O);var b=O.getData().filePaths,_=b.common,S=b.font,y=b.localeSpriteFrame,A=b.spinSkeleton,E=App.cache.get(C[C.g1005],A).data[0],v={normal:V.getDirSp(this.bundle,_,"mg_btn_spin_bg_normal"),pressed:V.getDirSp(this.bundle,_,"mg_btn_spin_bg_pressed"),hover:V.getDirSp(this.bundle,_,"mg_btn_spin_bg_normal"),disabled:V.getDirSp(this.bundle,_,"mg_btn_spin_bg_disabled")},I={normal:V.getDirSp(this.bundle,_,"mg_btn_spin_icon_normal"),pressed:V.getDirSp(this.bundle,_,"mg_btn_spin_icon_pressed"),hover:V.getDirSp(this.bundle,_,"mg_btn_spin_icon_normal"),disabled:V.getDirSp(this.bundle,_,"mg_btn_spin_icon_disabled")},D={font:V.getDirSp(this.bundle,S,"countup_01"),fontSize:8,fontPos:new h(0,12,0)};m.setSpinBtnData(E,v,I,D);var T=this.uiLayer.getComponentInChildren(B);T.setVersion("v"+this.data.GAME_VERSION);var w=M.getData().jackpotOn;T.showHideJPBar(w);var L={bundle:this.bundle,background:_,rules:y};M.getData().theme&&"xin-star"==M.getData().theme&&(L.excludeIndexes=[6,7]),m.setRuleAssets(L)}},l.setEventTouch=function(){this.onI(m.EventType.KEY_DOWN,(function(t){t.keyCode}))},l.shakeView=function(){var t=this,e=.02,n=[this.ReelView,this.SymbolView],i=b(0,0,0);n.forEach((function(n){n==t.SymbolView&&(i=b(0,-4.6,0)),_(n).delay(.3).to(e,{position:new h(18,21,0)}).to(e,{position:new h(39,9,0)}).to(e,{position:new h(-9,-18,0)}).to(e,{position:new h(15,15,0)}).to(e,{position:new h(-6,-24,0)}).to(e,{position:new h(24,-30,0)}).to(e,{position:new h(-9,30,0)}).to(e,{position:new h(9,-15,0)}).to(e,{position:new h(-12,24,0)}).to(e,{position:i}).call((function(){t.node.position=new h(0,0,0)})).start()}))},l.playBGM=function(t){this.audioHelper.playMusic(t,this.bundle)},l.playBTM=function(t,e){void 0===e&&(e=!1),this.audioHelper.playEffect(t,this.bundle,e)},l.stopBTM=function(t){this.audioHelper.stopEffect(t,this.bundle)},l.initAudio=function(){var t,e;if(et.hasParam("spinId"))return App.globalAudio.musicVolume=0,App.globalAudio.effectVolume=0,void Log.e("replay model volume:::::::::",App.globalAudio.musicVolume);App.globalAudio.musicVolume=null!=(t=U.backgroundVolume)?t:1,App.globalAudio.effectVolume=null!=(e=U.effectVolume)?e:1},l.buyFeatureSpin=function(t){dispatch(W.CLOSE_FEATURE_POPUP),dispatch(W.CREATE_SPIN_FLOW,{data:{spinId:t,test:null}}),dispatch(W.UPDATE_WIN_AMOUNT,{data:{value:0}}),dispatch(N.UPDATE_TOTAL_WINNINGS,{data:{value:0}}),this.playBTM(G.SPIN)},l.showResumeAlert=function(){var t={text:App.getLanguage("wrapper1",[],C[C.wrapper]),bbrColor:new S(0,0,0,255),confirmCb:function(t){dispatch(W.CREATE_RESUME_FLOW)}};App.gameAlert.show(t),App.uiManager.close(Q.getOrientationTarget(tt,j))},l.createTestBtn=function(){var t=this;[{name:"測試1: 鎖定倍數-1",function:function(){t.testSpin({type:0})}},{name:"測試2: 分裂-1",function:function(){t.testSpin({type:1})}},{name:"測試3: 分裂加鎖定",function:function(){t.testSpin({type:2})}},{name:"測試3: BigWin",function:function(){t.testSpin({type:3})}},{name:"測試4: Super Win",function:function(){t.testSpin({type:4})}},{name:"測試5: Mega Win",function:function(){t.testSpin({type:5})}},{name:"測試6: Ultra Win",function:function(){t.testSpin({type:6})}},{name:"測試7: Legendary Win",function:function(){t.testSpin({type:7})}}].forEach((function(e,n){var i=v.createNode("按鈕"+n,{Button:!0,subLabel:!0});i.getComponent(d).height=25;var a=i.getComponentInChildren(y);a.color=new S("#ffffff"),a.fontSize=18,a.lineHeight=18,a.string=e.name,i.setParent(t.leftContent),v.addDoubleClickProtection(i,(function(){e.function()}))}))},l.testSpin=function(t){this.slotData.getData().spinStatus==R.IDLE&&dispatch(W.CREATE_SPIN_FLOW,{data:{spinId:null,test:t}})},l.spin=function(){var t=v.extractContentBetweenAngleBrackets(this.name)[0];App.uiManager.IsOnlyGameViewOpen(t)&&(dispatch(W.CREATE_SPIN_FLOW,{data:{spinId:null,test:null}}),this.playBTM(G.SPIN))},l.quickStop=function(){var t=App.dataCenter.get(L).getData().spinStatus,e=v.extractContentBetweenAngleBrackets(this.name)[0],n=App.uiManager.IsOnlyGameViewOpen(e);t===R.SPINING&&n&&dispatch(W.CREATE_QUICK_STOP_FLOW)},l.replayQuickStop=function(){var t=App.dataCenter.get(L).getData().spinStatus;A.isPaused()||t===R.SPINING&&dispatch(W.CREATE_REPLAY_QUICK_STOP_FLOW)},l.multipleMusicVolume=function(t){App.globalAudio.musicVolume=App.globalAudio.musicVolume*t},l.initNewCompleted=function(){var t=this.data.getData().isResuming,e="spin"==this.data.getData().newGameState[this.data.currSpinIndex].action,n=e?k.MAINGAME:k.FREEGAME;this.createBuyFeatureBtn(),t?(this.playBGM(n),dispatch(W.CHANGE_GAME_STYLE,{data:e}),this.showResumeAlert()):(this.playBGM(k.MAINGAME),dispatch(W.CHANGE_GAME_STYLE,{data:!0}))},l.showTest=function(){this.leftContent.active=!this.leftContent.active},o(e,[{key:"data",get:function(){return App.dataCenter.get(F)}},{key:"slotData",get:function(){return App.dataCenter.get(L)}},{key:"wrapperData",get:function(){return App.dataCenter.get(H)}}]),e}(I)).logicType=x,ft=e((dt=yt).prototype,"content",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(dt.prototype,"gameLayer",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(dt.prototype,"uiLayer",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(dt.prototype,"leftContent",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(dt.prototype,"ReelView",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(dt.prototype,"SymbolView",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(dt.prototype,"rotateScreenBtn",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=dt))||ct));l._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalModel.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"42f90NVoY9ILa2yvM+nUK5q","GlobalModel",void 0);var n=e("GlobalModel",function(){function e(){}return e.GetCurrSpinData=function(){return e.GameStates&&e.GameStates.length>0&&e.GameStates[e.currSpinIndex]||null},e}());n.InitialResponse=void 0,n.GameStates=[],n.Platform=void 0,n.SpinResponse=void 0,n.currSpinIndex=0,n.isInit=!1,t._RF.pop()}}}));

System.register("chunks:///_virtual/IntroView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CmmUtils.ts","./UIView.ts","./Decorators.ts","./SlotFrameworkEvent.ts","./LoadUtils.ts","./MathUtil.ts","./GameConfigModel.ts","./GameData.ts","./UrlUtils.ts"],(function(t){"use strict";var e,i,n,r,o,a,s,l,u,p,c,f,g,h,d,m,w,b,S,v,y,P,T,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.UIOpacity,u=t.tween,p=t.NodeEventType,c=t.Sprite,f=t.sp,g=t.PageView,h=t.Node,d=t.Button},function(t){m=t.CmmUtils},function(t){w=t.default},function(t){b=t.inject},function(t){S=t.SlotFrameworkEvent},function(t){v=t.LoadUtils},function(t){y=t.default},function(t){P=t.default},function(t){T=t.default},function(t){A=t.default}],execute:function(){var V,C,I,x,D,L,G,_,F,N,U,z,k,E,M,B,O;a._RF.push({},"d4ff4NGY/ZP9p91pTTBH45v","IntroView",void 0);var R=s.ccclass;s.property,t("IntroView",(V=R("IntroView"),C=b("pageView",g),I=b("bbr",h),x=b("startGame",h),D=b("gameLogo",c),L=b("leftArrow",d),G=b("rightArrow",d),_=b("introTextArea/text",c),V((U=e((N=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"pageView",U,r(e)),n(e,"bbr",z,r(e)),n(e,"startGame",k,r(e)),n(e,"gameLogo",E,r(e)),n(e,"leftArrow",M,r(e)),n(e,"rightArrow",B,r(e)),n(e,"infoTextSprite",O,r(e)),e.spineNodes=[],e}i(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this)},a.start=function(){var t=this;this.init(),this.setInfoTextSprite(0),this.playSpineAnim(0),this.pageView.node.on("page-turning",this.onPageTurning,this),m.addBtnClickEvent(this.leftArrow.node,(function(){t.onPrevPage()})),m.addBtnClickEvent(this.rightArrow.node,(function(){t.onNextPage()}))},a.onDestroy=function(){t.prototype.onDestroy.call(this)},e.getPrefabUrl=function(){return"prefabs/"+A.getViewModeParam()+"/IntroView"},a.init=function(){this.setGameLogo(),this.setStartGame(),this.setPageSpines(),m.fadeInTween(this.node,.1)},a.setGameLogo=function(){var t=P.getData().filePaths.localeSpriteFrame;this.gameLogo.spriteFrame=v.getDirSp(this.data.module,t,"l_logo")},a.setStartGame=function(){var t=this,e=P.getData().filePaths.localeSpriteFrame,i=this.startGame.getComponent(l);i.opacity=0,u(i).repeatForever(u().to(1,{opacity:255}).to(1,{opacity:170})).start(),this.bbr.on(p.TOUCH_START,(function(){App.gameLoading.complete((function(){dispatch(S.CLICK_GAME_LOADING_CONFIRM_BTN),t.close()}))})),this.startGame.getComponent(c).spriteFrame=v.getDirSp(this.data.module,e,"l_font")},a.setPageSpines=function(){var t=this;this.pageView.content.children.forEach((function(e,i){var n=e.getChildByName("intro");if(n){var r=n.getComponent(f.Skeleton);t.spineNodes.push(r),t.resetSpine(r,"p"+(i+1))}}))},a.onPageTurning=function(){var t=this.pageView.getCurrentPageIndex();this.playSpineAnim(t),this.setInfoTextSprite(t)},a.setInfoTextSprite=function(t){var e=P.getData().filePaths.localeSpriteFrame;this.infoTextSprite.spriteFrame=v.getDirSp(this.data.module,e,"intro_text_"+y.zeroPad(t+1))},a.resetSpine=function(t,e){t.clearTracks(),t.setToSetupPose(),t.setAnimation(0,e,!1),t.paused=!0},a.playSpineAnim=function(t){var e=this;this.spineNodes.forEach((function(i,n){var r="p"+(n+1);n===t?(i.paused=!1,i.clearTracks(),i.setToSetupPose(),i.setAnimation(0,r,!0)):e.resetSpine(i,r)}))},a.onPrevPage=function(){var t=this.pageView.getCurrentPageIndex(),e=Math.max(0,t-1);this.pageView.scrollToPage(e,.3)},a.onNextPage=function(){var t=this.pageView.getCurrentPageIndex(),e=this.pageView.content.children.length-1,i=Math.min(e,t+1);this.pageView.scrollToPage(i,.3)},a.reset=function(){},a.setData=function(t){},a.addEvents=function(){},o(e,[{key:"data",get:function(){return App.dataCenter.get(T)}}]),e}(w)).prototype,"pageView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(N.prototype,"bbr",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(N.prototype,"startGame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(N.prototype,"gameLogo",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"leftArrow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(N.prototype,"rightArrow",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(N.prototype,"infoTextSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=N))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./AutoPlayModel.ts","./SlotFrameworkEvent.ts","./CmmSlotUtils.ts","./MathUtil.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./ReplayModel.ts"],(function(t){"use strict";var e,i,n,a,o,s,c,l,r,u,p,h,d,f,m,_,P,O,N,A,g,T,C,v,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,c=t._decorator,l=t.sp,r=t.NodeEventType,u=t.Tween,p=t.tween,h=t.Vec3,d=t.Node,f=t.Label},function(t){m=t.default},function(t){_=t.inject},function(t){P=t.default},function(t){O=t.SlotFrameworkEvent},function(t){N=t.CmmSlotUtils},function(t){A=t.default},function(t){g=t.EBTM,T=t.default},function(t){C=t.default},function(t){v=t.GameEvent},function(t){M=t.default}],execute:function(){var w,y,J,b,I,S,k,B,D,R,L,j,U;t("EJackpotType",void 0),s._RF.push({},"61ffdcAZypFEYvcmXsQ9P+i","JackpotView",void 0);var E,F=c.ccclass;c.property;!function(t){t.MINI="jp-mini",t.MINOR="jp-minor",t.MAJOR="jp-major",t.GRAND="jp-grand"}(E||(E=t("EJackpotType",{})));t("JackpotView",(w=F("JackpotView"),y=_("alert",d),J=_("alert/effectBg",l.Skeleton),b=_("alert/effectFont",l.Skeleton),I=_("alert/totalWin",f),S=_("alert/coinSprays",d),w((D=e((B=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"alert",D,a(e)),n(e,"effectBg",R,a(e)),n(e,"effectFont",L,a(e)),n(e,"totalWin",j,a(e)),n(e,"coinSprays",U,a(e)),e.jackpotFileNames=["jp_mini","jp_minor","jp_major","jp_grand"],e.jackpotTypes=[E.MINI,E.MINOR,E.MAJOR,E.GRAND],e.jackpotNamesMap=new Map,e.completedCB=null,e.tweenNumTween=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.start=function(){this.init()},s.onDestroy=function(){t.prototype.onDestroy.call(this)},s.init=function(){for(var t=0;t<this.jackpotFileNames.length;t++)this.jackpotNamesMap.set(this.jackpotTypes[t],this.jackpotFileNames[t]);this.closeNodes()},s.showJp=function(t){var e=this,i=this.data.getData().definition.digital,n=this.data.getData().gameState,a=n.totalWinnings,o=n.isJp,s=+N.formatJPNumber(a,!1,!1,i),c={label:this.totalWin,start:0,end:s,tweenTime:10,digital:i,useThousandsSeparator:!0};this.completedCB=function(){t(),e.closeAlert()},this.alert.active=!0,this.playAnimation(o,10),this.scheduleOnce((function(){e.totalWin.node.active=!0,e.tweenNumTween=N.tweenJPNum(c),e.alert.once(r.TOUCH_END,e.showJpResult,e),dispatch(O.UPDATE_TOTAL_WINNINGS,{data:{value:s,tweenTime:10}}),dispatch(v.UPDATE_WIN_AMOUNT,{data:{value:s,tweenTime:10}})}),2)},s.closeAlert=function(){this.closeNodes(),this.unscheduleAllCallbacks(),u.stopAllByTarget(this.totalWin.node),dispatch(v.STOP_BTM,{data:g.JP_POPUP_LOOP_1}),dispatch(v.STOP_BTM,{data:g.JP_POPUP_LOOP_2}),dispatch(v.STOP_BTM,{data:g.JP_POPUP_IN_1}),dispatch(v.STOP_BTM,{data:g.JP_POPUP_IN_2}),dispatch(v.STOP_BTM,{data:g.JP_MINI_VOCAL}),dispatch(v.STOP_BTM,{data:g.JP_MINOR_VOCAL}),dispatch(v.STOP_BTM,{data:g.JP_MAJOR_VOCAL}),dispatch(v.STOP_BTM,{data:g.JP_GRAND_VOCAL}),App.globalAudio.resumeMusic(),this.alert.targetOff(r.TOUCH_END)},s.closeNodes=function(){this.alert.active=!1,this.effectBg.node.active=!1,this.effectFont.node.active=!1,this.totalWin.node.active=!1,this.coinSprays.active=!1,this.coinSprays.children.forEach((function(t){t.active=!1})),this.alert.targetOff(this),T.stopOnJpPrize&&(P.active=!1)},s.playAnimation=function(t,e){var i=this,n=T.getData().bigwinAutoCloseTime,a=this.jackpotNamesMap.get(t),o=t==E.GRAND?a+"_bg":"jp_major_minor_mini_bg",s=t==E.MINI||t==E.MINOR?g.JP_POPUP_IN_1:g.JP_POPUP_IN_2,c=t==E.MINI||t==E.MINOR?g.JP_POPUP_LOOP_1:g.JP_POPUP_LOOP_2,l=this.getJpVocal(t);App.globalAudio.pauseMusic(),this.effectBg.node.active=!0,this.effectFont.node.active=!0,this.effectFont.skeletonData=this.data.getGameAlertSpine(a),this.effectFont.setAnimation(0,"in",!1),this.effectFont.setCompleteListener((function(){i.effectFont.setAnimation(0,"loop",!0)})),this.effectBg.skeletonData=this.data.getGameAlertSpine(o),this.effectBg.setAnimation(0,"loop",!0),dispatch(v.PLAY_BTM,{data:{url:l}}),dispatch(v.PLAY_BTM,{data:{url:s}}),this.scheduleOnce((function(){i.showCoinSpray(),dispatch(v.PLAY_BTM,{data:{url:c,loop:!0}})}),2),n&&this.scheduleOnce(this.showJpResult,n+2+e),this.scheduleOnce(this.addClickAlertCompleteCb,2+e)},s.playBounceTween=function(t,e){p(t).to(.1,{scale:new h(1.8,1.8,1.8)}).delay(.01).to(.1,{scale:new h(1,1,1)},{onComplete:function(){e&&e()}}).start()},s.showCoinSpray=function(){var t=this,e=this.coinSprays.getComponentsInChildren(l.Skeleton);this.coinSprays.active=!0;for(var i=function(){var i=e[n];0==n?(i.node.active=!0,i.setAnimation(0,"coin_01",!1)):1==n?t.scheduleOnce((function(){i.node.active=!0,i.setAnimation(0,"coin_02",!1)}),1.3):t.scheduleOnce((function(){var t=A.getRandomNumber(3,6);i.node.active=!0,i.setAnimation(0,"radom_0"+t,!1),i.setCompleteListener((function(){var t=A.getRandomNumber(3,6);i.setAnimation(0,"radom_0"+t,!1)}))}),2.8+.5*(n-2))},n=0;n<e.length;n++)i()},s.showJpResult=function(){var t=this.data.getData().gameState.totalWinnings,e=this.data.getData().definition.digital,i=N.formatJPNumber(t,!0,!0,e),n=+N.formatJPNumber(t,!1,!1,e);this.unschedule(this.completedCB),this.unschedule(this.showJpResult),this.tweenNumTween&&this.tweenNumTween.stop(),this.totalWin.string=i,this.playBounceTween(this.totalWin.node),this.addClickAlertCompleteCb(),dispatch(v.QUICK_STOP_TOTAL_WINNINGS,{data:n}),dispatch(v.QUICK_STOP_WIN_AMOUNT,{data:n})},s.addClickAlertCompleteCb=function(){if(M.isReplay){var t=T.getData().bigwinAutoCloseTime;this.scheduleOnce(this.completedCB,t),this.alert.once(r.TOUCH_END,this.completedCB),this.unschedule(this.addClickAlertCompleteCb)}else this.alert.once(r.TOUCH_END,this.completedCB),this.unschedule(this.addClickAlertCompleteCb)},s.getJpVocal=function(t){switch(t){case E.MINI:return g.JP_MINI_VOCAL;case E.MINOR:return g.JP_MINOR_VOCAL;case E.MAJOR:return g.JP_MAJOR_VOCAL;case E.GRAND:return g.JP_GRAND_VOCAL}},s.reset=function(){},s.setData=function(t){},s.show=function(){this.node.active=!0},s.hide=function(){this.node.active=!1},s.addEvents=function(){var t=this;this.on(v.SHOW_JP,(function(e){t.showJp(e.complete)}))},o(e,[{key:"data",get:function(){return App.dataCenter.get(C)}}]),e}(m)).prototype,"alert",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(B.prototype,"effectBg",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(B.prototype,"effectFont",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"totalWin",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(B.prototype,"coinSprays",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=B))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/NewSpinClosedCmd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flow.ts","./SingletonExtends.ts","./AutoPlayModel.ts","./SlotFrameworkData.ts","./SlotFrameworkEvent.ts","./PlatformModel.ts","./type2.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./types.ts","./FlowIDs.ts"],(function(t){"use strict";var e,a,n,i,s,l,o,u,d,r,c,p,S,E,f;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy},function(t){i=t.FlowTrigger},function(t){s=t.SingletonExtends},function(t){l=t.default},function(t){o=t.default},function(t){u=t.SlotFrameworkEvent},function(t){d=t.default},function(t){r=t.ESpinStatus},function(t){c=t.default},function(t){p=t.default},function(t){S=t.GameEvent},function(t){E=t.EGameType},function(t){f=t.FlowIDs}],execute:function(){n._RF.push({},"b7266ebgdVCMpdqbAbDprdB","NewSpinClosedCmd",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.execute=function(){dispatch(S.SPIN_CLOSED),c.quickStopCount=0;var t=this.createFlow();App.flowManager.registerFlow(t)},s.createFlow=function(){var t=new App.flowManager.Flow(f.SPIN_CLOSED_FLOW),e=this.data.getData().parser.newTimesSymbols,a=c.getData(),n=a.hasTimesSymbolsDelay,s=a.nextSpinDelay,o=e.length?n:s,p=this.data.getData().gameState,_=p.currentView,g=p.totalViews;this.data.getData().isResuming=!1,this.calculateAutoSpin(),_===g-1&&this.data.currentGameType===E.FREE_GAME?dispatch(u.UPDATE_SPIN_STATUS,{data:r.SPINING}):dispatch(u.UPDATE_SPIN_STATUS,{data:l.active?r.SPINING:r.IDLE});var m=d.amount;return t.add(i.CONCURRENT,new S(u.UPDATE_USER_BALANCE,{balance:m},{autoComplete:!0})),l.active&&(l.spinsRemaining>0||-1===l.spinsRemaining)?this.data.isOpenEarlyFlag?null==this.data.earlyData?t.add(i.AFTER_PREVIOUS,new S(S.WAIT_EARLY_SPIN_RESPONSE,null,{autoComplete:!0})):t.add(i.AFTER_PREVIOUS,new S(S.CREATE_SPIN_FLOW,{spinId:null,test:null,earlySpin:!0},{autoComplete:!0,delay:o})):t.add(i.AFTER_PREVIOUS,new S(S.CREATE_SPIN_FLOW,{spinId:null,test:null},{autoComplete:!0,delay:o})):this.data.earlyData&&this.data.isSendOutEarlyFlag&&t.add(i.AFTER_PREVIOUS,new S(S.CREATE_SPIN_FLOW,{spinId:null,test:null,earlySpin:!0},{autoComplete:!0,delay:o})),t},s.calculateAutoSpin=function(){0===l.spinsRemaining&&(l.active=!1,dispatch(u.SHOW_AUTO_SPIN,{data:!0})),l.spinsRemaining<=-1&&(l.spinsRemaining=-1),l.active?dispatch(u.SHOW_AUTO_SPIN,{data:!1}):(dispatch(u.SHOW_AUTO_SPIN,{data:!0}),l.spinsRemaining=0)},a(n,[{key:"data",get:function(){return App.dataCenter.get(p)}},{key:"slotData",get:function(){return App.dataCenter.get(o)}}]),n}(s).instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/ParseResponse.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StakeModel.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts","./types.ts","./ReplayModel.ts","./DefinitionModel.ts"],(function(t){"use strict";var e,a,n,i,s,l,r,o,p,u;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy},function(t){n=t.default},function(t){i=t.default},function(t){s=t.default},function(t){l=t.GameEvent},function(t){r=t.EGameType},function(t){o=t.default,p=t.EReplayMode},function(t){u=t.default}],execute:function(){a._RF.push({},"489feosKDxE2p8FARjlU5pN","ParseResponse",void 0);t("default",function(){function t(){}return t.parseNewInit=function(t){var e;this.data.currSpinIndex=0,this.data.setNewInitData(t),n.init({stakeList:t.platform.game.stakeValues,stakeIndex:t.platform.player.settings.stakeIndex,ratioList:t.platform.game.ratioValues,ratioIndex:t.platform.player.settings.ratioIndex,numWinlines:t.engine.definition.winlineDefs.length,totalBetValues:null==(e=t.platform)?void 0:e.game.stakeList}),i.setNewData(t),this.setNewGameType(),dispatch(l.PARSER_INIT_COMPLETED)},t.parseNewSpin=function(t){this.data.setNewSpinData(t),this.setNewGameType(),this.data.judgeIsOpenEarlyFlag(),dispatch(l.PARSER_SPIN_COMPLETED)},t.parseNewEarlySpin=function(t){this.data.setNewSpinData(t),this.setNewGameType(),this.data.judgeIsOpenEarlyFlag()},t.parseEarlySpin=function(t){this.data.earlyData=t},t.tempEarlyClose=function(t){this.data.earlyCloseData=t},t.parseCloseSpin=function(t){dispatch(l.PARSER_CLOSE_SPIN_COMPLETED)},t.parseReplay=function(t){this.parseReplayData(t);var e=o.index;this.data.setReplayInit(t),this.data.setReplayCurrentView(t.betData.theResult[e]),o.replayMode!==p.RANKING_REPLAY&&dispatch(l.PARSER_REPLAY_COMPLETED,!0)},t.parseReplayAgain=function(t){this.parseReplayData(t);var e=o.index;this.data.setReplayCurrentView(t.betData.theResult[e]),dispatch(l.PARSER_REPLAY_COMPLETED,!1)},t.parseReplayData=function(t){var e=t.definition?t.definition.winlineDefs:u.getData().winlineDefs;n.init({stakeList:t.betData.replayMeta.stakeValues,stakeIndex:t.betData.replayMeta.stakeIndex,ratioList:t.betData.replayMeta.ratioValues,ratioIndex:t.betData.replayMeta.ratioIndex,numWinlines:e.length});var a=t.betData.theResult[0].engine,i=t.betData.theResult[1].engine;a.currentView=0,a.totalWinnings=0,a.roundWinnings=0,a.action="spin",a.isJp="",a.timesSymbols=[],t.betData.theResult.forEach((function(e,n){n>0&&(e.engine.totalViews+=1,e.engine.currentView+=1,a.totalViews=i.totalViews,t.betData.totalViews=a.totalViews)}))},t.setNewGameType=function(){var t,e=this.data.currSpinData;"spin"===(null==e?void 0:e.action)?t=r.MAIN_GAME:(t=r.FREE_GAME,this.data.previousGameType||(t=r.MAIN_GAME)),this.data.currentGameType=t},e(t,null,[{key:"data",get:function(){return App.dataCenter.get(s)}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/PrizeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts"],(function(t){"use strict";var e,i,n,o,r,c,s,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,s=t.Node},function(t){a=t.default},function(t){u=t.inject}],execute:function(){var l,f,p,d,h;r._RF.push({},"2b821zPXmRCXITWE1Tf9lla","PrizeView",void 0);var y=c.ccclass;c.property,t("PrizeView",(l=y("PrizeView"),f=u("someNode",s),l((h=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,n(e,"someNode",h,o(e)),e}i(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.start=function(){this.init()},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.init=function(){},r.reset=function(){},r.setData=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},e}(a)).prototype,"someNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/ReelView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./CmmSlotUtils.ts","./MathUtil.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts"],(function(t){"use strict";var n,i,e,o,a,r,s,u,c,l,g,d,f,m,p,h,w,b,_,F,y,A,E;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,u=t.sp,c=t.tween,l=t.Vec3,g=t.macro,d=t.Sprite,f=t.Label,m=t.Node,p=t.UIOpacity},function(t){h=t.default},function(t){w=t.inject},function(t){b=t.CmmSlotUtils},function(t){_=t.default},function(t){F=t.default,y=t.EBTM},function(t){A=t.default},function(t){E=t.GameEvent}],execute:function(){var T,N,I,v,B,D,S,G,W,L,R,C,O,M,z,P,U,k,x,Y,q,V,j,H,Q,J,K,X,Z,$;t("WIN_BOARD_ANIME_NAME",void 0),r._RF.push({},"762716NSQRJn7FWkS+bGv0A","ReelView",void 0),function(t){t.MG_IDLE="mg_idle",t.FG_IDLE="fg_idle",t.MG_WIN="mg_win",t.FG_WIN="fg_win",t.GOLDENFG_IDLE="golden_idle",t.GOLDENFG_WIN="golden_win"}($||($=t("WIN_BOARD_ANIME_NAME",{})));var tt=s.ccclass;s.property,t("ReelView",(T=tt("ReelView"),N=w("bgEffect",u.Skeleton),I=w("bgContent/bgLeft",d),v=w("bgContent/bgRight",d),B=w("winboard/bg",d),D=w("winboard/spine",u.Skeleton),S=w("winboard/winnings/winAmount",f),G=w("winboard/winnings/cross",f),W=w("winboard/winnings/times",f),L=w("fgRemaining",m),R=w("fgRemaining/remaining",f),C=w("winboard/fontNode/font",d),O=w("winboard/fontNode",p),M=w("reelLogo",d),T((U=n((P=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,e(n,"bgEffect",U,o(n)),e(n,"bgLeft",k,o(n)),e(n,"bgRight",x,o(n)),e(n,"winboardBg",Y,o(n)),e(n,"spine",q,o(n)),e(n,"winAmount",V,o(n)),e(n,"cross",j,o(n)),e(n,"times",H,o(n)),e(n,"fgRemaining",Q,o(n)),e(n,"remaining",J,o(n)),e(n,"winBoardFont",K,o(n)),e(n,"fontNodeOpacity",X,o(n)),e(n,"reelLogo",Z,o(n)),n.curWinBoardFontIndex=0,n.curTimes=0,n.fontNodeOpacityTween=null,n.winAmountTween=null,n.increaseCounts=0,n.originBgY=0,n.isMg=!0,n}i(n,t);var r=n.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.start=function(){this.init()},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.init=function(){F.useProEffect||(this.bgEffect.node.active=!1),this.winAmount.node.active=!1,this.winBoardFont.node.parent.active=!0,this.originBgY=this.bgLeft.node.y},r.setBgSprite=function(t){var n=this.data.getData().gameState.isGoldenFg,i=t?"mg_reel":n?"nfg_reel":"fg_reel";this.isMg=t;var e=t?"mg_winboard":n?"nfg_winboard_wing":"fg_winboard",o=this.data.getCommonSpriteFrame(i),a=this.data.getCommonSpriteFrame(e);this.bgLeft.spriteFrame=this.bgRight.spriteFrame=o,this.winboardBg.spriteFrame=a,this.bgLeft.node.y=t?this.originBgY:n?this.originBgY+22:this.originBgY,this.bgRight.node.y=t?this.originBgY:n?this.originBgY+22:this.originBgY;var r=t?"mg_atg":n?"nfg_atg":"fg_atg",s=this.data.getCommonSpriteFrame(r);this.reelLogo.spriteFrame=s;var u=t?$.MG_IDLE:n?$.GOLDENFG_IDLE:$.FG_IDLE;this.spine&&(this.spine.clearTracks(),this.spine.setToSetupPose(),this.spine.setAnimation(0,u,!0))},r.setFgElements=function(t){var n=this.data.getData().gameState.freeGameCount;this.fgRemaining.active=!t,this.remaining.string=null==n?void 0:n.toString(),F.useProEffect&&(this.bgEffect.node.active=!t)},r.updateWinAmount=function(t){var n=t.value,i=t.tweenTime,e=this.data.getData().definition.digital,o=F.getData().winAmountTime,a={label:this.winAmount,start:parseFloat(this.winAmount.string.replace(/,/g,"")),end:n,tweenTime:i||o,digital:e,useThousandsSeparator:!0,callback:function(){}};n?(this.winAmountTween=b.tweenNum(a),this.winAmount.node.active=!0,this.winBoardFont.node.active=!1):(this.winAmount.string="0",this.winAmount.node.active=!1,this.winBoardFont.node.active=!0)},r.quickStopWinAmount=function(t){this.winAmountTween&&this.winAmountTween.stop(),this.winAmount.string=b.formatNumber(t)},r.updateFgRemaining=function(){var t=this.data.getData().gameState.freeGameCount;Number(this.remaining.string)!=t&&this.playBounceTween(this.remaining.node),this.remaining.string=t.toString()},r.IncreaseFgRemaining=function(t){var n=this,i=this.data.getData().definition.extraFgRounds,e=this.remaining.color;this.increaseCounts++;var o=1+.05*this.increaseCounts,a=1-.02*this.increaseCounts;c(this.remaining.node).to(.1,{scale:new l(o,o,1)},{onComplete:function(){n.remaining.string=(Number(n.remaining.string)+1).toString()},easing:"quintIn"}).to(.05,{scale:new l(a,a,1)},{easing:"quintIn"}).call((function(){n.increaseCounts==i?(n.increaseCounts=0,n.scheduleOnce((function(){t()}),1),c(n.remaining.node).to(.1,{scale:new l(1,1,1)},{easing:"quintIn"}).start()):n.increaseCounts<i&&n.IncreaseFgRemaining(t)})).start(),c(e).to(.1,{a:130},{easing:"quintIn"}).to(.05,{a:255},{easing:"quintIn"}).start()},r.playWinBoardAnime=function(t){var n=this,i=this.data.getData().gameState.isGoldenFg,e=t?$.MG_WIN:i?$.GOLDENFG_WIN:$.FG_WIN;this.spine&&(this.spine.clearTracks(),this.spine.setToSetupPose(),this.spine.setAnimation(0,e,!1),this.spine.setCompleteListener((function(){var e=t?$.MG_IDLE:i?$.GOLDENFG_IDLE:$.FG_IDLE;n.spine.setCompleteListener((function(){})),n.spine.clearTracks(),n.spine.setToSetupPose(),n.spine.setAnimation(0,e,!0)})))},r.playWinBoardFontTween=function(t){var n=this,i=this.data.getData().gameState.isGoldenFg,e=t?[8,6,3,4,1]:i?[8,7,3,4]:[5,2,3,4];this.unschedule(this.fontNodeOpacityTween),this.fontNodeOpacityTween=null,this.curWinBoardFontIndex=0,this.setWinBoardFont(e[this.curWinBoardFontIndex]),this.fontNodeOpacityTween=function(){c(n.fontNodeOpacity).to(1,{opacity:0},{easing:"fade",onComplete:function(){n.curWinBoardFontIndex==e.length-1?n.curWinBoardFontIndex=0:n.curWinBoardFontIndex++,n.setWinBoardFont(e[n.curWinBoardFontIndex])}}).to(1,{opacity:255},{easing:"fade"}).start()},this.schedule(this.fontNodeOpacityTween,5,g.REPEAT_FOREVER,3)},r.setWinBoardFont=function(t){var n="mg_font_winboard_0"+_.zeroPad(t,1);this.winBoardFont.spriteFrame=this.data.getLocaleSpriteFrame(n)},r.expandWinnings=function(){this.times.string="",this.curTimes=0,this.times.color.set(255,255,255,255),this.cross.color.set(255,255,255,255),this.cross.node.active=!0,this.times.node.active=!0},r.mergeWinnings=function(t){var n=this,i=this.data.getData().gameState,e=i.totalWinnings,o=i.roundWinnings,a="freeSpin"==i.action,r=a?o:e;c(this.winAmount.node).delay(.5).to(.5,{position:new l(0,3,0)},{onComplete:function(){n.winAmount.string=b.formatNumber(r),n.playBounceTween(n.winAmount.node,t),dispatch(E.PLAY_BTM,{data:{url:y.SCORE}}),a&&dispatch(E.UPDATE_FG_TOTAL_TIMES,{data:n.curTimes})}}).start(),c(this).delay(.95).call((function(){n.playWinBoardAnime(n.isMg)})).start(),c(this.times.node).delay(.5).to(.5,{position:new l(0,17,0)},{onStart:function(){n.playFadeOut(n.times)}}).start(),c(this.cross.node).delay(.5).to(.5,{position:new l(0,12,0)},{onStart:function(){n.playFadeOut(n.cross)}}).start()},r.playBounceTween=function(t,n){c(t).to(.1,{scale:new l(1.5,1.5,1.5)}).delay(.01).to(.1,{scale:new l(1,1,1)},{onComplete:function(){n&&n()}}).start()},r.playFadeOut=function(t){c(t.color).to(.5,{a:0},{onComplete:function(){t.node.active=!1}}).start()},r.updateTimes=function(t){this.curTimes+=t,this.times.string=this.curTimes.toString(),this.times.forceDoLayout()},r.reset=function(){},r.setData=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.addEvents=function(){var t=this;this.on(E.UPDATE_WIN_AMOUNT,(function(n){t.updateWinAmount(n.data)})),this.on(E.QUICK_STOP_WIN_AMOUNT,(function(n){t.quickStopWinAmount(n.data)})),this.on(E.CHANGE_GAME_STYLE,(function(n){t.setBgSprite(n.data),t.setFgElements(n.data),t.playWinBoardFontTween(n.data)})),this.on(E.UPDATE_FG_REMAINING,(function(n){t.updateFgRemaining()})),this.on(E.INCREASE_FG_REMAINING,(function(n){t.IncreaseFgRemaining(n.complete)})),this.on(E.EXPAND_WIN_AMOUNT,(function(n){t.expandWinnings()})),this.on(E.UPDATE_TIMES,(function(n){t.playBounceTween(t.times.node),t.updateTimes(n.data)})),this.on(E.MERGE_WIN_AMOUNT,(function(n){t.mergeWinnings(n.data)}))},a(n,[{key:"data",get:function(){return App.dataCenter.get(A)}}]),n}(h)).prototype,"bgEffect",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(P.prototype,"bgLeft",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(P.prototype,"bgRight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(P.prototype,"winboardBg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(P.prototype,"spine",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(P.prototype,"winAmount",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(P.prototype,"cross",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(P.prototype,"times",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(P.prototype,"fgRemaining",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(P.prototype,"remaining",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(P.prototype,"winBoardFont",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(P.prototype,"fontNodeOpacity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(P.prototype,"reelLogo",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=P))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/RegisterNewCommands.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonExtends.ts","./GameEvent.ts","./CreateReplayFlow.ts","./CreateReplaySpinCompleteFlowCmd.ts","./CreateReplayStopSpinFlowCmd.ts","./CreateReplaySpinFlowCmd.ts","./CreateReplayCloseSpinFlowCmd.ts","./CreateReplayQuickStopFlowCmd.ts","./CreateNewSpinFlowCmd.ts","./CreateNewStopSpinFlowCmd.ts","./CreateNewSpinCompleteFlowCmd.ts","./NewSpinClosedCmd.ts","./CreateNewCloseSpinFlowCmd.ts","./CreateNewQuickStopFlowCmd.ts","./CreateNewResumeFlowCmd.ts","./CreateNewEarlySpinFlowCmd.ts"],(function(n){"use strict";var e,a,t,d,o,m,C,p,u,l,c,i,E,r,_,s,f,S;return{setters:[function(n){e=n.inheritsLoose},function(n){a=n.cclegacy},function(n){t=n.SingletonExtends},function(n){d=n.GameEvent},function(n){o=n.default},function(n){m=n.default},function(n){C=n.default},function(n){p=n.default},function(n){u=n.default},function(n){l=n.default},function(n){c=n.default},function(n){i=n.default},function(n){E=n.default},function(n){r=n.default},function(n){_=n.default},function(n){s=n.default},function(n){f=n.default},function(n){S=n.default}],execute:function(){a._RF.push({},"e87746s3kZH6o1yRbInRMNb","RegisterNewCommands",void 0);n("default",function(n){function a(){return n.apply(this,arguments)||this}return e(a,n),a.prototype.execute=function(){App.commandManager.addCommand(d.CREATE_SPIN_FLOW,c),App.commandManager.addCommand(d.CREATE_STOP_SPIN_FLOW,i),App.commandManager.addCommand(d.CREATE_SPIN_COMPLETE_FLOW,E),App.commandManager.addCommand(d.CREATE_CLOSE_SPIN_FLOW,_),App.commandManager.addCommand(d.SPIN_CLOSED_FLOW,r),App.commandManager.addCommand(d.CREATE_RESUME_FLOW,f),App.commandManager.addCommand(d.CREATE_QUICK_STOP_FLOW,s),App.commandManager.addCommand(d.CREATE_EARLY_SPIN_FLOW,S),App.commandManager.addCommand(d.CREATE_REPLAY_FLOW,o),App.commandManager.addCommand(d.CREATE_REPLAY_SPIN_FLOW,p),App.commandManager.addCommand(d.CREATE_REPLAY_STOP_SPIN_FLOW,C),App.commandManager.addCommand(d.CREATE_REPLAY_SPIN_COMPLETE_FLOW,m),App.commandManager.addCommand(d.CREATE_REPLAY_CLOSE_SPIN_FLOW,u),App.commandManager.addCommand(d.CREATE_REPLAY_QUICK_STOP_FLOW,l)},a}(t).instance());a._RF.pop()}}}));

System.register("chunks:///_virtual/ReplayUIViewL.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SlotFrameworkEvent.ts","./GameData.ts","./GameEvent.ts","./ReplayUIViewLBase.ts","./ReplayUIViewBase.ts","./ReplayModel.ts"],(function(t){"use strict";var e,n,a,o,i,r,s,c,u,p,l,d,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime,o=t.createClass},function(t){i=t.cclegacy,r=t._decorator},function(t){s=t.SlotFrameworkEvent},function(t){c=t.EInitName,u=t.default},function(t){p=t.GameEvent},function(t){l=t.default},function(t){d=t.REPLAY_TYPE},function(t){f=t.default}],execute:function(){var _;i._RF.push({},"f452dXvgpBPvYXH13CJ36GD","ReplayUIViewL",void 0);var h=r.ccclass;t("default",h("ReplayUIViewL")(_=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var r=i.prototype;return r.start=function(){this.init(),this.switchShowContent(d.INFO_BAR)},r.onLoad=function(){t.prototype.onLoad.call(this)},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.boardAgainBtnHandler=function(){this.switchShowContent(d.INFO_BAR),dispatch(s.KILL_SYMBOLS),f.index=0;var t=f.getData();dispatch(s.REPLAY_AGAIN,t)},r.quickStop=function(){dispatch(p.REPLAY_START_QUICK_STOP)},r.addEvents=function(){var e=this;t.prototype.addEvents.call(this),this.on(s.REPLAY_BACK_TO_GAME,n(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.restoreCurrentGameData(),dispatch(p.RESET_AND_OPEN_GAME_VIEW,{data:c.INIT_GAME});case 2:case"end":return t.stop()}}),t)})))),this.on(s.SHOW_REPLAY_END,(function(){dispatch(s.SHOW_REPLAY_BOARD_ALERT)}))},o(i,[{key:"data",get:function(){return App.dataCenter.get(u)}}]),i}(l))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/ReplayUIViewP.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SlotFrameworkEvent.ts","./GameData.ts","./GameEvent.ts","./ReplayUIViewBase.ts","./ReplayModel.ts","./ReplayUIViewPBase.ts"],(function(t){"use strict";var e,n,a,o,i,r,s,c,u,p,l,f,d;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime,o=t.createClass},function(t){i=t.cclegacy,r=t._decorator},function(t){s=t.SlotFrameworkEvent},function(t){c=t.EInitName,u=t.default},function(t){p=t.GameEvent},function(t){l=t.REPLAY_TYPE},function(t){f=t.default},function(t){d=t.default}],execute:function(){var h;i._RF.push({},"f94c20XWs9PnJch/LOzb01M","ReplayUIViewP",void 0);var _=r.ccclass;t("default",_("ReplayUIViewP")(h=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var r=i.prototype;return r.start=function(){this.init(),this.switchShowContent(l.INFO_BAR)},r.onLoad=function(){t.prototype.onLoad.call(this)},r.onDestroy=function(){t.prototype.onDestroy.call(this)},r.boardAgainBtnHandler=function(){this.switchShowContent(l.INFO_BAR),dispatch(s.KILL_SYMBOLS),f.index=0;var t=f.getData();dispatch(s.REPLAY_AGAIN,t)},r.quickStop=function(){dispatch(p.REPLAY_START_QUICK_STOP)},r.addEvents=function(){var e=this;t.prototype.addEvents.call(this),this.on(s.REPLAY_BACK_TO_GAME,n(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.restoreCurrentGameData(),dispatch(p.RESET_AND_OPEN_GAME_VIEW,{data:c.INIT_GAME});case 2:case"end":return t.stop()}}),t)})))),this.on(s.SHOW_REPLAY_END,(function(){dispatch(s.SHOW_REPLAY_BOARD_ALERT)}))},o(i,[{key:"data",get:function(){return App.dataCenter.get(u)}}]),i}(d))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/res-type2.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"4a7b1shs75D955U9ISLC76/","res-type",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Symbol.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameConfigModel.ts","./GameData.ts","./GameSymbolID.ts","./GameEvent.ts","./types.ts"],(function(t){"use strict";var e,i,n,s,o,a,l,m,r,p,c,S,u,h,y,b,d,A,v,f,g,T,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,m=t.sp,r=t.Layers,p=t.Tween,c=t.tween,S=t.UITransform,u=t.Sprite,h=t.Label},function(t){y=t.default},function(t){b=t.inject},function(t){d=t.default,A=t.EBTM},function(t){v=t.default},function(t){f=t.EBackendSymbolID,g=t.ESymbolAnimType},function(t){T=t.GameEvent},function(t){L=t.EPool}],execute:function(){var _,k,I,D,E,B,O,M,P,w,C,R,W,z,F,N,G,x,Y,K,U,H,V,J,j,X,q,Q,Z;a._RF.push({},"8b5c9+5tJdDm7rTkzFhpnhS","Symbol",void 0);var $=l.ccclass;l.property,t("Symbol",(_=$("Symbol"),k=b("frame",m.Skeleton),I=b("symbolSprite",u),D=b("symbolSpriteBlur",u),E=b("upgrade",m.Skeleton),B=b("symbolOut",m.Skeleton),O=b("times",h),M=b("timesSplitA/times_A",h),P=b("timesSplitA/symbolSprite_A",u),w=b("symbolAnimation",m.Skeleton),C=b("timesSplitA",m.Skeleton),R=b("timesSplitB",m.Skeleton),W=b("timesLock",m.Skeleton),z=b("timesStage",m.Skeleton),_((G=e((N=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"frameSpine",G,s(e)),n(e,"symbolSprite",x,s(e)),n(e,"symbolSpriteBlur",Y,s(e)),n(e,"upgradeAnimation",K,s(e)),n(e,"symbolOutSpine",U,s(e)),n(e,"times",H,s(e)),n(e,"times_A",V,s(e)),n(e,"symbolSprite_A",J,s(e)),n(e,"symbolAnimation",j,s(e)),n(e,"timesSplitASpine",X,s(e)),n(e,"timesSplitBSpine",q,s(e)),n(e,"timesLockSpine",Q,s(e)),n(e,"timesStageSpine",Z,s(e)),e.symbolID=null,e.posId=null,e.isRare=null,e.lockLv="",e.isTimeSymbol=!1,e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.start=function(){this.node.layer=r.Enum.UI_2D},a.onDestroy=function(){},a.update=function(t){},a.setSymbolSprite=function(t){var e=this.isRare?t.toString().padStart(2,"0")+"_01":""+t.toString().padStart(2,"0"),i=this.data.getSymbolSpriteFrame(e);this.symbolSprite.spriteFrame=i,this.symbolSprite.node.active=!0},a.setSymbolSpriteSplit=function(t){var e=this.isRare?t.toString().padStart(2,"0")+"_01":""+t.toString().padStart(2,"0"),i=this.data.getSymbolSpriteFrame(e);this.symbolSprite_A.spriteFrame=i,this.symbolSprite_A.node.active=!1},a.setIsRare=function(){var t=this,e=this.data.getData().gameState.timesSymbols,i=void 0===e?[]:e;if(i&&i.length>0){var n=i.find((function(e){return e.isRare&&e.symbolPos==t.posId}));this.isRare=!!n}else this.isRare=!1},a.setTimesText=function(t){this.times.node.active=!0,this.times.string=t?t+"x":"",this.times_A&&(this.times_A.node.active=!0,this.times_A.string=t?t+"x":"")},a.setTimesTextSplit=function(t){this.times.node.active=!1,this.times.string=t?t+"x":"",this.times_A.node.active=!0,this.times_A.string=t?t+"x":"",0==this.times_A.node.parent.active&&(this.times_A.node.parent.active=!0)},a.reset=function(){this.isRare=!1,p.stopAllByTarget(this),this.symbolAnimation.node.active=!1,this.frameSpine.node.active=!1,this.symbolOutSpine.node.active=!1,this.symbolSpriteBlur.node.active=!1,this.symbolSprite.node.active=!0,this.timesSplitASpine.node.active=!1,this.timesSplitBSpine.node.active=!1,this.timesLockSpine.node.active=!1,this.timesStageSpine.node.active=!1,this.symbolAnimation&&this.symbolAnimation.setCompleteListener(null),this.symbolOutSpine&&this.symbolOutSpine.setCompleteListener(null),this.timesLockSpine&&this.timesLockSpine.setCompleteListener(null)},a.setData=function(t){var e=t.symbolId,i=t.posId,n=t.isTimesSymbol,s=[f.ORANGE_GEM,f.RED_GEM,f.PURPLE_GEM,f.BLUE_GEM,f.GREEN_GEM].includes(e)?1.15:1;this.isTimeSymbol=n,this.symbolSprite.node.setScale(s,s),this.symbolAnimation.node.setScale(s,s),this.symbolSpriteBlur.node.setScale(s,s),this.symbolSprite_A.node.setScale(s,s),this.name=""+i,this.posId=i,this.symbolID=e,this.isRare=!1,n&&this.setIsRare(),this.setSymbolSprite(e),this.setSymbolSpriteSplit(e),this.setSymbolBlur(e),this.times.node.active=!1,this.times_A.node.active=!1},a.recycleSymbol=function(){this.hide(),this.reset(),App.pool.getPool(L.SYMBOL_POOL).put(this.node)},a.playLoopAnim=function(){var t=this;d.useProEffect&&this.scheduleOnce((function(){t.playAnim(t.symbolID,g.LOOP,!0)}),0)},a.playWinAnim=function(t){var e=this.data.getData().gameState,i=e.femaleTotemLevel,n=void 0===i?0:i,s=e.maleTotemLevel,o=void 0===s?0:s;this.playAnim(this.symbolID,g.WIN,!1);var a=1;n>0&&(a=this.getWomenTotemWinDelay(n)),o>0&&(a=this.getManTotemWinDelay(o)),this.scheduleOnce((function(){t&&t()}),a),this.frameSpine.node.active=!0,this.frameSpine.setAnimation(0,"win",!0)},a.playScatterInAnim=function(){var t=this;this.playAnim(this.symbolID,g.IN,!1,(function(){t.playAnim(t.symbolID,g.LOOP,!0)})),dispatch(T.PLAY_BTM,{data:{url:A.SCATTER_IN}})},a.playScatterInBtm=function(){dispatch(T.PLAY_BTM,{data:{url:A.SCATTER_IN}})},a.playScatterInBtmFast=function(){dispatch(T.PLAY_BTM,{data:{url:A.SCATTER_IN_X2}})},a.playJackpotInAnim=function(){var t=this;this.playAnim(this.symbolID,g.IN,!1,(function(){t.playAnim(t.symbolID,g.LOOP,!0)}))},a.playScatterWinAnim=function(t){var e=this;this.playAnim(this.symbolID,g.WIN,!1,(function(){e.playAnim(e.symbolID,g.LOOP,!0),t&&t()}))},a.getWomenTotemWinDelay=function(t){var e=0;switch(t){case 1:e=1.265;break;case 2:e=1.629;break;case 3:e=2.227}return Log.e("getWomenTotemWinDelay:::::",e),e},a.getManTotemWinDelay=function(t){var e=0;switch(t){case 1:e=1.264;break;case 2:e=1.631;break;case 3:e=2.232}return Log.e("getManTotemWinDelay:::::",e),e},a.playTotemWinAnim=function(t,e,i){var n=this;p.stopAllByTarget(this);if(this.symbolID==f.WOMEN_TOTEM)c(this).delay(0).call((function(){n.symbolAnimation.node.active=!0,n.symbolSprite.node.active=!1,n.symbolSprite_A.node.active=!1,n.frameSpine.node.active=!1,n.symbolOutSpine.node.active=!1;var i=n.isRare?n.symbolID.toString().padStart(2,"0")+"_01":""+n.symbolID.toString().padStart(2,"0");n.symbolAnimation.skeletonData=n.data.getSymbolAnimSpine(i),n.symbolAnimation.clearTracks(),n.symbolAnimation.setToSetupPose(),n.symbolAnimation.setCompleteListener(null),n.symbolAnimation.setEventListener(null),n.symbolAnimation.setAnimation(0,"lv"+e+"_2",!1),n.symbolAnimation.node.active=!0;var s=Date.now();n.symbolAnimation.setEventListener((function(e,i){n.symbolAnimation.setEventListener(null);var o=Date.now();Log.e("play anime event::::::time",o-s),t&&t()})),n.symbolAnimation.setCompleteListener((function(){var t=Date.now();Log.e("play anime complete::::::time",t-s),n.recycleSymbol()}))})).start();else if(this.symbolID==f.MEN_TOTEM){var s=Date.now();c(this).delay(0).call((function(){n.symbolAnimation.node.active=!0,n.symbolSprite.node.active=!1,n.symbolSprite_A.node.active=!1,n.frameSpine.node.active=!1,n.symbolOutSpine.node.active=!1;var i=n.isRare?n.symbolID.toString().padStart(2,"0")+"_01":""+n.symbolID.toString().padStart(2,"0");n.symbolAnimation.skeletonData=n.data.getSymbolAnimSpine(i),n.symbolAnimation.clearTracks(),n.symbolAnimation.setToSetupPose(),n.symbolAnimation.setCompleteListener(null),n.symbolAnimation.setAnimation(0,"lv"+e,!1),n.symbolAnimation.setEventListener((function(e,i){var o=Date.now();Log.e("play anime event::::::time",o-s),n.symbolAnimation.setEventListener(null),t&&t()})),n.symbolAnimation.setCompleteListener((function(){n.symbolAnimation.setCompleteListener(null);var t=Date.now();Log.e("play anime complete::::::time",t-s),n.recycleSymbol()}))})).start()}else this.playAnim(this.symbolID,"lv"+e,!1,t)},a.playTotemHitAnim=function(){this.playAnim(this.symbolID,g.HIT,!1)},a.playJpWinAnim=function(t){var e=this;this.playAnim(this.symbolID,g.WIN,!1,(function(){e.playAnim(e.symbolID,g.LOOP,!0),t&&t()}))},a.playOutAnim=function(){var t=this;this.symbolID==f.WOMEN_TOTEM||this.symbolID==f.MEN_TOTEM||c(this).delay(.13).call((function(){t.symbolAnimation.node.active=!1,t.symbolSprite.node.active=!1,t.symbolSprite_A.node.active=!1,t.frameSpine.node.active=!1,t.symbolOutSpine.node.active=!0,t.symbolOutSpine.clearTracks(),t.symbolOutSpine.setToSetupPose(),t.symbolOutSpine.setCompleteListener(null),t.symbolOutSpine.setAnimation(0,"out",!1),t.symbolOutSpine.setCompleteListener((function(){t.recycleSymbol()}))})).start()},a.showSplitA_Anim=function(t){var e=this;this.frameSpine.node.active=!1,this.symbolAnimation.node.active=!1,this.timesSplitASpine.clearTracks(),this.timesSplitASpine.setToSetupPose(),this.timesSplitASpine.node.active=!0,this.symbolSprite_A.node.active=!0,this.times.node.active=!1,this.times_A.node.active=!0,this.timesSplitASpine.setEventListener(null),this.timesSplitASpine.setAnimation(0,"split_A",!1),this.timesSplitASpine.setEventListener((function(i,n){e.timesSplitASpine.setEventListener(null),"split_B"==n.data.name&&dispatch(T.SHOW_TIMES_B,{complete:t})})),dispatch(T.PLAY_BTM,{data:{url:A.TIMES_SPLIT_A}})},a.showSplitB_Anim=function(t){var e=this;this.closeTimesSymbol(),this.frameSpine.node.active=!1,this.symbolAnimation.node.active=!1,this.timesSplitBSpine.node.active=!0,this.timesSplitBSpine.clearTracks(),this.timesSplitBSpine.setToSetupPose(),this.timesSplitBSpine.setEventListener((function(t,e){})),this.timesSplitBSpine.setAnimation(0,"split_B",!1),this.timesSplitBSpine.setCompleteListener((function(){e.timesSplitBSpine.setCompleteListener(null),t&&t()})),c(this).delay(.5).call((function(){e.initTimesSymbol(e.posId),e.showTimesSymbol()})).start(),dispatch(T.PLAY_BTM,{data:{url:A.TIMES_SPLIT_B}})},a.showTimesStage_Anim=function(t,e,i){var n=this;void 0===i&&(i=!1);var s="lv1",o=1;switch(t){case 1:case 0:case 2:o=1,s="lv1",0==this.isRare&&(s+="_normal");break;case 3:case 4:o=2,s="lv2",0==this.isRare&&(s+="_normal");break;case 5:case 6:case 7:o=3,s="lv3",0==this.isRare&&(s+="_normal")}Log.e("symbolPos::::"+this.posId+"::showTimesStage_Anim:::::animationName",s),this.timesLockSpine.clearTracks(),this.timesLockSpine.setToSetupPose(),i&&dispatch(T.PLAY_BTM,{data:{url:A.TIMES_LOCK}}),this.timesLockSpine.setAnimation(0,"lock_0"+o,!1),this.timesLockSpine.setCompleteListener((function(t){n.timesLockSpine.setCompleteListener(null),e&&e(),n.timesLockSpine.setAnimation(0,"loop_0"+o,!0),n.frameSpine.node.active=!1,n.timesStageSpine.clearTracks(),n.timesStageSpine.setToSetupPose(),n.timesStageSpine.node.active=!0,n.timesStageSpine.setAnimation(0,s,!0),n.lockLv=s,n.timesStageSpine.setCompleteListener((function(){n.timesStageSpine.setCompleteListener(null),e&&e()}))}))},a.showTimesLockBTM=function(t){var e;switch(t){case 0:case 1:case 2:e=A.TIMES_LOCK_LV1;break;case 3:case 4:e=A.TIMES_LOCK_LV2;break;case 5:case 6:e=A.TIMES_LOCK_LV3;break;default:e=A.TIMES_LOCK_LV1}dispatch(T.PLAY_BTM,{data:{url:e}})},a.showTimesLock_Anim=function(t,e){this.frameSpine.node.active=!1,this.timesLockSpine.clearTracks(),this.timesLockSpine.setToSetupPose(),this.timesLockSpine.node.active=!0,dispatch(T.PLAY_BTM,{data:{url:A.TIMES_LOCK}}),this.showTimesStage_Anim(t,e)},a.initTimesSymbol=function(t){var e=this.data.getData().gameState.timesSymbols;if(e.length&&null!=e){var i=e.find((function(e){return e.symbolPos==t}));if(null!=i){var n=i.symbol,s=i.times;this.setSymbolSprite(n),this.setTimesText(s)}}},a.openTimesSymbol=function(t){var e=this.data.getData().parser.newTimesSymbols;if(e.length){var i=e.find((function(e){return e.symbolPos==t}));if(null!=i){var n=i.symbol,s=i.times,o=i.symbolPos;if(this.setSymbolSprite(n),this.setTimesText(s),null!=this.data.getData().gameState.splitList&&this.data.getData().gameState.splitList.length>0){for(var a=this.data.getData().gameState.splitList.slice(),l=!1,m=0;m<a.length;m++){if(a[m].to.slice().indexOf(o)>-1){l=!0;break}}l&&this.setTimesTextSplit(s)}}}},a.playTimesSymbolsUpgrade=function(t){var e=this,i=t.afterSymbol,n=t.afterTimes,s=this.data.getData().gameState.splitList;this.data.getData().gameState.isGoldenFg;this.times.node.active=!1,this.times_A.node.active=!1,this.times_A.node.parent.active=!1,this.timesSplitBSpine.node.active=!1,this.timesSplitASpine.node.active=!1,this.symbolID=i,this.unscheduleAllCallbacks(),this.upgradeAnimation.node.active=!0,this.upgradeAnimation.clearTracks(),this.upgradeAnimation.setToSetupPose(),this.upgradeAnimation.setCompleteListener(null),this.upgradeAnimation.setAnimation(0,"transition",!1),this.upgradeAnimation.setCompleteListener((function(){e.upgradeAnimation.node.active=!1})),this.scheduleOnce((function(){null!=s&&s.length>0?e.setTimesTextSplit(n):e.setTimesText(n)}),.5),dispatch(T.PLAY_BTM,{data:{url:A.TIMES_SYMBOL_UPGRADE}})},a.closeTimesSymbol=function(){this.times.node.active=!1,this.symbolSprite.node.active=!1,this.times_A.node.active=!1,this.symbolSprite_A.node.active=!1},a.showTimesSymbol=function(){this.times.node.active=!0,this.symbolSprite.node.active=!0,this.symbolSprite_A.node.active=!1,this.times_A.node.active=!1},a.closeTimesLabel=function(){this.times.node.active=!1,this.times_A.node.active=!1},a.cloneLockAnime=function(){if(this.data.getData().parser.lockTimesSymbols.has(this.posId)){Log.e("clone lock anime::::::",this.posId);var t,e=this.data.getData().parser.lockTimesSymbols.get(this.posId).lock,i="lv1";switch(Log.e("clone lock anime::::lock::",e),e){case 1:case 0:case 2:t=1,i="lv1",0==this.isRare&&(i+="_normal");break;case 3:case 4:t=2,i="lv2",0==this.isRare&&(i+="_normal");break;case 5:case 6:t=3,i="lv3",0==this.isRare&&(i+="_normal")}this.timesLockSpine.setAnimation(0,"loop_0"+t,!0),this.timesStageSpine.clearTracks(),this.timesStageSpine.setToSetupPose(),this.timesStageSpine.node.active=!0,this.timesStageSpine.setAnimation(0,i,!0)}},a.playTimesSymbolsFunction=function(){var t=this.isRare?this.symbolID.toString().padStart(2,"0")+"_01":""+this.symbolID.toString().padStart(2,"0"),e=this.data.getSymbolSpriteFrame(t);this.symbolSprite.node.active=!1,this.symbolSprite_A.node.active=!1,this.symbolSprite.spriteFrame=e,this.symbolSprite_A.spriteFrame=e,this.symbolAnimation.node.active=!0,this.symbolAnimation.skeletonData=this.data.getSymbolAnimSpine(t),this.symbolAnimation.setAnimation(0,"function",!1)},a.setSymbolBlur=function(t){var e=this.isRare?t.toString().padStart(2,"0")+"_01_blur":t.toString().padStart(2,"0")+"_blur",i=this.data.getSymbolSpriteFrameBlur(e),n=this.symbolSprite.node.getComponent(S),s=n.width,o=n.height;this.symbolSpriteBlur.getComponent(S).setContentSize(s,o),this.symbolSpriteBlur.spriteFrame=i},a.setSymbolBlurActive=function(t){},a.playAnim=function(t,e,i,n){var s=this.isRare?t.toString().padStart(2,"0")+"_01":""+t.toString().padStart(2,"0");this.symbolAnimation.node.active=!0,this.symbolSprite.node.active=!1,this.symbolAnimation.skeletonData=this.data.getSymbolAnimSpine(s),this.symbolAnimation.clearTracks(),this.symbolAnimation.setToSetupPose(),this.symbolAnimation.setAnimation(0,e,!1),this.symbolAnimation.setEventListener(null),this.symbolAnimation.setEventListener((function(t){})),this.symbolAnimation.setCompleteListener(null),this.symbolAnimation.setCompleteListener((function(t){n&&!t.loop&&n()}))},a.show=function(){this.node.active=!0},a.hide=function(){this.node.active=!1},o(e,[{key:"data",get:function(){return App.dataCenter.get(v)}}]),e}(y)).prototype,"frameSpine",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(N.prototype,"symbolSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(N.prototype,"symbolSpriteBlur",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(N.prototype,"upgradeAnimation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(N.prototype,"symbolOutSpine",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(N.prototype,"times",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(N.prototype,"times_A",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(N.prototype,"symbolSprite_A",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(N.prototype,"symbolAnimation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(N.prototype,"timesSplitASpine",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(N.prototype,"timesSplitBSpine",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(N.prototype,"timesLockSpine",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(N.prototype,"timesStageSpine",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=N))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/SymbolView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Symbol.ts","./GameConfigModel.ts","./GameData.ts","./GameSymbolID.ts","./GameEvent.ts","./types.ts","./SlotFrameworkEvent.ts"],(function(t){"use strict";var o,e,i,s,a,n,l,m,c,r,S,y,p,h,u,d,b,T,M,f,_,L,O,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,l=t._decorator,m=t.Prefab,c=t.Node,r=t.instantiate,S=t.tween,y=t.bezierByTime,p=t.Tween,h=t.UITransform,u=t.Vec3},function(t){d=t.default},function(t){b=t.Symbol},function(t){T=t.default,M=t.EBTM},function(t){f=t.default},function(t){_=t.EBackendSymbolID},function(t){L=t.GameEvent},function(t){O=t.EPool},function(t){g=t.SlotFrameworkEvent}],execute:function(){var A,I,E,v,B,C,w;n._RF.push({},"389a4wz1DZLjZ5mgKPtdiUa","SymbolView",void 0);var D=l.ccclass,Y=l.property;t("SymbolView",(A=D("SymbolView"),I=Y(m),E=Y(c),A((C=o((B=function(t){function o(){for(var o,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(o=t.call.apply(t,[this].concat(a))||this).symbolsMap=new Map,o.outSymbolMap=new Map,o.lockSymbolMap=new Map,o.SYMBOL_ROW=6,o.SYMBOL_COL=5,o.TOTAL_SYMBOL=o.SYMBOL_ROW*o.SYMBOL_COL,o.GAME_HEIGHT=720,o.BIG_SYMBOLS=[_.EYE,_.SNAKE,_.BOW,_.MACHETE,_.SCATTER,_.JACKPOT],o.TIMES_SYMBOLS=[_.T1,_.T2,_.T3,_.T4],i(o,"gameSymbol",C,s(o)),i(o,"lockView",w,s(o)),o.symbolOutTag=1234,o.symbolInTag=5678,o.isOutCompleted=!1,o.needInitHeight=!1,o.fireballPosIds=[],o.isStartSymbolIn=!1,o}e(o,t);var n=o.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this)},n.start=function(){this.createSymbolPool()},n.onDestroy=function(){t.prototype.onDestroy.call(this)},n.createSymbolPool=function(){for(var t=T.getData().filePaths.symbolPrefab,o=App.cache.get(this.data.module,t).data,e=0;e<3*this.TOTAL_SYMBOL;e++){var i=r(o);i.addComponent(b),App.pool.createPool(O.SYMBOL_POOL).cloneNode=i,App.pool.createPool(O.SYMBOL_POOL).put(i)}},n.createSymbols=function(t){var o=this;this.data.getData().parser.view1D.forEach((function(e,i){o.createSymbol(i,e,t,null)})),this.setSymbolsSiblingIndex()},n.createSymbol=function(t,o,e,i){var s=this.data.getData().symbolPosConfig,a=App.pool.getPool(O.SYMBOL_POOL).get(),n=a.getComponent(b),l=this.BIG_SYMBOLS.includes(o),m=this.TIMES_SYMBOLS.includes(o);a.position.set(s.get(t)),a.name=""+t,e&&(a.active=!0);var c={posId:t,symbolId:o,isTimesSymbol:m};this.symbolsMap.set(t,n),this.node.addChild(a),n.setData(c),n.setTimesText(i),m&&e&&n.initTimesSymbol(t),l&&n.playLoopAnim()},n.createLockSymbol=function(t,o,e,i){var s=this.data.getData(),a=s.symbolPosConfig,n=(s.parser,App.pool.getPool(O.SYMBOL_POOL).get()),l=n.getComponent(b),m=this.TIMES_SYMBOLS.includes(o);n.position.set(a.get(t)),n.name=""+t;var c={posId:t,symbolId:o,isTimesSymbol:m};this.lockSymbolMap.set(t,l),this.lockView.addChild(n),l.setData(c),l.setTimesText(i),m&&e&&l.initTimesSymbol(t),n.active=!0},n.setSymbolsSiblingIndex=function(){for(var t=0,o=0;o<this.TOTAL_SYMBOL;o++){var e=this.symbolsMap.get(o);this.TIMES_SYMBOLS.includes(e.symbolID)?(e.node.setSiblingIndex(29-t),t++):e.node.setSiblingIndex(o)}},n.showSymbolsOut=function(t){var o=this,e=T.isTurbo,i=this.configModel.reelConfig,s=i.animStagger,a=i.speed,n=Array.from(this.outSymbolMap).sort((function(t,o){return t[0]-o[0]})),l=e?M.SYMBOL_TURBO_FALL_OUT:M.SYMBOL_NORMAL_FALL_OUT,m=0,c=0;this.isOutCompleted=!1;for(var r=0;r<this.SYMBOL_ROW;r++)for(var y=function(){var e=n[p][1];m++,S(e.node).delay(m*s).by(a,{position:new u(0,-o.GAME_HEIGHT,0)},{easing:"cubicInOut",onStart:function(){e.setSymbolBlurActive(!0)}}).call((function(){c++,e.recycleSymbol(),c==o.TOTAL_SYMBOL&&(o.isOutCompleted=!0,o.outSymbolMap.clear(),t())})).tag(o.symbolOutTag).start()},p=this.TOTAL_SYMBOL-this.SYMBOL_ROW+r;p>=0;p-=this.SYMBOL_ROW)y();dispatch(L.PLAY_BTM,{data:{url:l}})},n.showSymbolsIn=function(t){T.isTurbo?this.showTurboSymbolsIn(t):this.showNormalSymbolsIn(t)},n.showNormalSymbolsIn=function(t){for(var o=this,e=this.configModel.reelConfig,i=e.animStagger,s=e.speed,a=Array.from(this.symbolsMap).sort((function(t,o){return t[0]-o[0]})),n=M.SYMBOL_NORMAL_FALL_IN,l=0,m=0,c=0;c<this.SYMBOL_ROW;c++)for(var r=function(){var e=a[y][1],c=e.node.position,r=c.x,p=c.y,h=c.z,d=o.TIMES_SYMBOLS.includes(e.symbolID),b=!0,M=!0;o.lockSymbolMap.has(e.posId)&&(M=!(b=!1)),l++,S(e.node).set({position:new u(r,p+o.GAME_HEIGHT,h),active:b}).delay(l*i).to(s,{position:new u(r,p,h)},{onStart:function(){d&&b&&(dispatch(L.SHOW_FIRE_BALL,{data:e.posId}),o.fireballPosIds.push(e.posId)),e.setSymbolBlurActive(!0)}}).to(.085,{position:new u(r,p-20,h)}).to(.1,{position:new u(r,p,h)}).set({active:M}).call((function(){++m==o.TOTAL_SYMBOL&&(T.canQuickStop=!1,o.fireballPosIds.length=0,o.isStartSymbolIn=!1,t()),1==m&&dispatch(L.PLAY_BTM,{data:{url:n}}),e.symbolID!=_.SCATTER&&e.symbolID!=_.GOLD_SCATTER||e.playScatterInBtm(),e.symbolID!=_.WOMEN_TOTEM&&e.symbolID!=_.MEN_TOTEM||e.playTotemHitAnim(),d&&o.openTimesSymbol(e.posId),e.setSymbolBlurActive(!1)})).tag(o.symbolInTag).start()},y=this.TOTAL_SYMBOL-this.SYMBOL_ROW+c;y>=0;y-=this.SYMBOL_ROW)r()},n.showTurboSymbolsIn=function(t){for(var o=this,e=this.configModel.reelConfig.speed,i=Array.from(this.symbolsMap).sort((function(t,o){return t[0]-o[0]})),s=M.SYMBOL_TURBO_FALL_IN,a=0,n=0;n<this.SYMBOL_ROW;n++)for(var l=function(){var n=i[m][1],l=!0,c=!0,r=n.node.position,y=r.x,p=r.y,d=r.z,b=o.TIMES_SYMBOLS.includes(n.symbolID);n.symbolID==_.SCATTER&&(T.isTurbo?n.playScatterInBtmFast():n.playScatterInBtm()),o.lockSymbolMap.has(n.posId)&&(c=!(l=!1));var M=n.node.getComponent(h).height/12,f=Math.floor(m/6),O=p+o.GAME_HEIGHT-25*(4-f)-60*(4-f);S(n.node).set({position:new u(y,O,d),active:l}).to(1.1*e,{position:new u(y,p-M,d)},{easing:"quintOut",onStart:function(){b&&l&&(dispatch(L.SHOW_FIRE_BALL,{data:n.posId}),o.fireballPosIds.push(n.posId)),n.setSymbolBlurActive(!0)},onComplete:function(){S(n.node).to(.04,{position:new u(y,p,d)},{easing:"quadOut",onComplete:function(){++a==o.TOTAL_SYMBOL&&(T.canQuickStop=!1,o.isStartSymbolIn=!1,o.fireballPosIds.length=0,t()),1==a&&dispatch(L.PLAY_BTM,{data:{url:s}}),n.symbolID!=_.WOMEN_TOTEM&&n.symbolID!=_.MEN_TOTEM||n.playTotemHitAnim(),b&&o.openTimesSymbol(n.posId),n.setSymbolBlurActive(!1)}}).set({active:c}).start()}}).tag(o.symbolInTag).start()},m=this.TOTAL_SYMBOL-this.SYMBOL_ROW+n;m>=0;m-=this.SYMBOL_ROW)l()},n.showSymbolsQuickIn=function(t){for(var o=this,e=this.data.getData().symbolPosConfig,i=T.getData().symbolQuickInTime,s=Array.from(this.symbolsMap).sort((function(t,o){return t[0]-o[0]})),a=0,n=0;n<this.SYMBOL_ROW;n++)for(var l=function(){var n=s[m][1],l=e.get(m),c=!0,r=!0;o.lockSymbolMap.has(n.posId)&&(r=!(c=!1));var y=o.TIMES_SYMBOLS.includes(n.symbolID),p=o.needInitHeight?{position:new u(l.x,l.y+300,l.z),active:c}:{active:c};n.symbolID==_.SCATTER&&n.playScatterInBtmFast(),S(n.node).set(p).to(i,{position:l},{easing:function(t){return o.symbolsBezierByTime(t)},onStart:function(){y&&!o.fireballPosIds.includes(n.posId)&&c&&dispatch(L.SHOW_FIRE_BALL_QUICK_STOP,{data:n.posId}),n.setSymbolBlurActive(!0)},onComplete:function(){++a==o.TOTAL_SYMBOL&&(T.canQuickStop=!1,o.isStartSymbolIn=!1,o.needInitHeight=!1,o.fireballPosIds.length=0,t()),y&&o.openTimesSymbol(n.posId),n.setSymbolBlurActive(!1)}}).set({active:r}).start()},m=this.TOTAL_SYMBOL-this.SYMBOL_ROW+n;m>=0;m-=this.SYMBOL_ROW)l()},n.showLockSymbols=function(t){S(this).delay(.1).call((function(){t()})).start()},n.showCloneSymbols=function(t){S(this).delay(.1).call((function(){t()})).start()},n.showCurrentViewFall=function(t){var o=this.data.getData().gameState,e=o.posTransform;o.action;e||t&&t(),e.length||t&&t();for(var i=0;i<e.length;i++){var s=e[i],a=s.beforePos,n=s.afterPos,l=i==e.length-1?t:null;this.updateSymbolMapIndex(a,n);var m=this.symbolsMap.get(n);m.node.name=""+n,this.moveTo(m.node,n,!1,i,l)}},n.symbolsBezierByTimeTurbo=function(t){return y([.73,.73,.66,1.16],t)},n.symbolsBezierByTime=function(t){return y([.67,1.33,.61,1],t)},n.playSymbolsWin=function(t){var o=this.data.getData().gameState,e=o.winSymbols,i=o.femaleTotemLevel,s=void 0===i?0:i,a=o.maleTotemLevel,n=void 0===a?0:a;null==e&&(e=[]);var l=!1;if(Log.e("winSymbols:::::::::::",e.length,e),Log.e("femaleTotemLevel::::",s),Log.e("maleTotemLevel::::",n),s>0||n>0)for(var m=0;m<e.length;m++){var c=e[m];if(c.symbol!==_.WOMEN_TOTEM&&c.symbol!==_.MEN_TOTEM){l=!0;break}}Log.e("isDelayPlayTotemWin::::",l);for(var r=0;r<e.length;r++)for(var S=e[r],y=S.symbolPos,p=S.symbol,h=0;h<y.length;h++){var u=y[h],d=y.length==h+1&&e.length==r+1?function(){t(),dispatch(L.STOP_BTM,{data:M.SYMBOL_WIN})}:null;p==_.WOMEN_TOTEM?(Log.e("playWomanTotemWinAnim:::::::::::::::::",s),this.playFemaleTotemWinSound(s),this.symbolsMap.get(u).playTotemWinAnim(d,s,l)):p==_.MEN_TOTEM?(Log.e("playManTotemWinAnim:::::::::::::::::",n),this.playMaleTotemWinSound(n),this.symbolsMap.get(u).playTotemWinAnim(d,n,l)):(this.symbolsMap.get(u).playWinAnim(d),dispatch(L.PLAY_BTM,{data:{url:M.SYMBOL_WIN}}))}},n.playMaleTotemWinSound=function(t){switch(t){case 0:case 1:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHB_LV1}});break;case 2:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHB_LV2}});break;case 3:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHB_LV3}})}},n.playFemaleTotemWinSound=function(t){switch(t){case 0:case 1:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHA_LV1}});break;case 2:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHA_LV2}});break;case 3:dispatch(L.PLAY_BTM,{data:{url:M.GOLDEN_FG_SYMBOL_CHA_LV3}})}},n.playOutAnimAndRemoveSymbols=function(t){var o=this,e=this.data.getData().gameState,i=e.winSymbols,s=e.femaleTotemLevel,a=void 0===s?0:s,n=e.maleTotemLevel,l=void 0===n?0:n;i.forEach((function(t){t.symbolPos.forEach((function(t){o.symbolsMap.get(t).playOutAnim(),o.symbolsMap.delete(t)}))})),dispatch(L.PLAY_BTM,{data:{url:M.SYMBOL_BREAK}});var m=.15;(a>0||l>0)&&(m=0),S(this).delay(m).call((function(){t()})).start()},n.killSymbols=function(){this.symbolsMap.forEach((function(t){t.recycleSymbol()})),this.symbolsMap.clear(),p.stopAll()},n.playScatterWin=function(t){var o=this,e=this.data.getData(),i=e.parser,s=e.gameState,a=(s.totalWinnings,s.isGoldenFg);Log.e("isGoldenFG::::",a);T.getData().winAmountTime;var n=!1,l=i.view1D.filter((function(t){return t==_.GOLD_SCATTER&&(n=!0),t==_.SCATTER||t==_.GOLD_SCATTER})),m=0;n&&dispatch(L.SHOW_DARK),i.view1D.forEach((function(e,i){if(e==_.SCATTER||e==_.GOLD_SCATTER){var s=++m==l.length?function(){0==a&&(t(),dispatch(L.MUSIC_VOLUME_MULTIPLE,{data:2}))}:null;dispatch(L.MOVE_SCATTER,{data:o.symbolsMap.get(i).node}),o.symbolsMap.get(i).playScatterWinAnim(s)}})),dispatch(L.MUSIC_VOLUME_MULTIPLE,{data:.5}),n?(dispatch(L.PLAY_BTM,{data:{url:M.SCATTER_SYMBOL_INTRO}}),App.globalAudio.pauseMusic(),S(this).delay(2.5).call((function(){t(),dispatch(L.MUSIC_VOLUME_MULTIPLE,{data:2}),App.globalAudio.resumeMusic()})).start()):dispatch(L.PLAY_BTM,{data:{url:M.SCATTER_WIN}})},n.playTotemWin=function(t){var o=this,e=this.data.getData(),i=e.parser,s=e.gameState,a=s.maleTotemLevel,n=s.femaleTotemLevel,l=!1;i.view1D.filter((function(t){return t!=_.MEN_TOTEM&&t!=_.WOMEN_TOTEM||(l=!0),t==_.MEN_TOTEM||t==_.WOMEN_TOTEM}));l&&dispatch(L.SHOW_DARK);var m=0;i.view1D.forEach((function(t,e){t!=_.WOMEN_TOTEM&&t!=_.MEN_TOTEM||(dispatch(L.MOVE_SCATTER,{data:o.symbolsMap.get(e).node}),t==_.MEN_TOTEM?m=a:t==_.WOMEN_TOTEM&&(m=n),o.symbolsMap.get(e).playTotemWinAnim(null,m))}))},n.playJpWin=function(t){var o=this,e=this.data.getData().parser,i=e.view1D.filter((function(t){return t==_.JACKPOT})),s=0;e.view1D.forEach((function(e,a){if(e==_.JACKPOT){var n=++s==i.length?t:null;o.symbolsMap.get(a).playJpWinAnim(n)}})),dispatch(L.PLAY_BTM,{data:{url:M.JACKPOT_WIN}})},n.playRareUpgrade=function(){for(var t=this,o=this.data.getData().gameState,e=o.timesUpgrade,i=void 0===e?[]:e,s=o.posTransform,a=(o.splitList,function(){var o=i[n],e=null;s.forEach((function(t){t.beforePos==o.symbolPos&&(e=t.afterPos)})),e||(e=o.symbolPos),t.lockSymbolMap.has(e)&&(t.lockSymbolMap.get(e).closeTimesLabel(),t.lockSymbolMap.get(e).playTimesSymbolsUpgrade(o),t.lockSymbolMap.get(e).playTimesSymbolsFunction()),t.symbolsMap.get(e).playTimesSymbolsUpgrade(o),t.symbolsMap.get(e).playTimesSymbolsFunction()}),n=0;n<i.length;n++)a()},n.updateSymbolMapIndex=function(t,o){var e=this.symbolsMap.get(t);this.symbolsMap.set(o,e),this.symbolsMap.delete(t)},n.moveTo=function(t,o,e,i,s){var a=this,n=this.configModel.reelConfig,l=n.speed,m=n.animStagger,c=this.data.getData().symbolPosConfig.get(o),r=c.x,y=c.y,p=c.z,d=t.getComponent(b),T=this.TIMES_SYMBOLS.includes(d.symbolID),M=d.node.getComponent(h).height/12;return S(t).delay(i*m).to(.6*l,{position:new u(r,y-M,p)},{easing:"quadOut",onStart:function(){T&&e&&dispatch(L.SHOW_FIRE_BALL,{data:d.posId}),d.setSymbolBlurActive(!0)},onComplete:function(){S(t).to(.6*l,{position:new u(r,y,p)},{easing:"quadOut",onComplete:function(){s&&s(),T&&e&&a.openTimesSymbol(d.posId),d.setSymbolBlurActive(!1)}}).start()}}).start()},n.newFallMoveTo=function(t,o,e){var i=this.data.getData().symbolPosConfig.get(t),s=i.x,a=i.y,n=i.z,l=this.symbolsMap.get(t);l.node.setPosition(new u(s,a+this.GAME_HEIGHT,n)),l.node.active=!0,l.symbolID==_.SCATTER&&l.playScatterInBtmFast(),l.symbolID!=_.MEN_TOTEM&&l.symbolID!=_.WOMEN_TOTEM||l.playTotemHitAnim(),this.moveTo(l.node,t,!0,o,e)},n.showNewSymbolFall=function(t){var o=this.data.getData().parser.view1D,e=Array.from(this.symbolsMap.keys()),i=Array.from({length:o.length},(function(t,o){return o})).filter((function(t){return!e.includes(t)})).sort((function(t,o){return t-o})),s=0;if(0!=i.length){for(var a=0;a<this.SYMBOL_ROW;a++)for(var n=this.TOTAL_SYMBOL-this.SYMBOL_ROW+a;n>=0;n-=this.SYMBOL_ROW)if(i.includes(n)){s++;var l=o[n],m=s==i.length?t:null;this.createSymbol(n,l,!1,null),this.newFallMoveTo(n,a,m)}}else t()},n.openTimesSymbol=function(t){this.symbolsMap.get(t).openTimesSymbol(t)},n.hideTimesSymbolLabel=function(t){var o=this;this.symbolsMap.get(t).closeTimesLabel(),this.data.getData().parser.lockTimesSymbols.forEach((function(e,i,s){e.symbolPos==t&&1==e.lock&&(o.lockSymbolMap.get(t).closeTimesLabel(),dispatch(L.TIMES_LOCK_OUT,t))}))},n.playTimesSymbolsFunction=function(t){this.symbolsMap.get(t).playTimesSymbolsFunction()},n.startQuickStop=function(t){if(this.unscheduleAllCallbacks(),dispatch(L.SET_EARLY_SPIN_DELAYING_COMPLETED),this.isOutCompleted)p.stopAllByTag(this.symbolInTag),t();else{p.stopAllByTag(this.symbolOutTag),this.isStartSymbolIn&&(p.stopAllByTag(this.symbolInTag),this.isStartSymbolIn=!1);var o=this.node.getComponentsInChildren(b);if(o.length>0)for(var e=0;e<o.length;e++)o[e].recycleSymbol();for(var i=0;i<this.TOTAL_SYMBOL;i++){var s=this.symbolsMap.get(i);s&&(s.recycleSymbol(),this.symbolsMap.delete(i)),i==this.TOTAL_SYMBOL-1&&t()}this.createSymbols(!1),this.isOutCompleted=!0,this.needInitHeight=!0}},n.showSplitA_Anim=function(t,o,e){var i=this.symbolsMap.get(t);this.lockSymbolMap.has(t)&&(Log.e("lock symbol showSplitA_Anim::::",t,o),i.initTimesSymbol(t)),dispatch(L.MOVE_SPLIT,{data:i.node}),i.showSplitA_Anim(e)},n.showSplitSymbolAnime=function(t,o,e){for(var i=0,s=0;s<o.length;s++)this.startCloneTimeSymbol({from:t,target:o[s]},(function(){++i==o.length&&e()}))},n.startCloneTimeSymbol=function(t,o){var e=this,i=this.symbolsMap.get(t.target),s=this.symbolsMap.get(t.from),a=null,n=!1;this.lockSymbolMap.has(t.from)&&(Log.e("lock symbol split "),a=this.lockSymbolMap.get(t.from),n=!0),i&&(i.node.removeFromParent(),this.symbolsMap.delete(t.target));var l=r(s.node).getComponent(b);this.symbolsMap.set(t.target,l),l.node.name=t.target+"";var m=this.data.getData().symbolPosConfig.get(t.target);l.node.setPosition(m),dispatch(L.MOVE_SPLIT,{data:l.node});var c={posId:t.target,symbolId:s.symbolID,isTimesSymbol:!0};if(l.setData(c),l.showSplitB_Anim(o),n&&a){Log.e("add lock symbol to lock view");var S=r(a.node).getComponent(b);this.lockView.addChild(S.node);var y={posId:t.target,symbolId:s.symbolID,isTimesSymbol:!0};S.setData(y),this.lockSymbolMap.set(t.target,S),S.node.name=t.target+"";var p=this.data.getData().symbolPosConfig.get(t.target);S.node.setPosition(p),S.showSplitB_Anim((function(){e.lockView.addChild(a.node)})),S.cloneLockAnime()}},n.showTimesLock_Anim=function(t,o,e,i,s){this.lockSymbolMap.get(o)?s():(this.createLockSymbol(o,t,!0,i),this.lockSymbolMap.get(o).showTimesLock_Anim(e,s))},n.showTimesLock_LevelDown=function(t,o,e){Log.e("showTimesLock_LevelDown:::::",o);var i=this.lockSymbolMap.get(t);i&&i.showTimesStage_Anim(o,e,!0)},n.timeLock_out=function(t){var o=this.lockSymbolMap.get(t);Log.e("time lock out:::::::::::",t),o&&(o.node.active=!1,this.node.removeChild(o.node),this.lockSymbolMap.delete(t),o.recycleSymbol())},n.timeLock_Allout=function(){var t=this;Log.e("time lock all out:::::"),this.lockSymbolMap.forEach((function(o,e){var i=t.symbolsMap.get(e);i.isTimeSymbol&&(o&&(i.isRare=o.isRare),i.initTimesSymbol(e)),o&&(o.node.active=!1,o.node.parent=null,o.recycleSymbol(),t.data.getData().parser.lockTimesSymbols.delete(e))})),this.lockSymbolMap.clear(),this.data.getData().parser.lockTimesSymbols.clear()},n.showWomenSplit_Anim=function(t){},n.showMenLock_Anim=function(t){},n.reset=function(){},n.init=function(){},n.show=function(){this.node.active=!0},n.hide=function(){this.node.active=!1},n.addEvents=function(){var t=this;this.on(g.CLICK_GAME_LOADING_CONFIRM_BTN,(function(){t.createSymbols(!0)})),this.on(L.PARSER_REPLAY_COMPLETED,(function(){t.createSymbols(!0)})),this.on(L.SHOW_SYMBOLS_OUT_ANIM,(function(o){t.symbolsMap.forEach((function(o,e){t.outSymbolMap.set(e,o)})),t.symbolsMap.clear(),t.showSymbolsOut(o.complete)})),this.on(L.SHOW_SYMBOLS_IN_ANIM,(function(o){0==t.isOutCompleted?t.schedule((function(){1==t.isOutCompleted&&(t.unscheduleAllCallbacks(),t.isStartSymbolIn=!0,t.createSymbols(!1),t.showSymbolsIn(o.complete))}),.001):(t.isStartSymbolIn=!0,t.createSymbols(!1),t.showSymbolsIn(o.complete))})),this.on(L.SHOW_SYMBOLS_WIN,(function(o){t.playSymbolsWin(o.complete)})),this.on(L.REMOVE_SYMBOLS,(function(o){t.playOutAnimAndRemoveSymbols(o.complete)})),this.on(L.PLAY_CURRENT_VIEW_FALL_ANIM,(function(o){t.showCurrentViewFall(o.complete)})),this.on(L.CLONE_TIMES,(function(o){t.showCloneSymbols(o.complete)})),this.on(L.SHOW_NEW_SYMBOLS_IN_ANIM,(function(o){t.showNewSymbolFall(o.complete),t.setSymbolsSiblingIndex()})),this.on(L.SHOW_SCATTER_WIN,(function(o){t.playScatterWin(o.complete)})),this.on(L.SHOW_JP_WIN,(function(o){t.playJpWin(o.complete)})),this.on(L.SHOW_TIMES_SYMBOLS_UPGRADE,(function(){t.playRareUpgrade()})),this.on(L.HIDE_TIMES_LABEL,(function(o){t.hideTimesSymbolLabel(o.data)})),this.on(L.PLAY_TIMES_SYMBOL_FUNCTION,(function(o){t.playTimesSymbolsFunction(o.data)})),this.on(L.START_QUICK_STOP,(function(o){t.startQuickStop(o.complete)})),this.on(L.SHOW_SYMBOLS_QUICK_IN_ANIM,(function(o){t.showSymbolsQuickIn(o.complete)})),this.on(g.KILL_SYMBOLS,(function(){t.killSymbols()})),this.on(L.SHOW_TIMES_B,(function(o){for(var e=t.data.getData().gameState.splitList.slice(),i=0,s=0;s<e.length;s++)t.showSplitSymbolAnime(e[s].from,e[s].to,(function(){Log.e("split complete::::::"),++i==e.length&&o.complete()}))})),this.on(L.SHOW_TIMES_A,(function(o){S(t).delay(.5).call((function(){dispatch(L.SHOW_DARK);var e=t.data.getData().gameState.splitList.slice(),i=0;e.forEach((function(s,a){t.showSplitA_Anim(s.from,t.symbolsMap.get(s.from).symbolID,(function(){i++,Log.e("split complete:::::::::",i),i>=e.length&&o.complete()}))})),dispatch(L.SHOW_CLONE_TIMES_MOVING,{})})).start()})),this.on(L.SHOW_TIMES_LOCK,(function(o){S(t).delay(.5).call((function(){var e=t.data.getData().parser.lockTimesSymbols,i=0;e.forEach((function(s,a){t.showTimesLock_Anim(s.symbol,s.symbolPos,s.lock,s.times,(function(){++i>=e.size&&o.complete()}))}))})).start()})),this.on(L.SHOW_TIMES_STAGE,(function(o){t.data.getData().parser.lockTimesSymbols.forEach((function(o,e,i){t.showTimesLock_LevelDown(e,o.lock)}))})),this.on(L.TIMES_LOCK_OUT,(function(o){Log.e("time lock out::::::",o),t.timeLock_out(o)})),this.on(L.TIMES_LOCK_ALLOUT,(function(o){t.timeLock_Allout()})),this.on(L.BACK_SCATTER,(function(o){o.data&&t.node.addChild(o.data)})),this.on(L.BACK_SPLIT,(function(o){o.data&&t.node.addChild(o.data)}))},a(o,[{key:"data",get:function(){return App.dataCenter.get(f)}},{key:"configModel",get:function(){return T.getData()}}]),o}(d)).prototype,"gameSymbol",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(B.prototype,"lockView",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=B))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/TransitionView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameData.ts","./GameEvent.ts","./GameConfigModel.ts","./UrlUtils.ts"],(function(t){"use strict";var n,i,e,o,a,s,r,c,u,p,l,h,d,f,S;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,c=t.sp,u=t.v3},function(t){p=t.default},function(t){l=t.inject},function(t){h=t.default},function(t){d=t.GameEvent},function(t){f=t.EBTM},function(t){S=t.default}],execute:function(){var T,v,g,y,m;s._RF.push({},"cf46aVALiNB1qFK0SbfIWDC","TransitionView",void 0);var w=r.ccclass;r.property,t("TransitionView",(T=w("TransitionView"),v=l("transitionSpine",c.Skeleton),T((m=n((y=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,e(n,"transitionSpine",m,o(n)),n}i(n,t);var s=n.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.start=function(){this.init()},s.onDestroy=function(){t.prototype.onDestroy.call(this)},s.init=function(){},s.showTransitionIn=function(t){var n=this;this.transitionSpine.node.active=!0,"portrait"==S.getViewModeParam()&&(this.transitionSpine.node.scale=u(1.2,-1.2,1.2),this.transitionSpine.node.angle=90),this.transitionSpine.skeletonData=this.data.getTransitionSpine("transition_in"),this.transitionSpine.setAnimation(0,"in",!1),this.transitionSpine.setCompleteListener((function(){n.transitionSpine.node.active=!1})),dispatch(d.PLAY_BTM,{data:{url:f.TRANSITION}}),this.scheduleOnce(t,1)},s.showTransitionOut=function(t){var n=this;this.transitionSpine.node.active=!0,"portrait"==S.getViewModeParam()&&(this.transitionSpine.node.scale=u(1.2,-1.2,1.2),this.transitionSpine.node.angle=90),this.transitionSpine.skeletonData=this.data.getTransitionSpine("transition_out"),this.transitionSpine.setAnimation(0,"out",!1),this.transitionSpine.setCompleteListener((function(){n.transitionSpine.node.active=!1})),dispatch(d.PLAY_BTM,{data:{url:f.TRANSITION}}),this.scheduleOnce(t,1)},s.reset=function(){},s.setData=function(t){},s.show=function(){this.node.active=!0},s.hide=function(){this.node.active=!1},s.addEvents=function(){var t=this;this.on(d.SHOW_TRANSITION_IN,(function(n){t.showTransitionIn(n.data)})),this.on(d.SHOW_TRANSITION_OUT,(function(n){t.showTransitionOut(n.data)}))},a(n,[{key:"data",get:function(){return App.dataCenter.get(h)}}]),n}(p)).prototype,"transitionSpine",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/TreasuresView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./GameEvent.ts","./GameConfigModel.ts","./CmmSlotUtils.ts","./Decorators.ts","./GameData.ts","./SlotFrameworkEvent.ts","./MathUtil.ts","./UrlUtils.ts"],(function(t){"use strict";var e,i,n,a,o,s,l,c,r,u,h,d,p,f,_,T,S,m,w,B,N,O,g,y,W;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,l=t._decorator,c=t.Node,r=t.sp,u=t.Tween,h=t.tween,d=t.NodeEventType,p=t.Vec3,f=t.KeyCode,_=t.Label},function(t){T=t.default},function(t){S=t.GameEvent},function(t){m=t.EBTM,w=t.default},function(t){B=t.CmmSlotUtils},function(t){N=t.inject},function(t){O=t.default},function(t){g=t.SlotFrameworkEvent},function(t){y=t.default},function(t){W=t.default}],execute:function(){var A,P,b,C,I,E,M,U,v,L,D,R,G,k,V;s._RF.push({},"8aa14oMcU9NkqZLu7MuIsrF","TreasuresView",void 0);var H,z=l.ccclass,F=l.property;!function(t){t[t.NONE=0]="NONE",t[t.SHOW_BIGWIN=1]="SHOW_BIGWIN",t[t.SHOW_BUGWIN_NUMBER=2]="SHOW_BUGWIN_NUMBER",t[t.SHOW_BUGWIN_NUMBER_END=3]="SHOW_BUGWIN_NUMBER_END",t[t.BIGWIN_COMPLETED=4]="BIGWIN_COMPLETED"}(H||(H={}));t("TreasuresView",(A=z("TreasuresView"),P=N("alert",c),b=F(c),C=N("alert/effectBg",r.Skeleton),I=N("alert/totalWin",_),E=N("alert/fireworks",r.Skeleton),M=N("alert/coinSprays",c),A((L=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"alert",L,a(e)),n(e,"bbr",D,a(e)),n(e,"effectBg",R,a(e)),n(e,"totalWin",G,a(e)),n(e,"fireworks",k,a(e)),n(e,"coinSprays",V,a(e)),e.bigwinFontFileNames=["w_big","w_super","w_mega","w_ultra","w_legend"],e.complete=null,e.completedCB=null,e.tweenNumTween=null,e.bigwinVO=null,e.playBigFontLoop=null,e.showWinStatus=H.NONE,e.playPrizeLoopBtmSchedule=null,e.playPrizeVoiceBtmSchedule=null,e}i(e,t),e.getPrefabUrl=function(){return"prefabs/"+W.getViewModeParam()+"/TreasuresView"};var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this)},s.start=function(){this.init()},s.onDestroy=function(){this.stopAllMusicAndSchedule(),t.prototype.onDestroy.call(this)},s.init=function(){this.enabledKeyDown=!0},s.show=function(e){t.prototype.show.call(this)},s.onClose=function(){this.unscheduleAllCallbacks(),u.stopAllByTarget(this),this.closeNodes(),this.stopAllMusicAndSchedule(),App.globalAudio.isMusicOn=!0,App.globalAudio.resumeMusic();var t=this.data.getData().gameState.noWinReward;dispatch(S.QUICK_STOP_TOTAL_WINNINGS,{data:t}),dispatch(S.QUICK_STOP_WIN_AMOUNT,{data:t}),this.close()},s.stopAllMusicAndSchedule=function(){dispatch(S.STOP_BTM,{data:m.JP_POPUP_IN_2}),dispatch(S.STOP_BTM,{data:m.JP_POPUP_LOOP_2}),dispatch(S.STOP_BTM,{data:m.ULTRA_IN}),dispatch(S.STOP_BTM,{data:m.LEGEND_IN}),dispatch(S.STOP_BTM,{data:m.S_PRIZE_LOOP}),dispatch(S.STOP_BTM,{data:m.L_PRIZE_LOOP}),dispatch(S.STOP_BTM,{data:m.FIREWORKS}),dispatch(S.STOP_BTM,{data:m.BIG_VOCAL}),dispatch(S.STOP_BTM,{data:m.SUPER_VOCAL}),dispatch(S.STOP_BTM,{data:m.MEGA_VOCAL}),dispatch(S.STOP_BTM,{data:m.ULTRA_VOCAL}),dispatch(S.STOP_BTM,{data:m.LEGENDARY_VOCAL}),this.unschedule(this.playPrizeLoopBtmSchedule),this.unschedule(this.playPrizeVoiceBtmSchedule)},s.closeNodes=function(){this.bbr&&(this.bbr.active=!1),this.effectBg.node.active=!1,this.totalWin.node.active=!1,this.fireworks.node.active=!1,this.coinSprays.active=!1,this.coinSprays.children.forEach((function(t){t.active=!1})),this.alert.targetOff(this)},s.playAnimation=function(t){App.globalAudio.pauseMusic(),this.playWin(t)},s.playWin=function(t){var e=this,i=w.getData().bigwinAutoCloseTime;this.effectBg.node.active=!0,this.effectBg.clearTracks(),this.effectBg.setToSetupPose(),dispatch(S.PLAY_BTM,{data:{url:m.JP_POPUP_IN_2,loop:!1}}),this.effectBg.setAnimation(0,"in",!1),this.effectBg.setCompleteListener((function(){e.effectBg.setCompleteListener(null),e.effectBg.setAnimation(0,"open",!1),h(e).delay(.5).call((function(){dispatch(S.PLAY_BTM,{data:{url:m.JP_POPUP_LOOP_2,loop:!0}}),e.playCoinSprayAndRunScore()})).start(),e.effectBg.setCompleteListener((function(){e.effectBg.setCompleteListener(null),e.effectBg.setAnimation(0,"loop",!0)}))})),this.scheduleOnce(this.showWinResult,i+t)},s.playCoinSprayAndRunScore=function(){var t=this,e=this.data.getData().gameState.noWinReward,i=this.data.getData().definition.digital;dispatch(g.UPDATE_TOTAL_WINNINGS,{data:{value:e,tweenTime:8}}),dispatch(S.UPDATE_WIN_AMOUNT,{data:{value:e,tweenTime:8}}),this.showCoinSpray();var n={label:this.totalWin,start:0,end:e,tweenTime:8,digital:i,useThousandsSeparator:!0};this.showWinStatus=H.SHOW_BUGWIN_NUMBER,this.totalWin.node.active=!0,this.tweenNumTween=B.tweenNum(n),this.alert.once(d.TOUCH_END,(function(){t.showWinResult()}),this)},s.addClickAlertCompleteCb=function(){this.unschedule(this.addClickAlertCompleteCb),this.alert.once(d.TOUCH_END,this.completedCB);var t=w.getData().bigwinAutoCloseTime;this.scheduleOnce(this.completedCB,t)},s.playBounceTween=function(t,e){h(t).to(.1,{scale:new p(1.8,1.8,1.8)}).delay(.01).to(.1,{scale:new p(1,1,1)},{onComplete:function(){e&&e()}}).start()},s.showCoinSpray=function(){var t=this,e=this.coinSprays.getComponentsInChildren(r.Skeleton);this.coinSprays.active=!0;for(var i=function(){var i=e[n];0==n?(i.node.active=!0,i.setAnimation(0,"coin_01",!1)):1==n?t.scheduleOnce((function(){i.node.active=!0,i.setAnimation(0,"coin_02",!1)}),1.3):t.scheduleOnce((function(){var t=y.getRandomNumber(3,6);i.node.active=!0,i.setAnimation(0,"radom_0"+t,!1),i.setCompleteListener((function(){var t=y.getRandomNumber(3,6);i.setAnimation(0,"radom_0"+t,!1)}))}),2.8+.5*(n-2))},n=0;n<e.length;n++)i()},s.showWinResult=function(){var t=this.data.getData().gameState.noWinReward;u.stopAllByTarget(this),this.tweenNumTween&&this.tweenNumTween.stop(),this.totalWin.string=B.formatNumber(t),this.playBounceTween(this.totalWin.node),this.unschedule(this.playBigFontLoop),dispatch(S.QUICK_STOP_TOTAL_WINNINGS,{data:t}),dispatch(S.QUICK_STOP_WIN_AMOUNT,{data:t}),this.unschedule(this.showWinResult),this.addClickAlertCompleteCb()},s.showTreasureWin=function(t){var e=this;this.totalWin.string="0.00",this.showWinStatus=H.SHOW_BIGWIN,this.completedCB=function(){e.showWinStatus=H.BIGWIN_COMPLETED,t(),e.onClose(),e.unschedule(e.playBigFontLoop)},App.globalAudio.pauseMusic(),App.globalAudio.isMusicOn=!1,h(this).delay(1).call((function(){Log.e("this.bbr::::::::::::",e.bbr),e.bbr.active=!0,h(e).delay(1).call((function(){e.playAnimation(8)})).start()})).start()},s.onKeyDown=function(e){if(t.prototype.onKeyDown.call(this,e),e.keyCode===f.SPACE)switch(this.showWinStatus){case H.SHOW_BUGWIN_NUMBER:this.showWinStatus=H.SHOW_BUGWIN_NUMBER_END;break;case H.SHOW_BUGWIN_NUMBER_END:this.showWinStatus=H.BIGWIN_COMPLETED,this.scheduleOnce(this.completedCB,.5)}},s.addEvents=function(){},o(e,[{key:"data",get:function(){return App.dataCenter.get(O)}}]),e}(T)).prototype,"alert",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"bbr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(v.prototype,"effectBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(v.prototype,"totalWin",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"fireworks",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(v.prototype,"coinSprays",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=v))||U));s._RF.pop()}}}));

System.register("chunks:///_virtual/types.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var o,c;e({EGameType:void 0,EPool:void 0}),t._RF.push({},"591d7zNLMlNN42kISbf19kO","types",void 0),function(e){e.SYMBOL_POOL="symbolPool"}(o||(o=e("EPool",{}))),function(e){e.MAIN_GAME="mainGame",e.FREE_GAME="freeGame"}(c||(c=e("EGameType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/WinView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./CmmSlotUtils.ts","./GameConfigModel.ts","./GameData.ts","./GameEvent.ts"],(function(t){"use strict";var n,e,o,i,a,s,c,r,u,f,l,h,d;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy,i=t._decorator,a=t.instantiate,s=t.Label,c=t.tween,r=t.Vec3},function(t){u=t.default},function(t){f=t.CmmSlotUtils},function(t){l=t.default},function(t){h=t.default},function(t){d=t.GameEvent}],execute:function(){var p;o._RF.push({},"f0bace+0B5NDIDlOv6rqpmQ","WinView",void 0);var m=i.ccclass;i.property,t("WinView",m("WinView")(p=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.start=function(){this.init()},i.onDestroy=function(){t.prototype.onDestroy.call(this)},i.init=function(){},i.showWinCash=function(){var t=this,n=this.data.getData().gameState.winSymbols,e=l.getData().filePaths.winCashPrefab,o=App.cache.get(this.data.module,e).data,i=[14,15,8,9,20,21,2,3,26,27,13,16,7,10,19,22,1,4,25,28,12,17,6,11,18,23,0,5,24,29];null==n&&(n=[]),n.forEach((function(n){var e=[];n.symbolPos.forEach((function(t){e.push(i.indexOf(t))})),e.sort((function(t,n){return t-n}));var c=a(o),r=i[e[0]],u=c.getComponent(s);t.node.addChild(c),u.string=f.formatNumber(n.winnings),t.playWinCashTween(c,r)}))},i.playWinCashTween=function(t,n){var e=this.data.getData().symbolPosConfig.get(n),o=t.getComponent(s).color;c(t).set({position:e}).by(1.5,{position:new r(0,50,0)},{easing:"fade",onComplete:function(){t.destroy()}}).start(),c(o).delay(1).to(.5,{a:0},{easing:"fade"}).start()},i.reset=function(){},i.setData=function(t){},i.show=function(){this.node.active=!0},i.hide=function(){this.node.active=!1},i.addEvents=function(){var t=this;this.on(d.SHOW_WIN_CASH,(function(){t.showWinCash()}))},e(o,[{key:"data",get:function(){return App.dataCenter.get(h)}}]),o}(u))||p);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/g1005', 'chunks:///_virtual/g1005'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});